(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{149:function(e,t,a){},151:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(22),o=a.n(c),i=(a(71),a(73),a(75),a(77),a(79),a(81),a(83),a(159)),l=a(160),u=a(152),s=a(2),m=a(40),d=a(5),p=a(1),f=function(e){var t=e.updatedItem,a=e.collection,n=e.save;return a.map(function(e){if(e.id!==t.id)return e;if(n)return Object(p.a)({},e,t,{originalProps:null});var a=e.originalProps||e;return Object(p.a)({},e,t,{originalProps:a})})},b=function(e,t){return t.map(function(t){return t.id!==e.id?t:Object(p.a)({},t,e)})},g=function(e,t){return t.map(function(t){return t.id!==e.id?t:Object(p.a)({},t,e,{updatedProps:null,errors:[]})})},E=function(e,t){return t.map(function(t){return t.id!==e.id?t:Object(p.a)({},t,{updatedProps:Object(p.a)({},t.updatedProps,e)})})},h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=e.budget_exclusion,n=e.check_number,r=e.details,c=e.notes,o=r.reduce(function(e,t){return e+t.amount},0),i=!!a,l=""!==n&&null!==n,u=""!==c&&null!==c,s=Object(p.a)({},v,{showBudgetExclusion:i,showCheck:l,showNotes:u},t);return Object(p.a)({},e,{amount:o,details:r.map(function(e){return Object(p.a)({},e,{_id:e.id})}),formOptions:s})},v={showBudgetExclusion:!1,showCheck:!1,showNotes:!1,showReceipt:!1},y={collection:[],accountsFetched:!1,showNewForm:!1,newAccount:{cash_flow:!0,name:"",slug:"",priority:""}},O=function(e,t){var a=e.account_id,n=e.amount;return t.map(function(e){return e.id!==a?e:Object(p.a)({},e,{balance:e.balance+n})})},_=function(e,t){var a=e.from_transaction,n=e.to_transaction,r=h(n).amount;return t.map(function(e){return a.account_id===e.id?Object(p.a)({},e,{balance:e.balance-r}):n.account_id===e.id?Object(p.a)({},e,{balance:e.balance+r}):e})},N=function(e,t){var a=e.amount,n=e.from_account_id,r=e.to_account_id;return t.map(function(e){return n===e.id?Object(p.a)({},e,{balance:e.balance+a}):r===e.id?Object(p.a)({},e,{balance:e.balance-a}):e})},w={key:null,keyFormInput:"",status:null},j=function(e,t){var a=e.balance,n=e.spent,r=t.reduce(function(e,t){return e+t.remaining},0),c=t.reduce(function(e,t){return e+t.overUnderBudgetAmount},0),o=a+r,i=o-c-n;return Object(p.a)({collection:[]},e,{total_remaining:o,amount:i,overUnderBudgetAmount:c})},T=function(e){var t=e.accrual,a=e.amount,n=e.expense,r=e.maturity_month,c=e.maturity_year,o=e.month,i=e.year,l=a-(e.spent||0),u=0===(e.transaction_count||0),s=u?a:0,m=n&&l>0||!n&&l<0,d=u?0:-1*l,f=t&&r===o&&c===i,b=!u||0===a;return Object(p.a)({},e,{deletable:u,isCleared:b,remaining:s,difference:l,matureAccrual:f,overUnderBudget:m,overUnderBudgetAmount:d})},I=function(e){var t=e.accrual,a=e.amount,n=e.expense,r=e.maturity_month,c=e.maturity_year,o=e.month,i=e.year,l=e.spent||0,u=e.transactions_count||0,s=e.floatAmount||parseFloat(e.amount/100).toFixed(2),m=a-l,d=n?Math.min(m,0):Math.max(m,0),f=n&&m>0||!n&&m<0,b=f?-1*m:0,g=t&&r===o&&c===i;return Object(p.a)({collection:[],events:[]},e,{spent:l,transactions_count:u,floatAmount:s,remaining:d,difference:m,overUnderBudget:f,overUnderBudgetAmount:b,matureAccrual:g})},D=function(e,t){var a=e.collection,n=e.metadata,r=a.map(function(e){return e.monthly?T(e):I(e)});return Object(p.a)({},t,{discretionary:j(n,r),monthly:Object(p.a)({},t.monthly,{collection:r.filter(function(e){return e.monthly})}),weekly:Object(p.a)({},t.weekly,{collection:r.filter(function(e){return!e.monthly})}),itemsFetched:!0,metadata:Object(p.a)({},t.metadata,n)})},x=function(e,t){var a=t.metadata,n=t.monthly,r=t.setup,c=t.weekly,o=t.monthly.collection.find(function(t){return t.id===e.id}),i=T(Object(p.a)({},o,e)),l=f({updatedItem:i,collection:n.collection,save:!0});return Object(p.a)({},t,{discretionary:j(a,[].concat(Object(d.a)(c.collection),Object(d.a)(l))),monthly:Object(p.a)({},n,{collection:l}),setup:Object(p.a)({},r,{newMonth:Object(p.a)({},r.newMonth,{isFetched:!1}),baseMonth:Object(p.a)({},r.baseMonth,{isFetched:!1})})})},C=function(e,t){var a=t.metadata,n=t.monthly,r=t.setup,c=t.weekly,o=t.weekly.collection.find(function(t){return t.id===e.id}),i=I(Object(p.a)({},o,e),t.metadata),l=f({updatedItem:i,collection:c.collection,save:!0});return Object(p.a)({},t,{discretionary:j(a,[].concat(Object(d.a)(n.collection),Object(d.a)(l))),weekly:Object(p.a)({},c,{collection:l}),setup:Object(p.a)({},r,{newMonth:Object(p.a)({},r.newMonth,{isFetched:!1}),baseMonth:Object(p.a)({},r.baseMonth,{isFetched:!1})})})},A=function(e){return e.collection.map(function(e){return e.monthly?T(Object(p.a)({},e,{status:"pending"})):I(Object(p.a)({},e,{status:"pending"}))})},M=function(e){var t=e.collection,a=e.metadata;return a.balance+t.reduce(function(e,t){return e+function(e){var t=e.amount,a=e.expense,n=e.monthly,r=e.spent,c=e.transaction_count;if(n)return 0===c?t:0;var o=t-r;return a?Math.min(o,0):Math.max(o,0)}(t)},0)},k={name:"",default_amount:"",accrual:"false",showForm:!1,icon_id:null,errors:[]},F=new Date,S={discretionary:{balance:0,spent:0,total_remaining:0,days_remaining:1,total_days:1,collection:[]},categories:{collection:[],fetched:!1,filters:[{name:"adjective",value:""},{name:"adverb",value:""},{name:"search",value:""}],showForm:!1},monthly:{collection:[],showForm:!1,newItem:{amount:"",budget_category_id:null,errors:[]}},weekly:{collection:[],showForm:!1,newItem:{amount:"",budget_category_id:null,errors:[]}},newCategory:k,itemsFetched:!1,metadata:{month:F.getMonth()+1,year:F.getFullYear(),is_closed_out:!0,is_set_up:!0},menuOptions:{showAccruals:!1,showCleared:!1,sortOrder:"byName"},finalize:{baseMonth:{month:null,year:null,isFetched:!1,collection:[],is_closed_out:!1},next:{month:null,year:null,isFetched:!1,collection:[]},extra:[],selectedFromAccountId:null,selectedToAccountId:null},setup:{baseMonth:{month:12,year:2099,isFetched:!1,collection:[]},newMonth:{month:12,year:2099,isFetched:!1,reviewed:!1,set_up_completed_at:null,collection:[],newItem:{amount:"",budget_category_id:null,selectedOption:""}}},maturityIntervals:[]},R={collection:[],fetched:!1,newIcon:{name:"",class_name:""}},P=a(9),L=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=e.find(t);return void 0===n?a:n},z={errors:[Object(p.a)({},{type:"api",messages:{},requests:[]}),{type:"misc",messages:{},requests:[]}],events:[],showEvents:!0},U={messages:{},requests:[]},Y=function(e,t){var a=t.errors,n=e.errors.map(function(e){return e.type}),r=a.reduce(function(e,t){return[].concat(Object(d.a)(e),Object(d.a)(Object.keys(t)))},[]);return Object(d.a)(new Set([].concat(Object(d.a)(r),Object(d.a)(n)))).map(function(n){var r=L(e.errors,function(e){return e.type===n},Object(p.a)({type:n},U)),c=L(a,function(e){return e.hasOwnProperty(r.type)},null);if(null===c)return r;var o=r.messages[t.status]||[];return Object(p.a)({},r,{messages:Object(p.a)({},r.messages,Object(P.a)({},t.status,Object(d.a)(new Set([].concat(Object(d.a)(o),Object(d.a)(c[r.type])))))),requests:[].concat(Object(d.a)(r.requests),[t])})})},B=function(e,t){var a=e.errors,n=t.errorMessage,r=t.status,c=t.type;return a.map(function(e){return e.type===c?Object(p.a)({},e,{messages:Object(P.a)({},r,e.messages[r].filter(function(e){return e!==n}))}):e})},W=function(e){var t=e.month,a=e.day,n=e.year,r=e.format,c=function(e){switch(parseInt(e)){case 1:return{short:"Jan.",long:"January"};case 2:return{short:"Feb.",long:"February"};case 3:return{short:"Mar.",long:"March"};case 4:return{short:"Apr.",long:"April"};case 5:return{short:"May",long:"May"};case 6:return{short:"June",long:"June"};case 7:return{short:"July",long:"July"};case 8:return{short:"Aug.",long:"August"};case 9:return{short:"Sep.",long:"September"};case 10:return{short:"Oct.",long:"October"};case 11:return{short:"Nov.",long:"November"};case 12:return{short:"Dec.",long:"December"};default:return{short:"",long:""}}}(t);switch(r){case"dateObject":return new Date(n,t-1,a);case"longMonth":return c.long;case"m/d":return"".concat(t,"/").concat(a);case"mm/dd/yyyy":return[t<10?"0"+t:t,a<10?"0"+a:a,n].join("/");case"monthYear":return"".concat(c.long," ").concat(n);case"numericMonthYear":return"".concat(t,"/").concat(n);case"object":return{month:t,year:n,day:a};case"shortMonthYear":return"".concat(c.short," ").concat(n);case"yyyy-mm-dd":return[n,t<10?"0"+t:t,a<10?"0"+a:a].join("-");default:return"".concat(c.short," ").concat(a,", ").concat(n)}},G=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{format:"default"},a=e.split("-"),n=parseInt(a[1]||0),r=parseInt(a[2]||0),c=parseInt(a[0]||1900);return W({month:n,year:c,day:r,format:t.format})},H=function(e){var t=e.month,a=e.year;return 12===t?{month:1,year:a+1}:{month:t+1,year:a}},K=function(e){var t=e.month,a=e.year;return 1===t?{month:12,year:a-1}:{month:t-1,year:a}},q=function(e,t){return null!==e&&(V(e,t[0])&&J(e,t[1]))},V=function(e,t){if(null===e)return!1;var a=G(e,{format:"object"}),n=G(t,{format:"object"});return a.year>n.year||!(a.year<n.year)&&(a.month>n.month||!(a.month<n.month)&&a.day>=n.day)},J=function(e,t){if(null===e)return!1;var a=G(e,{format:"object"}),n=G(t,{format:"object"});return a.year<n.year||!(a.year>n.year)&&(a.month<n.month||!(a.month>n.month)&&a.day<=n.day)},X=function(e,t){if(null===e)return!1;var a=G(e,{format:"object"}),n=G(t,{format:"object"});return a.year<n.year||!(a.year>n.year)&&(a.month<n.month||!(a.month>n.month)&&a.day<n.day)},$=function(e){return W({year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate(),format:"object"})},Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"yyyy-mm-dd",t=$(new Date);return W(Object(p.a)({},t,{format:e}))},Q=function(e){return JSON.stringify(Z("object"))===JSON.stringify($(e))},ee=W,te=function(e,t){var a=e.clearance_date,n=t.metadata.query_options.include_pending,r=t.metadata,c=r.prior_balance,o=r.date_range,i=q(a,o),l=h(e),u=n&&null===a||i?[].concat(Object(d.a)(t.collection),[l]):t.collection,s=X(a,o[0])?c+l.amount:c;return Object(p.a)({},t,{metadata:Object(p.a)({},t.metadata,{prior_balance:s}),collection:u,budgetItems:Object(p.a)({},t.budgetItems,{fetched:!1})})},ae=function(e,t){var a=!e.budget_exclusion;return Object(p.a)({},e,{details:e.details.map(function(e){return function(e){return t.detailId===e.id||t.detailId===e._id}(e)&&a?Object(p.a)({},e,{updatedProps:Object(p.a)({},e.updatedProps,t)}):a?e:Object(p.a)({},e,{updatedProps:Object(p.a)({},e.updatedProps,t,{budget_item_id:null})})})})},ne=function(e,t){var a=Object(p.a)({},e,t);return a.budget_exclusion?Object(p.a)({},a,{details:a.details.map(function(e){return Object(p.a)({},e,{budget_item_id:null})})}):a},re=function(e){var t=e.amount,a=e.clearance_date,n=e.detailId,r=e.transactionId,c=e.state,o=c.metadata,i=o.prior_balance,l=o.date_range,u=X(a,l[0])?i+t:i;return Object(p.a)({},c,{metadata:Object(p.a)({},c.metadata,{prior_balance:u}),collection:c.collection.map(function(e){return e.id===r?function(e){var t=Object(p.a)({},e,{details:e.details.filter(function(e){return e.id!==n})});return h(t)}(e):e})})},ce=function(e,t){var a=e.clearance_date,n=t.metadata,r=n.prior_balance,c=n.date_range,o=h(e),i=function(e,t){var a=e.clearance_date,n=t.metadata.query_options.include_pending,r=t.metadata.date_range,c=q(a,r);return n&&null===a||c?t.collection.map(function(t){return t.id!==e.id?t:Object(p.a)({},t,e)}):t.collection.filter(function(t){return t.id!==e.id})}(o,t),l=X(a,c[0])?r+o.amount:r;return Object(p.a)({},t,{metadata:Object(p.a)({},t.metadata,{prior_balance:l}),collection:i,budgetItems:Object(p.a)({},t.budgetItems,{fetched:!1})})},oe=new Date,ie={amount:"",budget_item_id:null,disabled:!1},le={metadata:{date_range:["",""],prior_balance:0,query_options:{month:oe.getMonth()+1,year:oe.getFullYear()}},slug:null,collection:[],budgetItems:{collection:[],fetched:!1},new:{id:null,check_number:"",clearance_date:"",description:"",notes:null,showForm:!0,budget_exclusion:!1,receipt:null,formOptions:v,details:[ie]}},ue={to_account_id:null,from_account_id:null,amount:""},se={metadata:{limit:10,offset:0,currentPage:1,viewing:[1,10],total:999},collection:[],fetchedTransfers:!1,newTransfer:ue},me=function(e){return Object(p.a)({},e,{to_transaction:h(e.to_transaction),from_transaction:h(e.from_transaction)})},de=Object(m.c)(Object(m.b)({accounts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"accounts/CREATED":return Object(p.a)({},e,{collection:[].concat(Object(d.a)(e.collection),[t.payload])});case"accounts/DELETED":return Object(p.a)({},e,{collection:e.collection.filter(function(e){return e.id!==t.payload.id})});case"accounts/FETCHED":return Object(p.a)({},e,{collection:t.payload,accountsFetched:!0});case"accounts/RESET":return Object(p.a)({},e,{collection:g(t.payload,e.collection)});case"accounts/RESET_FORM":return Object(p.a)({},e,{newAccount:y.newAccount,showNewForm:!1});case"accounts/TOGGLE_SHOW_NEW_FORM":return Object(p.a)({},e,{showNewForm:t.payload});case"accounts/UPDATE":return Object(p.a)({},e,{collection:b(t.payload,e.collection)});case"accounts/UPDATED":return Object(p.a)({},e,{collection:g(t.payload,e.collection),accountsFetched:!1});case"accounts/UPDATE_NEW":return Object(p.a)({},e,{newAccount:Object(p.a)({},e.newAccount,t.payload)});case"accounts/UPDATE_PROPS":return Object(p.a)({},e,{collection:E(t.payload,e.collection)});case"transactions/CREATED":return Object(p.a)({},e,{collection:O(h(t.payload),e.collection)});case"transactions/REMOVE_DETAIL":case"transactions/DELETED":return Object(p.a)({},e,{collection:O(t.payload,e.collection)});case"transactions/UPDATED":return Object(p.a)({},e,{collection:e.collection.map(function(e){return e.id!==t.payload.account_id?e:Object(p.a)({},e,{balance:e.balance+h(t.payload).amount-t.payload.originalAmount})})});case"transfers/CREATED":return Object(p.a)({},e,{collection:_(t.payload,e.collection)});case"transfers/DELETED":return Object(p.a)({},e,{collection:N(t.payload,e.collection)});default:return e}},api:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"api/KEY_EDITED":return Object(p.a)({},e,{keyFormInput:t.payload.key});case"api/STATUS_UPDATED":return Object(p.a)({},e,{status:t.payload.status});case"api/KEY_UPDATED":return Object(p.a)({},e,{key:t.payload.key,status:null});default:return e}},budget:function(){var e,t,a,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,c=arguments.length>1?arguments[1]:void 0;switch(c.type){case"budget/categories/APPLY_ERRORS_ON_EDIT":return Object(p.a)({},r,{categories:Object(p.a)({},r.categories,{collection:r.categories.collection.map(function(e){return e.id===c.payload.id?Object(p.a)({},e,{errors:[].concat(Object(d.a)(e.errors),Object(d.a)(c.payload.errors))}):e})})});case"budget/categories/APPLY_FILTER":return Object(p.a)({},r,{categories:Object(p.a)({},r.categories,{filters:r.categories.filters.map(function(e){return e.name===c.payload.name?c.payload:e})})});case"budget/categories/CREATED":return Object(p.a)({},r,{categories:Object(p.a)({},r.categories,{showForm:!1,collection:[].concat(Object(d.a)(r.categories.collection),[Object(p.a)({},c.payload,{isNew:!0})])})});case"budget/categories/DELETED":return Object(p.a)({},r,{categories:Object(p.a)({},r.categories,{collection:r.categories.collection.filter(function(e){return e.id!==c.payload})})});case"budget/categories/EDIT_MATURITY_INTERVAL":return Object(p.a)({},r,{maturityIntervals:E(c.payload,r.maturityIntervals)});case"budget/categories/ERRORS_ON_NEW":return Object(p.a)({},r,{newCategory:Object(p.a)({},r.newCategory,c.payload)});case"budget/categories/FETCHED":return Object(p.a)({},r,{categories:Object(p.a)({},r.categories,{collection:c.payload,fetched:!0})});case"budget/categories/MATURITY_INTERVAL_CREATED":return Object(p.a)({},r,{itemsFetched:!1,categories:Object(p.a)({},r.categories,{collection:r.categories.collection.map(function(e){return e.id!==c.payload.id?e:Object(p.a)({},e,{showMaturityIntervalForm:!1,newMaturityIntervalAttributes:{}})})}),maturityIntervals:[].concat(Object(d.a)(r.maturityIntervals),[c.payload.maturityInterval])});case"budget/categories/MATURITY_INTERVALS_FETCHED":return Object(p.a)({},r,{categories:Object(p.a)({},r.categories,{collection:r.categories.collection.map(function(e){return e.id===c.payload.id?Object(p.a)({},e,{maturityIntervalsFetched:!0}):e})}),maturityIntervals:[].concat(Object(d.a)(r.maturityIntervals),Object(d.a)(c.payload.collection))});case"budget/category/REMOVE_MATURITY_INTERVAL":return Object(p.a)({},r,{itemsFetched:!1,maturityIntervals:r.maturityIntervals.filter(function(e){return e.id!==c.payload.id})});case"budget/categories/RESET":return Object(p.a)({},r,{categories:Object(p.a)({},r.categories,{collection:g(c.payload,r.categories.collection)})});case"budget/categories/RESET_NEW_FORM":return Object(p.a)({},r,{newCategory:k});case"budget/categories/TOGGLE_MATURITY_INTERVAL_EDIT_FORM":return Object(p.a)({},r,{maturityIntervals:r.maturityIntervals.map(function(e){return e.id===c.payload.id?Object(p.a)({},e,c.payload):e})});case"budget/categories/TOGGLE_NEW_FORM":return Object(p.a)({},r,{categories:Object(p.a)({},r.categories,{showForm:c.payload.showForm})});case"budget/categories/UPDATE":return Object(p.a)({},r,{categories:Object(p.a)({},r.categories,{collection:b(c.payload,r.categories.collection)})});case"budget/categories/UPDATE_NEW":return Object(p.a)({},r,{newCategory:Object(p.a)({},r.newCategory,c.payload)});case"budget/categories/UPDATE_MATURITY_INTERVAL":return Object(p.a)({},r,{maturityIntervals:g(c.payload,r.maturityIntervals)});case"budget/categories/UPDATE_PROPS":return Object(p.a)({},r,{categories:Object(p.a)({},r.categories,{collection:E(c.payload,r.categories.collection)})});case"budget/categories/UPDATED":return c.payload.monthly?Object(p.a)({},r,{categories:Object(p.a)({},r.categories,{collection:g(c.payload,r.categories.collection)}),monthly:Object(p.a)({},r.monthly,{collection:r.monthly.collection.map(function(e){return e.budget_category_id===c.payload.id?Object(p.a)({},e,{name:c.payload.name,accrual:c.payload.accrual}):e})})}):Object(p.a)({},r,{categories:Object(p.a)({},r.categories,{collection:g(c.payload,r.categories.collection)}),weekly:Object(p.a)({},r.weekly,{collection:r.weekly.collection.map(function(e){return e.budget_category_id===c.payload.id?Object(p.a)({},e,{name:c.payload.name,accrual:c.payload.accrual}):e})})});case"budget/finalize/ADD_FINALIZE_ITEM":return Object(p.a)({},r,{finalize:Object(p.a)({},r.finalize,{next:Object(p.a)({},r.finalize.next,{collection:[].concat(Object(d.a)(r.finalize.next.collection),[c.payload])})})});case"budget/finalize/BASE_MONTH_FETCH":return Object(p.a)({},r,{finalize:Object(p.a)({},r.finalize,{baseMonth:Object(p.a)({},r.finalize.baseMonth,c.payload.metadata,{collection:A(c.payload),isFetched:!0}),extra:[].concat(Object(d.a)(r.finalize.extra),[{id:0,name:"Discretionary",amount:-1*M(c.payload)}])})});case"budget/finalize/EDIT_BASE_AMOUNT":return Object(p.a)({},r,{finalize:Object(p.a)({},r.finalize,{baseMonth:Object(p.a)({},r.finalize.baseMonth,{collection:r.finalize.baseMonth.collection.map(function(e){return e.id===c.payload.id?Object(p.a)({},e,c.payload):e})})})});case"budget/finalize/MARK_INTERVAL_CLOSED":return Object(p.a)({},r,{finalize:Object(p.a)({},r.finalize,{baseMonth:Object(p.a)({},r.finalize.baseMonth,{is_closed_out:!0})})});case"budget/finalize/MARK_SELECTED":return Object(p.a)({},r,{finalize:Object(p.a)({},r.finalize,{next:Object(p.a)({},r.finalize.next,{collection:r.finalize.next.collection.map(function(e){return e.id===c.payload.id?Object(p.a)({},e,{selected:!0}):Object(p.a)({},e,{selected:!1})})})})});case"budget/finalize/NEXT_MONTH_FETCH":return function(e,t){return Object(p.a)({},t,D(e,t),{finalize:Object(p.a)({},t.finalize,{next:Object(p.a)({},t.finalize.next,e.metadata,{collection:A(e),isFetched:!0})})})}(c.payload,r);case"budget/finalize/SET_STATUS":return Object(p.a)({},r,{finalize:Object(p.a)({},r.finalize,{baseMonth:Object(p.a)({},r.finalize.baseMonth,{collection:r.finalize.baseMonth.collection.map(function(e){return e.id===c.payload.id?Object(p.a)({},e,c.payload):e})})})});case"budget/finalize/UPDATE_EXTRA":return Object(p.a)({},r,{finalize:Object(p.a)({},r.finalize,{extra:(a=c.payload,n=r.finalize.extra,n.map(function(e){return e.id}).includes(a.id)?n.map(function(e){return e.id===a.id?Object(p.a)({},e,a):e}):[].concat(Object(d.a)(n),[a]))})});case"budget/finalize/UPDATE_FINALIZE_ITEM":return function(e,t){return e.monthly?x(e,t):C(e,t)}(c.payload,r);case"budget/finalize/UPDATE_SELECTED_FROM_ACCOUNT_ID":return Object(p.a)({},r,{finalize:Object(p.a)({},r.finalize,{selectedFromAccountId:c.payload.id})});case"budget/finalize/UPDATE_SELECTED_TO_ACCOUNT_ID":return Object(p.a)({},r,{finalize:Object(p.a)({},r.finalize,{selectedToAccountId:c.payload.id})});case"budget/BASE_MONTH_FETCHED":return Object(p.a)({},r,{setup:Object(p.a)({},r.setup,{baseMonth:Object(p.a)({},r.setup.baseMonth,c.payload.metadata,{isFetched:!0,collection:c.payload.collection})})});case"budget/CHANGE_ITEM_SORT_ORDER":return Object(p.a)({},r,{menuOptions:Object(p.a)({},r.menuOptions,c.payload)});case"budget/NEW_MONTH_FETCHED":return Object(p.a)({},r,{setup:Object(p.a)({},r.setup,{newMonth:Object(p.a)({},r.setup.newMonth,c.payload.metadata,{isFetched:!0,collection:c.payload.collection})})});case"budget/ADD_CATEGORY":return Object(p.a)({},r,{categories:Object(p.a)({},r.categories,{collection:[].concat(Object(d.a)(r.categories.collection),[c.payload])})});case"budget/ADD_MONTHLY_ITEM":return function(e,t){var a=t.metadata,n=t.monthly,r=t.weekly,c=a.month,o=a.year;if(e.month!==c||e.year!==o)return t;var i=[].concat(Object(d.a)(n.collection),[T(e)]);return Object(p.a)({},t,{discretionary:j(a,[].concat(Object(d.a)(i),Object(d.a)(r.collection))),monthly:Object(p.a)({},n,{collection:i})})}(c.payload,r);case"budget/ADD_WEEKLY_ITEM":return function(e,t){var a=t.metadata,n=t.monthly,r=t.weekly,c=a.month,o=a.year;if(e.month!==c||e.year!==o)return t;var i=[].concat(Object(d.a)(r.collection),[I(e)]);return Object(p.a)({},t,{discretionary:j(a,[].concat(Object(d.a)(i),Object(d.a)(n.collection))),weekly:Object(p.a)({},r,{collection:i})})}(c.payload,r);case"budget/EDIT_NEW_MONTHLY_ITEM":return Object(p.a)({},r,{monthly:Object(p.a)({},r.monthly,{newItem:Object(p.a)({},r.monthly.newItem,c.payload)})});case"budget/EDIT_NEW_WEEKLY_ITEM":return Object(p.a)({},r,{weekly:Object(p.a)({},r.weekly,{newItem:Object(p.a)({},r.weekly.newItem,c.payload)})});case"budget/EDIT_MONTHLY_ITEM":return Object(p.a)({},r,{monthly:Object(p.a)({},r.monthly,{collection:f({updatedItem:c.payload,collection:r.monthly.collection,save:!1})})});case"budget/EDIT_WEEKLY_ITEM":return Object(p.a)({},r,{weekly:Object(p.a)({},r.weekly,{collection:f({updatedItem:c.payload,collection:r.weekly.collection,save:!1})})});case"budget/FETCHED_DISCRETIONARY_TRANSACTIONS":return Object(p.a)({},r,{discretionary:Object(p.a)({},r.discretionary,{fetchedTransactions:!0,collection:c.payload})});case"budget/FETCHED_WEEKLY_BUDGET_ITEM_EVENTS":return Object(p.a)({},r,{weekly:Object(p.a)({},r.weekly,{collection:f({updatedItem:{id:c.payload.id,events:c.payload.events},collection:r.weekly.collection,save:!1})})});case"budget/FETCHED_WEEKLY_TRANSACTIONS":return Object(p.a)({},r,{weekly:Object(p.a)({},r.weekly,{collection:f({updatedItem:{id:c.payload.id,collection:c.payload.collection},collection:r.weekly.collection,save:!1})})});case"budget/ITEMS_FETCHED":return D(c.payload,r);case"budget/REMOVE_WEEKLY_ITEM":return function(e,t){var a=t.metadata,n=t.monthly,r=t.setup,c=t.weekly,o=c.collection.filter(function(t){return t.id!==e});return Object(p.a)({},t,{discretionary:j(a,[].concat(Object(d.a)(n.collection),Object(d.a)(o))),weekly:Object(p.a)({},c,{collection:o}),setup:Object(p.a)({},r,{baseMonth:Object(p.a)({},t.setup.baseMonth,{isFetched:!1})})})}(c.payload,r);case"budget/REMOVE_MONTHLY_ITEM":return function(e,t){var a=t.metadata,n=t.monthly,r=t.setup,c=t.weekly,o=t.monthly.collection.filter(function(t){return t.id!==e});return Object(p.a)({},t,{discretionary:j(a,[].concat(Object(d.a)(c.collection),Object(d.a)(o))),monthly:Object(p.a)({},n,{collection:o}),setup:Object(p.a)({},r,{baseMonth:Object(p.a)({},r.baseMonth,{isFetched:!1})})})}(c.payload,r);case"budget/TOGGLE_ACCRUAL_ITEMS":case"budget/TOGGLE_CLEARED_ITEMS":return Object(p.a)({},r,{menuOptions:Object(p.a)({},r.menuOptions,c.payload)});case"budget/TOGGLE_DISCRETIONARY_DETAIL":return Object(p.a)({},r,{discretionary:Object(p.a)({},r.discretionary,c.payload)});case"budget/TOGGLE_MENU":return Object(p.a)({},r,{menuOptions:Object(p.a)({},r.menuOptions,c.payload)});case"budget/TOGGLE_MONTHLY_ITEM_FORM":return Object(p.a)({},r,{monthly:Object(p.a)({},r.monthly,c.payload)});case"budget/TOGGLE_WEEKLY_ITEM_FORM":return Object(p.a)({},r,{weekly:Object(p.a)({},r.weekly,c.payload)});case"budget/UPDATE_MONTHLY_ITEM":return x(c.payload,r);case"budget/UPDATE_WEEKLY_ITEM":return C(c.payload,r);case"budget/setup/ADD_ITEM":return function(e,t){var a=t.metadata,n=t.monthly,r=t.setup,c=t.weekly,o=a.month,i=a.year,l=e.monthly?T(e):I(e),u=o===e.month&&i===e.year,s=u&&e.monthly?Object(p.a)({},n,{collection:[].concat(Object(d.a)(n.collection),[l])}):n,m=u&&e.weekly?Object(p.a)({},c,{collection:[].concat(Object(d.a)(c.collection),[l])}):c,f=j(a,[].concat(Object(d.a)(m.collection),Object(d.a)(s.collection)));return Object(p.a)({},t,{discretionary:f,monthly:s,weekly:m,setup:Object(p.a)({},r,{newMonth:Object(p.a)({},r.newMonth,{newItem:{amount:"",budget_category_id:null,selectedOption:""},collection:[].concat(Object(d.a)(r.newMonth.collection),[e])})})})}(c.payload,r);case"budget/setup/EDIT_NEW":return Object(p.a)({},r,{setup:Object(p.a)({},r.setup,{newMonth:Object(p.a)({},r.setup.newMonth,{reviewed:!1,newItem:Object(p.a)({},r.setup.newMonth.newItem,c.payload)})})});case"budget/setup/EDIT_ACCRUAL_AMOUNT":return Object(p.a)({},r,{setup:Object(p.a)({},r.setup,{baseMonth:Object(p.a)({},r.setup.baseMonth,{collection:E(c.payload,r.setup.baseMonth.collection)})})});case"budget/setup/EDIT_REVIEW_ITEM":return Object(p.a)({},r,{setup:Object(p.a)({},r.setup,{newMonth:Object(p.a)({},r.setup.newMonth,{reviewed:!1,collection:(e=c.payload,t=r.setup.newMonth.collection,t.map(function(t){return t.id!==e.id?t:Object(p.a)({},t,e)}))})})});case"budget/setup/FINISH_REVIEW":return Object(p.a)({},r,{setup:Object(p.a)({},r.setup,{newMonth:Object(p.a)({},r.setup.newMonth,{reviewed:!0})})});case"budget/setup/NEXT_STEP":return Object(p.a)({},r,{setup:Object(p.a)({},r.setup,{newMonth:Object(p.a)({},r.setup.newMonth,{isReady:!0})})});case"budget/setup/MARK_FOR_INCLUSION":return Object(p.a)({},r,{setup:Object(p.a)({},r.setup,{baseMonth:Object(p.a)({},r.setup.baseMonth,{collection:r.setup.baseMonth.collection.map(function(e){return e.id===c.payload.id?Object(p.a)({},e,{markedForExclusion:c.payload.exclude}):e})})})});case"budget/setup/MARK_REVIEWED":return Object(p.a)({},r,{setup:Object(p.a)({},r.setup,{baseMonth:Object(p.a)({},r.setup.baseMonth,{collection:r.setup.baseMonth.collection.map(function(e){return e.id===c.payload.id?Object(p.a)({},e,{reviewed:!0}):e})}),newMonth:Object(p.a)({},r.setup.newMonth,{newItem:{amount:"",budget_category_id:null,selectedOption:""}})})});case"budget/setup/MARK_SUBMITTED":return Object(p.a)({},r,{setup:Object(p.a)({},r.setup,{baseMonth:Object(p.a)({},r.setup.baseMonth,{collection:r.setup.baseMonth.collection.map(function(e){return e.id===c.payload.id?Object(p.a)({},e,{submitted:!0}):e})})})});case"budget/setup/REQUEUE":return Object(p.a)({},r,{setup:Object(p.a)({},r.setup,{baseMonth:Object(p.a)({},r.setup.baseMonth,{collection:r.setup.baseMonth.collection.map(function(e){return e.id===c.payload.id?Object(p.a)({},e,c.payload):e})}),newMonth:Object(p.a)({},r.setup.newMonth,{newItem:{amount:"",budget_category_id:null,selectedOption:""}})})});case"budget/setup/UPDATE_EXISTING":return Object(p.a)({},r,{setup:Object(p.a)({},r.setup,{newMonth:Object(p.a)({},r.setup.newMonth,{newItem:{amount:"",budget_category_id:null,selectedOption:""},collection:r.setup.newMonth.collection.map(function(e){return e.id===c.payload.id?c.payload:e})})})});case"budget/setup/UPDATE_METADATA":return Object(p.a)({},r,{itemsFetched:!1,metadata:Object(p.a)({},r.metadata,c.payload),setup:Object(p.a)({},r.setup,{newMonth:Object(p.a)({},r.setup.newMonth,c.payload)})});case"transactions/CREATED":case"transactions/DELETED":case"transactions/UPDATED":return Object(p.a)({},r,{itemsFetched:!1});default:return r}},icons:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"icons/CREATED":return Object(p.a)({},e,{collection:[].concat(Object(d.a)(e.collection),[t.payload]),newIcon:R.newIcon});case"icons/DELETED":return Object(p.a)({},e,{collection:e.collection.filter(function(e){return e.id!==t.payload})});case"icons/UPDATE_NEW":return Object(p.a)({},e,{newIcon:Object(p.a)({},e.newIcon,t.payload)});case"icons/UPDATE_PROPS":return Object(p.a)({},e,{collection:E(t.payload,e.collection)});case"icons/FETCHED":return Object(p.a)({},e,{collection:t.payload,fetched:!0});case"icons/RESET":return Object(p.a)({},e,{collection:g(t.payload,e.collection)});case"icons/RESET_NEW":return Object(p.a)({},e,{newIcon:R.newIcon});case"icons/UPDATE":return Object(p.a)({},e,{collection:b(t.payload,e.collection)});case"icons/UPDATED":return Object(p.a)({},e,{collection:g(t.payload,e.collection)});default:return e}},messages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"messages/ADD_ERROR_MESSAGES":return Object(p.a)({},e,{errors:Y(e,t.payload)});case"messages/ADD_EVENT":return Object(p.a)({},e,{events:[t.payload].concat(Object(d.a)(e.events))});case"messages/REMOVE_ERROR_MESSAGE":return Object(p.a)({},e,{errors:B(e,t.payload)});case"messages/TOGGLE_EVENTS":return Object(p.a)({},e,{showEvents:!e.showEvents});default:return e}},transactions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"budget/ADD_MONTHLY_ITEM":return parseInt(e.metadata.query_options.month)===t.payload.month&&parseInt(e.metadata.query_options.year)===t.payload.year?Object(p.a)({},e,{budgetItems:Object(p.a)({},e.budgetItems,{collection:[].concat(Object(d.a)(e.budgetItems.collection),[T(t.payload)])})}):e;case"budget/ADD_WEEKLY_ITEM":return parseInt(e.metadata.query_options.month)===t.payload.month&&parseInt(e.metadata.query_options.year)===t.payload.year?Object(p.a)({},e,{budgetItems:Object(p.a)({},e.budgetItems,{collection:[].concat(Object(d.a)(e.budgetItems.collection),[I(t.payload)])})}):e;case"budget/UPDATE_MONTHLY_ITEM":case"budget/UPDATE_WEEKLY_ITEM":return Object(p.a)({},e,{budgetItems:Object(p.a)({},e.budgetItems,{fetched:!1})});case"transactions/ADD_DETAIL_TO_ENTRY":return Object(p.a)({},e,{collection:e.collection.map(function(e){return e.id!==t.payload.id?e:Object(p.a)({},e,{details:[].concat(Object(d.a)(e.details),[Object(p.a)({},ie,{_id:t.payload.detailId})])})})});case"transactions/ADD_DETAIL_TO_NEW":return Object(p.a)({},e,{new:Object(p.a)({},e.new,{details:[].concat(Object(d.a)(e.new.details),[ie])})});case"budget/categories/MATURITY_INTERVAL_CREATED":return Object(p.a)({},e,{budgetItems:Object(p.a)({},e.budgetItems,{fetched:!1})});case"transactions/CREATED":return te(t.payload,e);case"transactions/DELETED":return Object(p.a)({},e,{collection:e.collection.filter(function(e){return e.id!==t.payload.id})});case"transactions/EDIT":return Object(p.a)({},e,{collection:e.collection.map(function(e){return e.id!==t.payload.id?e:Object(p.a)({},e,t.payload)})});case"transactions/EDIT_FORM_OPTIONS":return Object(p.a)({},e,{collection:e.collection.map(function(e){return e.id!==t.payload.id?e:Object(p.a)({},e,{formOptions:Object(p.a)({},e.formOptions,t.payload)})})});case"transactions/EDIT_NEW_FORM_OPTIONS":return Object(p.a)({},e,{new:Object(p.a)({},e.new,{formOptions:Object(p.a)({},e.new.formOptions,t.payload)})});case"transactions/EDIT_PROPS":return Object(p.a)({},e,{collection:e.collection.map(function(e){return t.payload.id===e.id?(a=e,(n=t.payload).budget_exclusion?Object(p.a)({},a,{updatedProps:Object(p.a)({},a.updatedProps,n),details:a.details.map(function(e){return Object(p.a)({},e,{budget_item_id:null})})}):Object(p.a)({},a,{updatedProps:Object(p.a)({},a.updatedProps,n)})):e;var a,n})});case"transactions/EDIT_DETAIL_PROPS":return Object(p.a)({},e,{collection:e.collection.map(function(e){return e.id===t.payload.txnId?ae(e,t.payload):e})});case"transactions/FETCHED":return Object(p.a)({},e,{new:Object(p.a)({},e.new,{budget_exclusion:!1}),metadata:t.payload.metadata,collection:t.payload.transactions.map(function(e){return h(e)}),slug:t.payload.slug});case"transactions/FETCHED_BUDGET_ITEMS":return Object(p.a)({},e,{budgetItems:{collection:t.payload.collection.map(function(e){return e.monthly?T(e):I(e)}),fetched:!0,month:t.payload.metadata.month,year:t.payload.metadata.year}});case"transactions/REMOVE_DETAIL":return re(Object(p.a)({},t.payload,{state:e}));case"transactions/REMOVE_NEW_DETAIL":return Object(p.a)({},e,{new:Object(p.a)({},e.new,{details:e.new.details.filter(function(e,a){return a!==t.payload.index})})});case"transactions/RESET_NEW":return Object(p.a)({},e,{new:Object(p.a)({},le.new,t.payload)});case"transactions/TOGGLE_EDIT_FORM":return function(e,t){var a=!L(t.collection,function(t){return t.id===e},{showForm:!0}).showForm,n=function(t){return t.id===e?a:!a&&t.showForm};return Object(p.a)({},t,{new:Object(p.a)({},t.new,{showForm:!a&&t.new.showForm}),collection:t.collection.map(function(e){return Object(p.a)({},e,{showForm:n(e)})})})}(t.payload,e);case"transactions/TOGGLE_NEW_FORM":return Object(p.a)({},e,{new:Object(p.a)({},e.new,{showForm:!e.new.showForm}),collection:e.collection.map(function(t){return Object(p.a)({},t,{showForm:!!e.new.showForm&&t.showForm})})});case"transactions/UPDATE_NEW":return Object(p.a)({},e,{new:ne(e.new,t.payload)});case"transactions/UPDATE_NEW_DETAIL":return function(e,t){var a=t.new,n=a.budget_exclusion,r=a.details,c=e.index,o=e.attributes,i=function(e){return n?null:e.budget_item_id},l=r.map(function(e,t){return t===c?Object(p.a)({},e,o,{budget_item_id:i(Object(p.a)({},e,o))}):Object(p.a)({},e,{budget_item_id:i(e)})});return Object(p.a)({},t,{new:Object(p.a)({},t.new,{details:l})})}(t.payload,e);case"transactions/UPDATED":return ce(t.payload,e);case"transfers/CREATED":return function(e,t){var a=t.metadata.query_options.account_id,n=e.to_transaction,r=e.from_transaction,c=n.account_id,o=r.account_id;return void 0===a||null===a?t:c===parseInt(a)?te(n,t):o===parseInt(a)?te(r,t):t}(t.payload,e);case"transfers/DELETED":return function(e,t){var a=e.id;return Object(p.a)({},t,{collection:t.collection.filter(function(e){return e.transfer_id!==a})})}(t.payload,e);default:return e}},transfers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"transfers/CREATED":return Object(p.a)({},e,{collection:[].concat(Object(d.a)(e.collection),[me(t.payload)]),metadata:Object(p.a)({},e.metadata,{total:e.metadata.total+1,viewing:[e.metadata.viewing[0],e.metadata.viewing[1]+1]}),newTransfer:ue});case"transfers/DELETED":return Object(p.a)({},e,{collection:e.collection.filter(function(e){return e.id!==t.payload.id}),metadata:Object(p.a)({},e.metadata,{total:e.metadata.total-1,viewing:[e.metadata.viewing[0],e.metadata.viewing[1]-1]})});case"transfers/FETCHED":return Object(p.a)({},e,{collection:t.payload.transfers.map(function(e){return me(e)}),fetchedTransfers:!0,metadata:Object(p.a)({},e.metadata,t.payload.metadata)});case"transfers/UPDATE_NEW":return Object(p.a)({},e,{newTransfer:Object(p.a)({},e.newTransfer,t.payload)});case"transfers/UPDATE_PAGE":return Object(p.a)({},e,{fetchedTransfers:!1,metadata:Object(p.a)({},e.metadata,{currentPage:t.payload.currentPage})});default:return e}}}),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),pe=de.dispatch,fe=de.getState,be=de,ge=function(e){return{type:"accounts/FETCHED",payload:e}},Ee=function(e){return{type:"accounts/RESET",payload:e}},he=function(e){return{type:"accounts/TOGGLE_SHOW_NEW_FORM",payload:e.showForm}},ve=function(e){return{type:"accounts/UPDATE",payload:e}},ye=function(e){return{type:"accounts/UPDATE_NEW",payload:e}},Oe=function(e){return{type:"accounts/UPDATE_PROPS",payload:e}},_e="".concat("http://localhost",":").concat("8128"),Ne=_e,we=function(e,t){switch(e){case"accounts-index":return"/accounts";case"account-show":return"/accounts/".concat(t.id);case"budget-categories-index":return"/budget/categories";case"budget-category-show":return"/budget/categories/".concat(t.id);case"budget-category-items-index":return"/budget/categories/".concat(t.id,"/items");case"budget-category-maturity-intervals-index":return"/budget/categories/".concat(t.budgetCategoryId,"/maturity_intervals");case"budget-category-maturity-interval-show":return"/budget/categories/".concat(t.budgetCategoryId,"/maturity_intervals/").concat(t.id);case"budget-items-index":return"/budget/items";case"budget-items-events-index":return"/budget/items/events";case"budget-item-show":return"/budget/categories/".concat(t.budgetCategoryId,"/items/").concat(t.id);case"budget-item-events-index":return"/budget/categories/".concat(t.budgetCategoryId,"/items/").concat(t.id,"/events");case"budget-item-transactions-index":return"/budget/categories/".concat(t.budgetCategoryId,"/items/").concat(t.id,"/transactions");case"discretionary-transactions-index":return"/budget/discretionary/transactions";case"icons-index":return"/icons";case"icon-show":return"/icons/".concat(t.id);case"interval-show":return"/intervals/".concat(t.month,"/").concat(t.year);case"transactions-index":return"/accounts/".concat(t.accountId,"/transactions");case"transaction-show":return"/accounts/".concat(t.accountId,"/transactions/").concat(t.id);case"transfers-index":return"/transfers";case"transfer-show":return"/transfers/".concat(t.id);default:return""}},je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.route,a=fe(),n=Object(p.a)({},e.query,{key:a.api.key}),r=we(t,e),c=Object.entries(n).map(function(e){return e.join("=")}).join("&"),o=""===c?"":"?".concat(c);return Ne+"/api"+r+o},Te=function(e){return{type:"messages/ADD_EVENT",payload:e}},Ie=function(e){return{type:"messages/REMOVE_ERROR_MESSAGE",payload:e}},De=function(e){return{type:"api/STATUS_UPDATED",payload:{status:e.status}}},xe=function(e,t){var a=t.body,n=t.status,r=t.url,c={type:"messages/ADD_ERROR_MESSAGES",payload:{requestBody:a,errors:e.errors,status:n,url:r}};pe(c)},Ce=function(e,t,a){var n={verb:"GET",url:e,onSuccess:t,onFailure:a,body:{}};fetch(e).then(function(e){return Se(e,n)})},Ae=function(e,t,a){var n={verb:"DELETE",url:e,onSuccess:a,onFailure:xe,body:{}};fetch(e,{method:"delete"}).then(function(e){return Se(e,n,t)})},Me=function(e,t,a){Fe(e,"POST",t,Object(p.a)({event:function(){return""}},a))},ke=function(e,t,a){Fe(e,"PUT",t,a)},Fe=function(e,t,a,n){var r=n.onSuccess,c=n.onFailure,o=n.event,i={body:a,onSuccess:r,onFailure:c||xe,url:e,verb:t};fetch(e,{method:t,body:a,headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(e){return Se(e,i,o)})},Se=function(e,t,a){var n=t.body,r=t.onSuccess,c=t.onFailure,o=t.url;401===e.status||404===e.status?e.json().then(function(t){pe(De({status:e.status})),xe(t,{body:n,status:e.status,url:o})}):e.ok?204===e.status?e.text().then(function(){r(),pe(Te(a()))}):e.json().then(function(n){r(n),"GET"!==t.verb&&pe(Te(a(n))),pe(De({status:e.status}))}):e.json().then(function(t){pe(De({status:e.status})),c(t,{body:n,status:e.status,url:o})})},Re={},Pe=Object(p.a)({},{accounts:"Accounts",apiKey:"api key",appName:"Checkbook & Budget",budget:"Budget"},{}),Le=Object(p.a)({},{account:"account",balance:"Balance",cancelButtonText:"cancel",cashFlow:"cash flow",createButtonText:"create account",deleteButtonText:"delete",deleteConfirmationMessage:function(e){return"Do you really want to delete ".concat(e," account?")},manageLinkText:"manage accounts",name:"Name",nonCashFlow:"non cash flow",priority:"Priority",resetButtonText:"reset",slugLabel:"short name (slug)",transferLinkText:"inter-account transfers",updateButtonText:"update account"},Re.account),ze={category:Object(p.a)({},{accrual:"accrual",accruals:"accruals",accruing:"accruing",addNew:"add new",all:"all",cancelButtonText:"Cancel",categories:"categories",closeButtonText:"Close",createButtonText:"create",defaultAmount:"default amount",deleteConfirmMessage:function(e){return"Are you sure you want to delete ".concat(e,"?")},details:"details",editSlashDelete:"edit/delete",expense:"expense",expenses:"expenses",filters:"filters",frequency:"frequency",icon:"icon",monthly:"monthly",name:"name",resetButtonText:"reset",revenue:"revenue",revenues:"revenues",searchLabelText:"category name",searchPlaceholder:"search",title:"budget categories",type:"type",updateButtonText:"update",weekly:"day-to-day"},Re.budgetCategory),discretionary:Object(p.a)({},{aheadOfBudget:"Ahead of Budget",overBudget:"Over Budget",title:"discretionary"},Re.discretionary),eventLabels:Object(p.a)({},{item_create:"Item Create",item_adjust:"Item Adjust",item_delete:"Item Delete",legacy_item_create:"Legacy Item Create",pre_setup_item_create:"Pre-setup Item Create",rollover_item_adjust:"Rollover Item Adjust",rollover_item_create:"Rollover Item Create",setup_item_adjust:"Setup Item Adjust",setup_item_create:"Setup Item Create"},Re.eventLabels),finalize:Object(p.a)({},{appliedToExtra:"To Be Applied to Extra",applyToExtra:"Apply All to Extra",budgetedFor:function(e){return"Budgeted for ".concat(e)},carryOver:"carry over",carryOverFrom:function(e){return"Amount to carry over from ".concat(e)},createItem:"create item",depositExtra:"deposit extra",depositMessage:function(e){return"Extra from ".concat(e)},disregard:"disregard",exceedsOriginalAmount:"Cannot be greater than original amount",extra:"extra",negativeRevenueErrorMessage:"Cannot be less than zero for an expense",positiveExpenseErrorMessage:"Cannot be greater than zero for an expense",remainingIn:function(e){return"Remaining in ".concat(e)},revealNextItems:function(e){return"Apply to item".concat(1===e?"":"s")},rollOver:"roll over",selectFromAccount:"Select Account to Withdraw From",selectToAccount:"Select Account to Receive Payment",submitAccrualButtonText:"update accruals",summary:"summary",title:"finalize",updatedAmountFor:function(e){return"Updated Amount For ".concat(e)}},Re.finalize),icon:Object(p.a)({},{cancelButtonText:"cancel",className:"class name",createButtonText:"create",deleteConfirmationMessage:function(e){return"Are you sure you want to delete ".concat(e,"?")},name:"name",preview:"preview",resetButtonText:"reset",updateButtonText:"update"},Re.icon),item:Object(p.a)({},{account:"account",amount:"amount",budgeted:"budgeted",cleared:"cleared",createButtonText:"create",date:"date",deleteConfirmationMessage:function(e,t){return"Are you sure you want to delete ".concat(e," for ").concat(t,"?")},description:"description",items:"items",perDay:"per day",perWeek:"per week",spent:"spent"},Re.item),maturityInterval:Object(p.a)({},{deleteConfirmMessage:"Are you sure you want to delete this maturity interval?",options:[{label:"January",value:1},{label:"February",value:2},{label:"March",value:3},{label:"April",value:4},{label:"May",value:5},{label:"June",value:6},{label:"July",value:7},{label:"August",value:8},{label:"September",value:9},{label:"October",value:10},{label:"November",value:11},{label:"December",value:12}],title:"maturity intervals",year:"year"},Re.maturityInterval),menu:Object(p.a)({},{hide:"hide",finalizeLinkText:function(e){return"Finalize ".concat(e)},order:"order",setUpLinkText:function(e){return"Set up ".concat(e)},show:"show",title:"budget admin"},Re.menu),setup:Object(p.a)({},{additional:"additional",accrualButtonText:"include selected",accruingExpenses:"accruing expenses",alreadyIncluded:function(e,t,a){return"You already included ".concat(e," for ").concat(t," in ").concat(a,"'s budget.")},amountToInclude:"Amount to include",howMuchToInclude:function(e){return"How much to include in ".concat(e,"?")},howMuchAdditional:"How much additional to include?",ignore:"don't include",include:"include",nOfTotal:function(e,t){return"".concat(e," of ").concat(t)},markCompleteText:"mark setup complete",requeue:"requeue"},Re.setup),shared:Object(p.a)({},{deposited:"deposited",difference:"difference",in:"in",minus:"-",plus:"+",remaining:"remaining",spent:"spent",total:"total"},Re.shared)},Ue=Object(p.a)({},{error:"error",errors:"errors"},Re.errors),Ye="icons",Be=Object(p.a)({},{deleteConfirmationMessage:"Are you sure you want to delete this transfer?",ellipsis:" ... ",first:"first",from:"from",last:"last",next:"next",previous:"previous",iOfN:function(e,t){return"Viewing ".concat(e[0]," - ").concat(e[1]," of ").concat(t)},title:"recent transfers",to:"to"},Re.transfer),We=Object(p.a)({},{account:"account",addDetail:"add detail",addNewButtonText:"Add New Transaction",amount:"amount",budgetExclusion:"budget exclusion",check:"check",checkNumberPlaceholder:"check #",clearanceDate:"clearance date",dateRange:function(e,t){return"".concat(e," to ").concat(t)},date:"date",deleteConfirmationMessage:"Are you sure you want to delete this transaction?",deleteDetailConfirmationMessage:"Are you sure you want to delete this transaction detail?",description:"description",notes:"notes",pending:"pending",title:"transactions",todayButtonText:"today",updateButtonText:"update transaction"},Re.transaction),Ge=Pe,He=["api"],Ke=function(e){return He.includes(e)?qe(e):e.split(/(\s|-|\/)/).map(function(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}).join("")},qe=function(e){return e.toUpperCase()},Ve=a(89),Je=function(){return r.a.createElement("div",{className:"transfers-link"},r.a.createElement("h3",null,r.a.createElement(Ve.a,{to:"/accounts/transfers"},Ke(Le.transferLinkText)," ",r.a.createElement("i",{className:"fas fa-exchange-alt"}))))},Xe=function(){return r.a.createElement("div",{className:"transactions"},r.a.createElement("h3",null,r.a.createElement(Ve.a,{to:"/accounts/index"},Ke(Le.manageLinkText))))},$e=function(e){return{type:"transactions/CREATED",payload:e}},Ze=function(e){return{type:"transactions/EDIT",payload:e}},Qe=function(e){return{type:"transactions/RESET_NEW",payload:e}},et=function(e){return{type:"transactions/TOGGLE_EDIT_FORM",payload:e.id}},tt=function(e){return null===e.icon_class_name?r.a.createElement("span",null):r.a.createElement("span",null,r.a.createElement("i",{className:e.className}))},at=function(e){return Math.round(100*parseFloat(e))},nt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{absolute:!1,toFloat:!1};if(null===e)return"";if(t.toFloat){var a=t.absolute?Math.abs(e):e;return parseFloat(a/100).toFixed(2)}return"$"+((t.absolute?Math.abs(e):e)/100).toFixed(2).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")},rt=function(e,t){switch(e){case"account-create":return ct;case"account-delete":return ot(t);case"account-update":return it(t);case"budget-category-create":return lt;case"budget-category-delete":return ut(t);case"budget-category-maturity-interval-create":return mt;case"budget-category-maturity-interval-delete":return dt(t);case"budget-category-update":return st(t);case"budget-item-create":return pt;case"budget-item-delete":return ft(t);case"budget-item-update":return bt(t);case"icon-create":return gt;case"icon-delete":return Et(t);case"icon-update":return ht(t);case"interval-closed":return vt(t);case"interval-mark-complete":return yt(t);case"maturity-interval-update":return Ot(t);case"transaction-detail-delete":return _t(t);case"transaction-entry-create":return jt(t);case"transaction-entry-delete":return wt(t);case"transaction-entry-update":return Tt(t);case"transfer-create":return It(t);case"transfer-delete":return Dt(t);default:throw new Error("unknown/unmapped event type ".concat(e))}},ct=function(e){var t=e.id,a=e.name,n=e.cash_flow,r=e.priority;return"account created (id: ".concat(t,') "').concat(a,'" cash flow is ').concat(n,", priority: ").concat(r)},ot=function(e){var t=e.id,a=e.name;return function(){return"account (id: ".concat(t,') "').concat(a,'" deleted')}},it=function(e){var t=e.id,a=e.name,n=e.changedProps;return function(){return"account (id: ".concat(t,', name: "').concat(a,'") updated: ').concat(xt(n).join(", and "))}},lt=function(e){var t=e.id,a=e.accrual,n=e.default_amount,r=e.expense,c=e.name,o="budget category (id: ".concat(t,') "').concat(c," created ");return o+="with default amount ".concat(n," ").concat(r?"expense":"revenue"," ").concat(a?"and is an accural":"")},ut=function(e){var t=e.id,a=e.name;return function(){return"budget category (id: ".concat(t,', name: "').concat(a,'") deleted')}},st=function(e){var t=e.id,a=e.name,n=e.changedProps;return function(){return"budget category (id: ".concat(t,', name: "').concat(a,'") updated: ').concat(xt(n).join(", and "))}},mt=function(e){var t=e.id,a=e.budget_category_id,n=e.month,r=e.year;return"maturity interval (id: ".concat(t,") for budget category id: ").concat(a," ").concat(n,"/").concat(r," created")},dt=function(e){var t=e.categoryId,a=e.month,n=e.year;return function(){return"maturity interval for budget category id: ".concat(t," ").concat(a,"/").concat(n," deleted")}},pt=function(e){var t=e.item,a=t.id,n=t.amount,r=t.name,c=t.month,o=t.year;return"budget item (id: ".concat(a,")  created for ").concat(r," (").concat(c,"/").concat(o,"), amount: ").concat(nt(n))},ft=function(e){var t=e.id,a=e.category,n=e.month,r=e.year;return function(){return"budget item (id: ".concat(t,") for ").concat(a," (").concat(n,"/").concat(r,") was deleted")}},bt=function(e){var t=e.id,a=e.category,n=e.month,r=e.year,c=e.originalAmount,o=e.newAmount;return function(){return"budget item (id: ".concat(t,") for ").concat(a," (").concat(n,"/").concat(r,") was adjusted from ").concat(nt(100*c)," to ").concat(nt(100*o))}},gt=function(e){var t=e.id,a=e.name,n=e.class_name;return"icon created (id: ".concat(t,") name: ").concat(a,", class-name: ").concat(n," created")},Et=function(){return function(e){var t=e.id,a=e.name;return"icon (id: ".concat(t,', name: "').concat(a,'") deleted')}},ht=function(e){var t=e.id,a=e.changedProps;return function(){return"icon (id: ".concat(t,") updated: ").concat(xt(a).join(", and "))}},vt=function(e){var t=e.closeOutCompletedAt,a=e.month,n=e.year;return function(){return"interval: ".concat(a,"/").concat(n," marked closed at ").concat(t)}},yt=function(e){var t=e.month,a=e.set_up_completed_at,n=e.year;return function(){return"interval: ".concat(t,"/").concat(n," set up marked complete at ").concat(a)}},Ot=function(e){var t=e.id,a=e.changedProps,n=e.name;return function(){return"maturity interval (id: ".concat(t,', category: "').concat(n,'") updated: ').concat(xt(a).join(", and "))}},_t=function(e){var t=e.id,a=e.amount,n=e.budgetCategory,r=e.budgetItemId,c=e.entryId;return function(){return"transaction detail (id: ".concat(t,") for entry (id: ").concat(c,") removed. Amount was: ").concat(a,", belonging to budget item ").concat(r," (").concat(n,")")}},Nt=function(e){var t=e.id,a=e.amount,n=e.budget_category;return"(".concat(t,"): budget category: ").concat(n,", amount: ").concat(nt(a))},wt=function(e){var t=e.id,a=e.details;return function(){return"transaction entry (id: ".concat(t,") deleted. Details: ").concat(a.map(Nt).join("; "))}},jt=function(e){var t=e.accountName;return function(e){var a=e.id,n=e.description,r=e.details;return"transaction entry (id: ".concat(a,") created for ").concat(t," ").concat(n||"",". Details: ").concat(r.map(Nt).join("; "))}},Tt=function(e){var t=e.id,a=e.changedProps,n=e.details;return function(){var e="transaction entry (id: ".concat(t,") was updated: ").concat(xt(a).join(", and "));return e+=n.reduce(function(e,t){return 0===Object.keys(t.changedProps).length?e:[].concat(Object(d.a)(e),[" detail (id: ".concat(t.id,") updated: ").concat(xt(t.changedProps),".")])},[]).join(" And")}},It=function(e){var t=e.fromAccount,a=e.toAccount,n=e.amount;return function(e){var r=e.id;return"transfer (id: ".concat(r,") created from: ").concat(t," to: ").concat(a," amount: ").concat(nt(n))}},Dt=function(e){var t=e.id,a=e.amount,n=e.fromAccountId,r=e.toAccountId;return function(){return"transfer (id: ".concat(t,") deleted. From account: ").concat(n,", to account: ").concat(r,", amount: ").concat(a)}},xt=function(e){return Object.keys(e).map(function(t){return"".concat(t.toUpperCase()," was changed from ").concat(e[t].originalValue," to ").concat(e[t].updatedValue)})},Ct=function(e,t){return Object.keys(t).reduce(function(a,n){if(e[n]===t[n])return a;if("amount"===n){var r={originalValue:nt(e[n]),updatedValue:nt(t[n])};return Object(p.a)({},a,Object(P.a)({},n,r))}var c={originalValue:e[n],updatedValue:t[n]};return Object(p.a)({},a,Object(P.a)({},n,c))},{})},At=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return rt(e.eventType,e)},Mt=function(e){var t=e.budget_exclusion,a=e.formOptions,n=e.onChange,c=e.selectedAccount,o=e.toggleFormOption;return!0!==c.cash_flow&&a.showBudgetExclusion?r.a.createElement("div",{className:"option-input"},r.a.createElement(Ve.a,{to:"#",onClick:o,name:"showBudgetExclusion",className:"fas fa-exclamation"}),r.a.createElement("div",{className:"form-budget-exclusion"},r.a.createElement("div",{className:"label"},Ke(We.budgetExclusion)),r.a.createElement("div",{className:"input"},r.a.createElement("input",{type:"checkbox",value:t||!1,onChange:function(){n({budget_exclusion:!t})},checked:t?"checked":""})))):null},kt=function(e){var t=e.formOptions,a=e.check_number,n=e.onChange,c=e.toggleFormOption;return t.showCheck?r.a.createElement("div",{className:"option-input check-number"},r.a.createElement(Ve.a,{to:"#",onClick:c,name:"showCheck",className:"fas fa-money-check"}),"\xa0",r.a.createElement("input",{type:"text",name:"check_number",value:a,onChange:function(e){n({check_number:e.target.value})},placeholder:We.checkNumberPlaceholder})):null},Ft=(a(131),a(108)),St=Object(s.b)(function(e,t){var a=e.transactions.metadata.query_options,n=a.month,r=a.year;return Object(p.a)({},t,{month:parseInt(n),year:parseInt(r)})})(function(e){var t=e.clearanceDate,a=e.month,n=e.onChange,c=e.year,o=function(){return t?G(t,{format:"dateObject"}):""},i={openToDate:function(){if(t)return o();var e=new Date;return e.getMonth()+1===a&&e.getFullYear()===c?W({month:a,day:e.getDate(),year:c,format:"dateObject"}):c>e.getFullYear()||c===e.getFullYear()&&a>e.getMonth()+1?W({month:a,day:1,year:c,format:"dateObject"}):W({month:a+1,day:0,year:c,format:"dateObject"})}(),selected:o()};return r.a.createElement("div",{className:"clearance-date"},r.a.createElement(Ft.a,Object.assign({onChange:function(e){var t=null===e?"":function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{format:"yyyy-mm-dd"},a=e.split(",")[0].split("/").map(function(e){return parseInt(e)}),n={year:a[2],month:a[0],day:a[1]};return W({month:n.month,year:n.year,day:n.day,format:t.format})}(e.toLocaleString());n({clearance_date:t})}},i,{placeholderText:We.clearanceDate,todayButton:Ke(We.todayButtonText)})))}),Rt=function(e){var t=e.description,a=e.handleKeyDown,n=e.onChange;return r.a.createElement("div",{className:"description"},r.a.createElement("input",{type:"text",name:"description",placeholder:We.description,onChange:function(e){n(Object(P.a)({},e.target.name,e.target.value))},onKeyDown:a,value:t||""}))},Pt=/\s*(-?\d*\.?\d?\d)\s*([-+\/*])\s*(\d*(\.\d+)?)\s*/,Lt=function(e,t,a){switch(e){case"+":return t+a;case"-":return t-a;case"*":return t*a;case"/":return t/a;default:throw new Error("unknown operator")}},zt=function(e){var t=e.match(Pt);if(null===t)return e;var a=t[2],n=parseFloat(t[1]),r=parseFloat(t[3]);return Lt(a,n,r).toFixed(2)},Ut=function(e){var t=e.index,a=e.detail,n=e.onDetailChange,c=e.onKeyDown,o=a.id,i=a.amount,l=a.disabled,u=o||t;return r.a.createElement("div",{className:"detail-amount"},r.a.createElement("input",{type:"text",name:"detail[".concat(u,"][amount]"),disabled:l,onChange:function(e){n(u,{amount:e.target.value})},onKeyDown:c,placeholder:We.amount,value:i}),r.a.createElement("div",{className:"calculator-button"},r.a.createElement(Ve.a,{to:"#",className:"fas fa-calculator",onClick:function(){n(u,{amount:zt(i)})}})))},Yt=a(16),Bt=function(e){var t=e.index,a=e.detail,n=e.budget_exclusion,c=e.onDetailChange,o=e.options,i=a.id,l=a.amount,u=a.budget_category,s=a.budget_item_id,m=a.disabled,d=i||t,p=o.find(function(e){return e.value===s}),f={label:u,value:s};return r.a.createElement("div",{className:"detail-budget-item-select ".concat(m?"disabled":"")},r.a.createElement(Yt.a,{isDisabled:m||n,options:o,value:n?{label:We.budgetExclusion,value:""}:p||f,onChange:function(e){""===l&&e.monthly?c(d,{amount:e.amount,budget_item_id:e.value}):c(d,{budget_item_id:e.value})},className:"budget-item-select-container",classNamePrefix:"budget-item-select"}))},Wt=function(e){var t=e.addDetail,a=e.budget_exclusion,n=e.details,c=e.detailCount,o=e.handleKeyDown,i=e.onDetailChange,l=e.options,u=e.removeDetail,s=n.reduce(function(e,t){return e+parseFloat(t.amount||0)},0),m=function(){return null},p={id:0,amount:nt(100*s),disabled:!0,handleKeyDown:m,onDetailChange:m,budgetItemId:null},f=1===c?n:[p].concat(Object(d.a)(n)),b=function(e){return 1===c?0:e-1},g=function(e){return 1===c||e===c};return f.map(function(e,n){return r.a.createElement("div",{className:"transaction-row",key:n},r.a.createElement(Ut,{index:b(n),detail:e,onDetailChange:i,onKeyDown:o}),r.a.createElement("div",{className:"budget-item-select"},r.a.createElement(Bt,{index:b(n),budget_exclusion:a,detail:e,onDetailChange:i,options:l})),r.a.createElement(Gt,Object.assign({},e,{addDetail:t,index:n,isLastDetail:g,removeDetail:u})))})},Gt=function(e){var t=e.id,a=e.addDetail,n=e.detail,c=e.index,o=e.removeDetail,i=t||c-1;return 0===c?r.a.createElement(Ve.a,{to:"#",onClick:a,tabIndex:"-1",className:"fas fa-plus-circle"}):r.a.createElement(Ve.a,{to:"#",onClick:function(){return o(i,n)},tabIndex:"-1",className:"fas fa-times-circle"})},Ht=function(e){var t=e.formOptions,a=e.notes,n=e.handleKeyDown,c=e.onChange,o=e.toggleFormOption;return t.showNotes?r.a.createElement("div",{className:"option-input"},r.a.createElement(Ve.a,{to:"#",onClick:o,name:"showNotes",className:"fas fa-sticky-note"}),r.a.createElement("textarea",{placeholder:We.notes,name:"notes",value:a||"",onChange:function(e){c({notes:e.target.value})},onKeyDown:n})):null},Kt=function(e){return r.a.createElement("div",{className:"option-icons"},r.a.createElement(Jt,e),r.a.createElement(Vt,e),r.a.createElement(qt,e),r.a.createElement(Xt,e))},qt=function(e){var t=e.budgetExclusion,a=e.formOptions,n=e.selectedAccount,c=e.toggleFormOption;return r.a.createElement($t,{highlighted:t,iconClassName:"fas fa-exclamation",name:"showBudgetExclusion",onClick:c,showOption:!(a.showBudgetExclusion||n.cash_flow),toggleFormOption:c})},Vt=function(e){var t=e.checkNumber,a=e.formOptions,n=e.toggleFormOption;return r.a.createElement($t,{highlighted:!(null===t||""===t),iconClassName:"fas fa-money-check",name:"showCheck",onClick:n,showOption:!a.showCheck,toggleFormOption:n})},Jt=function(e){var t=e.formOptions,a=e.notes,n=e.toggleFormOption;return r.a.createElement($t,{highlighted:!(null===a||""===a),iconClassName:"fas fa-sticky-note",name:"showNotes",onClick:n,showOption:!t.showNotes,toggleFormOption:n})},Xt=function(e){var t=e.formOptions,a=e.toggleFormOption;return t.showReceipt?null:r.a.createElement("div",{className:"option-icon"},r.a.createElement(Ve.a,{to:"#",onClick:a,name:"showReceipt",className:"fas fa-paperclip"}))},$t=function(e){var t=e.highlighted,a=e.iconClassName,n=e.name,c=e.showOption,o=e.toggleFormOption;return c?t?r.a.createElement("div",{className:"option-icon"},r.a.createElement("span",{className:"highlighted"},r.a.createElement(Ve.a,{to:"#",onClick:o,name:n,className:a}))):r.a.createElement("div",{className:"option-icon"},r.a.createElement(Ve.a,{to:"#",onClick:o,name:n,className:a})):null},Zt=function(e){var t=e.formOptions,a=e.onChange,n=e.toggleFormOption;return t.showReceipt?r.a.createElement("div",{className:"option-input receipt"},r.a.createElement(Ve.a,{to:"#",onClick:n,name:"showReceipt",className:"fas fa-paperclip"}),r.a.createElement("input",{type:"file",name:"receipt",onChange:function(e){var t=e.target.files[0];a({receipt:t})}})):null},Qt=function(e){var t=e.buttonText,a=e.onSubmit;return r.a.createElement("div",{className:"transaction-submit"},r.a.createElement("button",{type:"submit",onClick:a},t))},ea=function(e){var t=e.addDetail,a=e.budgetOptions,n=e.buttonText,c=e.handleKeyDown,o=e.onChange,i=e.onDetailChange,l=e.onSubmit,u=e.removeDetail,s=e.resetForm,m=e.selectedAccount,d=e.toggleFormOption,p=e.transaction,f=p.budget_exclusion,b=p.check_number,g=p.clearance_date,E=p.description,h=p.details,v=p.notes;return r.a.createElement("div",{className:"transaction-form transaction-wrapper"},r.a.createElement("div",{className:"transaction"},r.a.createElement("div",{className:"transaction-row left-content"},r.a.createElement("div",{className:"close-icon"},r.a.createElement(Ve.a,{to:"#",onClick:s,className:"fas fa-times"})),r.a.createElement(St,{clearanceDate:g,onChange:o,handleKeyDown:c})),r.a.createElement("div",{className:"transaction-row middle-content"},r.a.createElement(Rt,{description:E,handleKeyDown:c,onChange:o,details:h})),r.a.createElement("div",{className:"detail-wrapper"},r.a.createElement(Wt,{addDetail:t,budget_exclusion:f,details:h,detailCount:h.length,handleKeyDown:c,onDetailChange:i,options:a,removeDetail:u})),r.a.createElement("div",{className:"transaction-row options"},r.a.createElement(Kt,{budgetExclusion:f,checkNumber:b,formOptions:p.formOptions,notes:v,selectedAccount:m,toggleFormOption:d}),r.a.createElement("div",{className:"input-options"},r.a.createElement(Ht,{formOptions:p.formOptions,handleKeyDown:c,onChange:o,notes:v,toggleFormOption:d}),r.a.createElement(kt,{formOptions:p.formOptions,onChange:o,check_number:b||"",toggleFormOption:d}),r.a.createElement(Mt,{budget_exclusion:f,formOptions:p.formOptions,onChange:o,selectedAccount:m,toggleFormOption:d}),r.a.createElement(Zt,{formOptions:p.formOptions,onChange:o,toggleFormOption:d}))),r.a.createElement(Qt,{buttonText:n,onSubmit:l})))},ta=Object(s.b)(function(e){var t=e.transactions.new,a=parseInt(e.transactions.metadata.query_options.account_id),n=L(e.accounts.collection,function(e){return e.id===a},{cash_flow:!0}),r=e.transactions.budgetItems.collection.filter(function(e){return!e.monthly||e.deletable}),c=function(e){return"".concat(e.name," (").concat(nt(e.remaining,{absolute:!0}),")")},o=r.filter(function(e){return!e.accrual||e.matureAccrual}).map(function(e){return{value:e.id,label:c(e),monthly:e.monthly,amount:parseFloat(e.amount/100).toFixed(2)}}).sort(function(e,t){return e.label.toLowerCase()<t.label.toLowerCase()?-1:1}),i=[{label:Ke(ze.discretionary.title),value:null}].concat(Object(d.a)(o)),l=t.formOptions,u=l.showCheck,s=l.showNotes;return{buttonText:"Create Transaction",budgetOptions:i,selectedAccount:n,showCheck:u,showBudgetExclusion:!n.cashFlow,showNotes:s,transaction:t}})(function(e){var t=e.budgetOptions,a=e.dispatch,n=e.selectedAccount,c={showBudgetExclusion:e.showBudgetExclusion,showCheck:e.showCheck,showNotes:e.showNotes},o=h(e.transaction,c),i=o.details,l=function(){return a({type:"transactions/TOGGLE_NEW_FORM",payload:null})};return r.a.createElement(ea,{transaction:o,addDetail:function(e){e.preventDefault(),a({type:"transactions/ADD_DETAIL_TO_NEW",payload:null})},budgetOptions:t,buttonText:e.buttonText,handleKeyDown:function(){return null},onChange:function(e){var t=function(e){return{type:"transactions/UPDATE_NEW",payload:e}}(e);a(t)},onDetailChange:function(e,t){var n={type:"transactions/UPDATE_NEW_DETAIL",payload:{index:e,attributes:t}};a(n)},onSubmit:function(){var e=i.map(function(e){var t=Math.round(100*(parseFloat(e.amount)||0));return Object(p.a)({},e,{amount:t})}),t=""===o.description?null:o.description,r=je({route:"transactions-index",accountId:n.id}),c=JSON.stringify(Object(p.a)({},o,{description:t,details_attributes:e})),l=At({eventType:"transaction-entry-create",accountName:n.name});Me(r,c,{event:l,onSuccess:function(e){a($e(e)),a(Qe({showForm:!0}))}})},removeDetail:function(e){var t={type:"transactions/REMOVE_NEW_DETAIL",payload:{index:e}};a(t)},resetForm:function(){var e=Qe();a(e),l()},selectedAccount:n,toggleFormOption:function(e){var t=e.target.name,n={type:"transactions/EDIT_NEW_FORM_OPTIONS",payload:Object(P.a)({},t,!o.formOptions[t])};a(n)}})}),aa=Object(s.b)(function(e){return{showForm:e.transactions.new.showForm}})(function(e){var t=e.dispatch;return e.showForm?r.a.createElement(ta,null):r.a.createElement("div",{className:"transaction-wrapper"},r.a.createElement("div",{className:"transaction"},r.a.createElement("div",{className:"left-icon"}),r.a.createElement(Ve.a,{to:"#",onClick:function(e){e.preventDefault(),t({type:"transactions/TOGGLE_NEW_FORM",payload:null})}},r.a.createElement(tt,{className:"fas fa-plus"})," ",r.a.createElement("strong",null,We.addNewButtonText))))}),na=function(e){var t=e.amount,a=e.details;return e.showDetail&&a.length>1?r.a.createElement("div",{className:"amounts"},r.a.createElement("div",{className:"amount-detail"},nt(t)),a.map(function(e){return r.a.createElement(ra,{key:e.id,amount:e.amount})})):r.a.createElement("div",{className:"amounts"},r.a.createElement("div",{className:"amount-detail"},nt(t)))},ra=function(e){var t=e.amount;return r.a.createElement("div",{className:"amount-detail detail-show"},nt(t))},ca=function(e){var t=e.balance;return r.a.createElement("div",{className:"balance"},nt(t))},oa=function(e){var t=e.description,a=e.details,n=a.filter(function(e){return null!==e.budget_item_id}),c=null===t||""===t;return a.length>1||1===n.length&&!c?r.a.createElement("div",{className:"info-item"},n.map(function(e,t){return r.a.createElement("span",{key:t},t>0&&r.a.createElement(ua,null),r.a.createElement(tt,{className:e.icon_class_name})," ")})):null},ia=function(e){var t=e.checkNumber;return""===t||null===t?null:r.a.createElement("div",{className:"info-item"},r.a.createElement(tt,{className:"fas fa-money-check"}))},la=function(e){var t=e.notes;return""===t||null===t?null:r.a.createElement("div",{className:"info-item"},r.a.createElement(tt,{className:"fas fa-sticky-note"}))},ua=function(){return r.a.createElement("span",{className:"spacer"})},sa=function(e){var t=e.checkNumber;return t?r.a.createElement("div",{className:"check-number"},r.a.createElement(tt,{className:"fas fa-money-check"})," ",Ke(We.check),": ",t):null},ma=function(e){var t=e.notes;return t?r.a.createElement("div",{className:"notes"},r.a.createElement("div",{className:"notes-icon"},r.a.createElement(tt,{className:"fas fa-sticky-note"})),r.a.createElement("div",{className:"notes-content"},t.split("<br>").map(function(e,t){return r.a.createElement(da,{key:t,note:e})}))):null},da=function(e){var t=e.note;return r.a.createElement("div",{className:"note-line"},t)},pa=function(e){var t=e.id,a=e.balance,n=e.budgetExclusion,c=e.check_number,o=e.description,i=e.details,l=e.notes,u=e.showDetail;return 0===t?null:r.a.createElement("div",{className:"transaction-row txn-second-row"},r.a.createElement(fa,{budgetExclusion:n,check_number:c,description:o,details:i,notes:l,showDetail:u}),r.a.createElement(ga,{balance:a}))},fa=function(e){var t=e.budgetExclusion,a=e.check_number,n=e.description,c=e.details,o=e.notes;return e.showDetail?r.a.createElement("div",{className:"txn-info-stack"},r.a.createElement(ma,{notes:o}),r.a.createElement(sa,{checkNumber:a})):r.a.createElement("div",{className:"txn-info"},r.a.createElement(oa,{description:n,details:c}),r.a.createElement(ba,{exclusion:t}),r.a.createElement(la,{notes:o}),r.a.createElement(ia,{checkNumber:a}))},ba=function(e){return e.exclusion?r.a.createElement("div",{className:"info-item budget-exclusion"},"budget exclusion"):null},ga=function(e){var t=e.balance;return r.a.createElement("div",{className:"txn-balance"},nt(t))},Ea=function(e){var t=e.description,a=e.details,n=e.showDetail,c=a.filter(function(e){return null!==e.budget_item_id}),o=""===t||null===t;return c.length>0&&!o&&!n?r.a.createElement("div",{className:"budget-categories"},c.map(function(e,t){return r.a.createElement("span",{key:t},t>0&&"; ",r.a.createElement(tt,{className:e.icon_class_name})," ",e.budget_category)})):null},ha=function(e){return e.budgetExclusion?r.a.createElement("div",{className:"exclusion"},We.budgetExclusion):null},va=function(e){var t=e.clearanceDate,a=null===t?We.pending:G(t),n=null===t?We.pending:G(t,{format:"m/d"});return r.a.createElement("div",{className:"clearance-date"},r.a.createElement(ya,{clearanceDate:t,shortDate:n}),r.a.createElement("span",{className:"long-date"},a))},ya=function(e){var t=e.clearanceDate,a=e.shortDate;return r.a.createElement("span",{className:"short-date ".concat(null===t?We.pending:"")},a)},Oa=function(e){var t=e.collapseDetail,a=e.description,n=e.details,c=e.expandDetail,o=e.showDetail,i=o?t:c,l=n.filter(function(e){return null!==e.budget_item_id});return r.a.createElement("div",{className:"description"},r.a.createElement("div",{className:"plain-text"},r.a.createElement(_a,{budgetDetails:l,description:a,onClick:i})),r.a.createElement("div",{className:"link"},r.a.createElement(Ve.a,{to:"#",onClick:i},r.a.createElement(_a,{budgetDetails:l,description:a}))),r.a.createElement(wa,{description:a,details:n,showDetail:o}))},_a=function(e){var t=e.budgetDetails,a=e.description;return null===a||""===a?r.a.createElement(Na,{budgetDetails:t}):r.a.createElement("span",null,a)},Na=function(e){var t=e.budgetDetails;return r.a.createElement("span",null,t.map(function(e,t){return r.a.createElement("span",{className:"budget-item",key:e.id},t>0&&"; ",e.budget_category," ",r.a.createElement(tt,{className:e.icon_class_name})," ")}))},wa=function(e){var t=e.description,a=e.details,n=e.showDetail,c=a.length>1||null!==t;return n&&c?r.a.createElement("div",{className:"description-details"},a.map(function(e){return r.a.createElement("div",{className:"description-detail",key:e.id},e.budget_category," ",r.a.createElement(tt,{className:e.icon_class_name}))})):null},ja=Object(s.b)(function(e,t){var a=Object(p.a)({amount:parseFloat(t.amount/100).toFixed(2)},t.updatedProps),n=t.details.map(function(e){return Object(p.a)({},e,{originalProps:e,amount:parseFloat(e.amount/100).toFixed(2)},e.updatedProps,{updatedProps:Object(p.a)({amount:parseFloat(e.amount/100).toFixed(2)},e.updatedProps)})}),r=e.transactions.budgetItems.collection.filter(function(e){return!e.monthly||e.deletable||e.id===t.budget_item_id}),c=function(e){return"".concat(e.name," (").concat(nt(e.remaining,{absolute:!0}),")")},o=r.filter(function(e){return!e.accrual||e.matureAccrual}).map(function(e){return{value:e.id,label:c(e)}}).sort(function(e,t){return e.label.toLowerCase()<t.label.toLowerCase()?-1:1}),i=[{label:Ke(ze.discretionary.title),value:null}].concat(Object(d.a)(o));return{transaction:Object(p.a)({},t,a,{changedProps:Ct(t,Object(p.a)({},a,{amount:Math.round(100*parseFloat(a.amount))})),details:n,originalAmount:t.amount}),budgetOptions:i,selectedAccount:e.accounts.collection.find(function(e){return e.id===t.account_id})}})(function(e){var t=e.budgetOptions,a=e.dispatch,n=e.transaction,c=n.id,o=n.account_id,i=n.clearance_date,l=n.details,u=function(){var e=""===n.description?null:n.description,t=je({route:"transaction-show",id:c,accountId:o}),r=JSON.stringify(Object(p.a)({},n,{description:e,details_attributes:l.map(function(e){return Object(p.a)({},e,e.updatedProps,{amount:Math.round(100*parseFloat(e.updatedProps.amount))})})})),i=At({eventType:"transaction-entry-update",id:c,changedProps:n.changedProps,details:l.map(function(e){return{id:e.id,changedProps:Ct(Object(p.a)({},e,e.originalProps),Object(p.a)({},e.updatedProps,{amount:Math.round(100*parseFloat(e.updatedProps.amount))}))}})});ke(t,r,{onSuccess:function(e){return a({type:"transactions/UPDATED",payload:Object(p.a)({},e,{showForm:!1,originalAmount:n.originalAmount})})},event:i})};return n.showForm?r.a.createElement(ea,Object.assign({addDetail:function(){var e={type:"transactions/ADD_DETAIL_TO_ENTRY",payload:{id:c,detailId:l.length}};a(e)},budgetOptions:t,buttonText:Ke(We.updateButtonText),handleKeyDown:function(e){13===e.which&&u()},onChange:function(e){var t=function(e){return{type:"transactions/EDIT_PROPS",payload:e}}(Object(p.a)({id:c},e));a(t)},onDetailChange:function(e,t){var n=function(e){return{type:"transactions/EDIT_DETAIL_PROPS",payload:e}}(Object(p.a)({txnId:c,detailId:e},t));a(n)},onSubmit:u,removeDetail:function(e,t){var n=window.confirm(We.deleteDetailConfirmationMessage),r=t.amount,l=t.budget_item_id,u=t.budget_category;if(n){var s={type:"transactions/REMOVE_DETAIL",payload:{account_id:o,amount:Math.round(-100*r),clearance_date:i,detailId:e,transactionId:c}},m=je({route:"transaction-show",id:c,accountId:o}),d=JSON.stringify({details_attributes:[{id:e,_destroy:!0}]}),p=At({eventType:"transaction-detail-delete",id:e,entryId:c,amount:r,budgetItemId:l,budgetCategory:u});ke(m,d,{event:p,onSuccess:function(){return a(s)}})}},resetForm:function(e){e.preventDefault();var t=et({id:c});a(t)},toggleFormOption:function(e){var t=e.target.name,r={type:"transactions/EDIT_FORM_OPTIONS",payload:Object(P.a)({id:c},t,!n.formOptions[t])};a(r)}},e)):null}),Ta=Object(s.b)(function(e,t){return t})(function(e){var t=e.onClick;return r.a.createElement("div",{className:"transaction-edit-button"},r.a.createElement(Ve.a,{className:"far fa-edit",to:"#",onClick:t}))}),Ia=function(e){var t=e.onClick;return r.a.createElement("div",{className:"transaction-delete-button"},r.a.createElement(Ve.a,{className:"fas fa-trash-alt",to:"#",onClick:t}))},Da=function(e){var t=e.revealForm,a=e.transactionDelete;return r.a.createElement("div",{className:"end-links"},r.a.createElement(Ta,{onClick:t}),r.a.createElement(Ia,{onClick:a}))},xa=function(e){var t=e.collapseDetail,a=e.details,n=e.expandDetail,c=e.showDetail;return a.length<2?null:c?r.a.createElement(Ve.a,{className:"fas fa-caret-down",to:"#",onClick:t}):r.a.createElement(Ve.a,{className:"fas fa-caret-right",to:"#",onClick:n})},Ca=function(e){var t=e.id,a=e.revealForm,n=e.showDetail,c=e.transactionDelete;return 0!==t&&n?r.a.createElement("div",{className:"transaction-row txn-links"},r.a.createElement(Ta,{onClick:a}),r.a.createElement(Ia,{onClick:c})):null},Aa=Object(s.b)(function(e,t){return t})(function(e){var t=e.id,a=e.account_id,n=e.amount,c=e.balance,o=e.budget_exclusion,i=e.check_number,l=e.clearance_date,u=e.deletable,s=e.description,m=e.details,d=e.notes,p=e.showDetail,f=function(a){a.preventDefault();var n=Ze({id:t,showDetail:!0});e.dispatch(n)},b=function(a){a.preventDefault();var n=Ze({id:t,showDetail:!1});e.dispatch(n)},g=function(a){a.preventDefault();var n=et({id:t});e.dispatch(n)},E=function(r){if(r.preventDefault(),window.confirm(We.deleteConfirmationMessage)){var c=je({route:"transaction-show",id:t,accountId:a}),o={type:"transactions/DELETED",payload:{id:t,amount:-1*n,account_id:a}},i=At({eventType:"transaction-entry-delete",id:t,details:m});Ae(c,i,function(){return e.dispatch(o)})}};return e.showForm?r.a.createElement(ja,e):r.a.createElement("div",{className:"transaction-wrapper"},r.a.createElement("div",{className:"transaction"},r.a.createElement("div",{className:"transaction-row"},r.a.createElement("div",{className:"left-content"},r.a.createElement("div",{className:"left-caret"},r.a.createElement(xa,{collapseDetail:b,details:m,expandDetail:f,showDetail:p})),r.a.createElement(va,{clearanceDate:l}),r.a.createElement(Oa,{collapseDetail:b,description:s,details:m,expandDetail:f,showDetail:p})),r.a.createElement("div",{className:"middle-content"},r.a.createElement(na,{amount:n,details:m,showDetail:p}),r.a.createElement(ca,{balance:c}),r.a.createElement(Ea,{description:s,details:m,showDetail:p}),r.a.createElement(ha,{budgetExclusion:o}),r.a.createElement(ma,{notes:d}),r.a.createElement(sa,{checkNumber:i}))),r.a.createElement(Da,{revealForm:g,transactionDelete:E}),r.a.createElement(pa,{id:t,balance:c,budgetExclusion:o,check_number:i,description:s,details:m,notes:d,showDetail:p}),r.a.createElement(Ca,{id:t,deletable:u,revealForm:g,showDetail:p,transactionDelete:E})))}),Ma=Object(s.b)(function(e,t){var a=e.transactions,n=a.collection,r=a.metadata,c=G(r.date_range[0]),o=G(r.date_range[1]),i=new Date,l=new Date(i.getTime()-6e4*i.getTimezoneOffset()).toISOString().slice(0,10),u=n.sort(function(e,t){return e.clearance_date===t.clearance_date?0:null===e.clearance_date?t.clearance_date>l?-1:1:null===t.clearance_date?e.clearance_date>l?1:-1:e.clearance_date>t.clearance_date?1:-1}),s={id:0,amount:r.prior_balance,balance:r.prior_balance,check_number:null,clearance_date:r.date_range[0],description:"Balance",details:[],notes:null},m=t.month,d=t.year,f=H({month:m,year:d}),b=K({month:m,year:d});return Object(p.a)({},e.transactions,{startDate:c,endDate:o,initialTransaction:s,collection:function(){var e=r.prior_balance;return u.map(function(t){return e+=t.amount,Object(p.a)({balance:e},t)})}(),prevMonth:b,nextMonth:f},t)})(function(e){var t=e.collection,a=e.endDate,n=e.initialTransaction,c=e.nextMonth,o=e.prevMonth,i=e.slug,l=e.startDate,u="/accounts/".concat(i,"/").concat(c.month,"/").concat(c.year),s="/accounts/".concat(i,"/").concat(o.month,"/").concat(o.year);return r.a.createElement("div",{className:"transactions"},r.a.createElement("h2",null,Ke(We.title)),r.a.createElement("div",{className:"transaction-metadata"},r.a.createElement("div",{className:"date-range"},We.dateRange(l,a)),r.a.createElement("div",{className:"page-links"},r.a.createElement(Ve.a,{to:s},r.a.createElement(tt,{className:"fas fa-angle-double-left"}),ee(Object(p.a)({},o,{format:"numericMonthYear"}))),r.a.createElement(Ve.a,{to:u},ee(Object(p.a)({},c,{format:"numericMonthYear"})),r.a.createElement(tt,{className:"fas fa-angle-double-right"})))),r.a.createElement("hr",null),r.a.createElement(Aa,Object.assign({key:"0"},n)),t.map(function(e){return r.a.createElement(Aa,Object.assign({key:e.id},e,{deletable:!0}))}),r.a.createElement(aa,null))}),ka=Object(s.b)(function(e,t){var a=e.transactions.metadata.query_options,n=e.transactions.budgetItems.fetched,r=401===e.api.status;return{accountId:parseInt(a.account_id),isApiUnauthorized:r,fetched:n,month:parseInt(a.month),slug:t.slug,urlAccountId:t.accountId,urlMonth:t.month,urlYear:t.year,year:parseInt(a.year)}})(function(e){var t=e.accountId,a=e.isApiUnauthorized,n=e.dispatch,c=e.fetched,o=e.month,i=e.slug,l=e.urlAccountId,u=e.urlMonth,s=e.urlYear,m=e.year;if(!Number.isInteger(l))return null;var d=!(u===o&&s===m),f=d||l!==t,b=!c||d;return a?null:((f||b)&&(f&&function(){var e=je({route:"transactions-index",accountId:l,query:{month:u,year:s}});Ce(e,function(e){return n({type:"transactions/FETCHED",payload:Object(p.a)({},e,{slug:i})})})}(),b&&function(){var e=je({route:"budget-items-index",query:{month:u,year:s}});Ce(e,function(e){return n({type:"transactions/FETCHED_BUDGET_ITEMS",payload:e})})}()),r.a.createElement(Ma,e))}),Fa=function(e){var t=e.month,a=e.year,n=e.selectedAccount,c=e.selectedAccountId,o=e.slug;return 0===c?r.a.createElement(Sa,null):r.a.createElement("div",null,r.a.createElement(ka,{accountId:c,month:t,selectedAccount:n,slug:o,year:a}),r.a.createElement("hr",null),r.a.createElement(Sa,null))},Sa=function(){return r.a.createElement("div",null,r.a.createElement(Je,null),r.a.createElement(Xe,null))},Ra=a(157),Pa=function(e){var t=e.id,a=e.name,n=e.balance,c=e.selectedAccountId,o=e.slug;return r.a.createElement(Ve.a,{to:"/accounts/".concat(o)},r.a.createElement("div",{className:"account ".concat(c===t?"active":"")},r.a.createElement("div",{className:"account-name"},r.a.createElement("h3",null,a)),r.a.createElement("div",{className:"balance"},r.a.createElement("div",null,nt(n)))))},La=function(e){var t=e.collection,a=e.selectedAccountId;return r.a.createElement("div",null,t.map(function(e){return r.a.createElement(Pa,Object.assign({key:e.id},e,{selectedAccountId:a}))}))},za=Object(s.b)(function(e,t){var a=t.match.params.slug||e.transactions.slug,n=L(e.accounts.collection,function(e){return e.slug===a},{id:0,cash_flow:!0,name:"",priority:"",slug:null}),r=n.id,c=parseInt(t.match.params.month)||e.transactions.metadata.query_options.month,o=parseInt(t.match.params.year)||e.transactions.metadata.query_options.year,i=e.accounts.accountsFetched,l=e.accounts.collection.sort(function(e,t){return e.priority-t.priority});return{accountsFetched:i,isApiUnauthorized:401===e.api.status,collection:l,month:c,dateParams:{month:t.match.params.month,year:t.match.params.year},selectedAccountId:r,selectedAccount:n,slug:a,year:o}})(function(e){var t=e.accountsFetched,a=e.isApiUnauthorized,n=e.collection,c=e.dateParams,o=e.dispatch,i=e.month,l=e.selectedAccount,u=e.selectedAccountId,s=e.slug,m=e.year;if(!a&&!t){var d=je({route:"accounts-index"});return Ce(d,function(e){return o(ge(e))}),null}return c.month&&c.year||0===u?r.a.createElement("div",{className:"accounts"},r.a.createElement(La,{collection:n,selectedAccountId:u}),r.a.createElement(Fa,{month:i,selectedAccountId:u,selectedAccount:l,slug:s,year:m})):r.a.createElement(Ra.a,{to:"/accounts/".concat(s,"/").concat(i,"/").concat(m)})}),Ua=Le.cancelButtonText,Ya=Le.cashFlow,Ba=Le.createButtonText,Wa=Le.name,Ga=Le.priority,Ha=Le.updateButtonText,Ka=function(e){return r.a.createElement("div",{className:"account-edit"},r.a.createElement("div",null,r.a.createElement("h3",null,e.title),r.a.createElement("hr",null),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"label"},r.a.createElement("label",null,Wa)),r.a.createElement("div",{className:"input"},r.a.createElement("input",{type:"text",name:"name",value:e.name,onChange:e.updateAccountProps}))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"label"},r.a.createElement("label",null,Ke(Le.slugLabel))),r.a.createElement("div",{className:"input"},r.a.createElement("input",{type:"text",name:"slug",value:e.slug,onChange:e.updateAccountProps}))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"label"},r.a.createElement("label",null,Ga)),r.a.createElement("div",{className:"input"},r.a.createElement("input",{type:"number",name:"priority",value:e.priority,onChange:e.updateAccountProps}))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"label"},r.a.createElement("label",null,Ke(Ya))),r.a.createElement("div",{className:"input"},r.a.createElement("input",{type:"checkbox",name:"cash_flow",checked:e.cash_flow,onChange:e.updateCashFlow}))),r.a.createElement("div",{className:"form-row"},r.a.createElement("button",{type:"submit",className:"submit",onClick:e.submitForm},Ke(e.id?Ha:Ba)," ",r.a.createElement(tt,{className:"far fa-save"})),r.a.createElement("button",{type:"cancel",className:"cancel",onClick:e.closeForm},Ke(Ua)," ",r.a.createElement(tt,{className:"fas fa-times"})))))},qa=Object(s.b)(function(e){return Object(p.a)({},e.accounts.newAccount,{showNewForm:e.accounts.showNewForm})})(function(e){var t=e.cash_flow,a=e.dispatch,n=e.name,c=e.priority;return e.showNewForm?r.a.createElement(Ka,Object.assign({},e,{closeForm:function(e){e.preventDefault();var t=he({showForm:!1});a(t)},submitForm:function(){var e=je({route:"accounts-index"}),r=JSON.stringify({name:n,priority:c,cash_flow:t}),o=At({eventType:"account-create"});Me(e,r,{onSuccess:function(e){a({type:"accounts/CREATED",payload:e}),a({type:"accounts/RESET_FORM",payload:null})},event:o})},title:"Add New",updateAccountProps:function(e){var t=ye(Object(P.a)({},e.target.name,e.target.value));a(t)},updateCashFlow:function(){var e=ye({cash_flow:!t});a(e)}})):r.a.createElement("div",{className:"account-edit"},r.a.createElement("div",null,r.a.createElement("h3",null,r.a.createElement(Ve.a,{to:"#",onClick:function(e){e.preventDefault(),a({type:"accounts/RESET_FORM",payload:null});var t=he({showForm:!0});a(t)}},r.a.createElement(tt,{className:"fas fa-plus"})," Add new"))))}),Va=Object(s.b)(function(e,t){return t})(function(e){var t=e.id,a=e.dispatch,n=e.name,c=e.updatedProps,o=Object(p.a)({},e,c);return r.a.createElement(Ka,Object.assign({},o,{closeForm:function(){var e=Ee({id:t,showForm:!1});a(e)},title:n,updateAccountProps:function(e){e.preventDefault();var n=Oe(Object(P.a)({id:t},e.target.name,e.target.value));a(n)},updateCashFlow:function(){var e=Oe({id:t,cash_flow:!o.cash_flow});a(e)},resetForm:function(){var e=Ee({id:t});a(e)},submitForm:function(){var n=At({eventType:"account-update",id:t,name:Object(p.a)({},e,c).name,changedProps:Ct(e,c)}),r=je({route:"account-show",id:t}),o=JSON.stringify(c);ke(r,o,{onSuccess:function(e){a({type:"accounts/UPDATED",payload:e}),a(ve({id:t,showForm:!1}))},event:n})}}))}),Ja=Object(s.b)(function(e,t){return t})(function(e){var t=e.id,a=e.cash_flow,n=e.dispatch,c=e.name,o=e.priority,i=e.showForm,l=e.slug,u=Le.cashFlow,s=Le.deleteButtonText,m=Le.deleteConfirmationMessage,d=Le.nonCashFlow;return i?r.a.createElement(Va,e):r.a.createElement("div",{className:"account-edit"},r.a.createElement("div",null,r.a.createElement("h3",null,c," ",r.a.createElement(Ve.a,{to:"#",className:"far fa-edit",onClick:function(){var e=ve({id:t,showForm:!0});n(e)}})),r.a.createElement("div",{className:"slug"},Ke(Le.slugLabel),": ",l),r.a.createElement("div",{className:"cash-flow"},Ke(a?u:d)),r.a.createElement("div",{className:"priority"},Le.priority,": ",o),r.a.createElement("div",null,r.a.createElement("button",{type:"delete",onClick:function(){if(window.confirm(m(c))){var e=je({route:"account-show",id:t}),a=At({eventType:"account-delete",id:t,name:c});Ae(e,a,function(){return n({type:"accounts/DELETED",payload:{id:t}})})}},className:"delete-account"},Ke(s)," ",r.a.createElement(tt,{className:"fas fa-trash"})))))}),Xa=Object(s.b)(function(e){var t=e.accounts,a=t.collection,n=t.accountsFetched,r=a.sort(function(e,t){return e.priority-t.priority});return{accountsFetched:n,isApiUnauthorized:401===e.api.status,collection:r}})(function(e){var t=e.isApiUnauthorized,a=(e.apiKey,e.collection),n=e.dispatch,c=e.accountsFetched;if(t)return null;if(!c){var o=je({route:"accounts-index"});Ce(o,function(e){return n(ge(e))})}return r.a.createElement("div",{className:"accounts"},r.a.createElement("div",{className:"account-show"},a.map(function(e){return r.a.createElement(Ja,Object.assign({key:e.id},e))}),r.a.createElement(qa,null)))}),$a=function(e){return{type:"budget/finalize/ADD_FINALIZE_ITEM",payload:e}},Za=function(e){return{type:"budget/finalize/EDIT_BASE_AMOUNT",payload:e}},Qa={type:"budget/finalize/MARK_INTERVAL_CLOSED",payload:null},en=function(e){return{type:"budget/finalize/MARK_SELECTED",payload:e}},tn=function(e){return{type:"budget/finalize/SET_STATUS",payload:e}},an=function(e){return{type:"budget/finalize/UPDATE_EXTRA",payload:e}},nn=function(e){return{type:"budget/finalize/UPDATE_FINALIZE_ITEM",payload:e}},rn=function(e){return{type:"budget/finalize/UPDATE_SELECTED_FROM_ACCOUNT_ID",payload:e}},cn=function(e){return{type:"budget/finalize/UPDATE_SELECTED_TO_ACCOUNT_ID",payload:e}},on=function(e){var t=e.month,a=e.year;return r.a.createElement("div",{className:"finalize-title"},r.a.createElement("h2",null,Ke(ze.finalize.title)," ",W({month:t,year:a,day:1,format:"monthYear"})))},ln=a(153),un=Object(s.b)(function(e,t){var a=parseInt(t.match.params.month),n=parseInt(t.match.params.year),r=e.budget.finalize,c=r.baseMonth.isFetched,o=r.next.isFetched,i=r.baseMonth.is_closed_out,l=r.baseMonth,u=l.month,s=l.year,m=r.next.month||(12===a?1:a+1),d=r.next.year||(12===a?n+1:n),p=Q(new Date(s||n,u||a,0));return{isApiUnauthorized:401===e.api.status,baseMonthFetched:c,baseMonthFinalized:i,isEndOfMonth:p,month:u||a,nextMonth:m,nextMonthFetched:o,nextYear:d,year:s||n}})(function(e){var t=e.isApiUnauthorized,a=e.baseMonthFetched,n=e.baseMonthFinalized,c=e.dispatch,o=e.isEndOfMonth,i=e.month,l=e.nextMonth,u=e.nextMonthFetched,s=e.nextYear,m=e.year;if(!o)return r.a.createElement(ln.a,{to:"/budget/".concat(i,"/").concat(m)});if(!t&&!a){var d=je({route:"budget-items-index",query:{month:i,year:m}});Ce(d,function(e){return c({type:"budget/finalize/BASE_MONTH_FETCH",payload:e})})}if(!t&&a&&!u){var p=je({route:"budget-items-index",query:{month:l,year:s}});Ce(p,function(e){return c({type:"budget/finalize/NEXT_MONTH_FETCH",payload:e})})}return a&&u?n?r.a.createElement(ln.a,{to:"/budget/".concat(l,"/").concat(s)}):r.a.createElement(ln.a,{to:"/budget/finalize/".concat(i,"/").concat(m,"/accruals")}):r.a.createElement(on,{month:i,year:m})}),sn=function(e){return{type:"budget/ADD_MONTHLY_ITEM",payload:e}},mn=function(e){return{type:"budget/ADD_WEEKLY_ITEM",payload:e}},dn=function(e){return{type:"budget/EDIT_MONTHLY_ITEM",payload:e}},pn=function(e){return{type:"budget/EDIT_NEW_MONTHLY_ITEM",payload:e}},fn=function(e){return{type:"budget/EDIT_NEW_WEEKLY_ITEM",payload:e}},bn=function(e){return{type:"budget/EDIT_WEEKLY_ITEM",payload:e}},gn=function(e){return{type:"budget/TOGGLE_DISCRETIONARY_DETAIL",payload:e}},En=function(e){return{type:"budget/TOGGLE_MONTHLY_ITEM_FORM",payload:e}},hn=function(e){return{type:"budget/TOGGLE_WEEKLY_ITEM_FORM",payload:e}},vn=function(e){var t=e.errors;return 0===t.length?null:r.a.createElement("ul",{className:"input-errors"},t.map(function(e,t){return r.a.createElement(yn,{key:t,error:e})}))},yn=function(e){var t=e.error;return r.a.createElement("li",{className:"input-error"},t)},On=function(e){var t=e.baseItem,a=e.dispatch,n=t.floatRemaining,c=t.remaining,o=void 0===n?(c/100).toFixed(2):n,i=function(e){var n=c-e>-100?0:c-e,r=an({id:t.id,name:t.name,amount:n});a(r)},l=function(){return Math.abs(parseInt(100*o))>Math.abs(c)+100?["Cannot be greater than original amount"]:[]};return r.a.createElement("div",{className:"finalize-accrual"},r.a.createElement("div",{className:"item-name"},e.baseItem.name),r.a.createElement("div",{className:"item-input"},r.a.createElement("input",{className:l().length>0?"errors":"",disabled:"pending"!==e.baseItem.status,name:"carryover",onChange:function(e){e.preventDefault();var n=Za(Object(p.a)({},t,{floatRemaining:e.target.value}));a(n),i(parseFloat(100*e.target.value))},type:"text",value:o}),r.a.createElement(vn,{errors:l()})),r.a.createElement(_n,Object.assign({},e.nextItem,{baseItem:e.baseItem,dispatch:e.dispatch,nextMonth:e.nextMonth,nextYear:e.nextYear})),r.a.createElement(Nn,{nextMonth:e.nextItem,remaining:parseInt(100*o)}),r.a.createElement(jn,{status:e.baseItem.status}))},_n=function(e){var t=e.id,a=e.amount,n=e.baseItem,c=e.dispatch,o=e.nextMonth,i=e.nextYear;return t?r.a.createElement("div",{className:"next-month-amount"},nt(a,{absolute:!1})):"reviewed"!==n.status?r.a.createElement(wn,Object.assign({},n,{dispatch:c,nextMonth:o,nextYear:i})):r.a.createElement("div",{className:"next-month-amount"})},Nn=function(e){var t=e.nextMonth,a=e.remaining,n=t?a+t.amount:0;return r.a.createElement("div",{className:"next-month-amount"},nt(n,{absolute:!1}))},wn=function(e){var t=e.id,a=e.budget_category_id,n=e.dispatch,c=e.monthly,o=e.name,i=e.nextMonth,l=e.nextYear,u=e.remaining;return r.a.createElement("div",{className:"next-month-amount"},r.a.createElement("button",{className:"ignore",onClick:function(){var e=an({id:t,name:o,amount:u});n(e),n(tn({id:t,status:"reviewed"}))}},Ke(ze.finalize.disregard)," ",r.a.createElement("span",{className:"fas fa-times"})),r.a.createElement("button",{className:"create-item",onClick:function(){var e=je({route:"budget-category-items-index",id:a}),t=JSON.stringify({amount:0,month:i,year:l}),r=At({eventType:"budget-item-create"});Me(e,t,{event:r,onSuccess:function(e){n(c?sn(e):mn(e)),n($a(e))}})}},Ke(ze.finalize.createItem)," ",r.a.createElement("span",{className:"fas fa-check"})))},jn=function(e){var t=e.status;return r.a.createElement("div",{className:"indicator"},r.a.createElement(tt,{className:function(){switch(t){case"pending":return"far fa-check-circle";case"submitted":return"fas fa-compact-disc fa-spin";case"reviewed":return"fas fa-check-circle green";default:return"far fa-check-circle"}}()}))},Tn=function(e){var t=e.extra.filter(function(e){return 0!==e.amount}).sort(function(e,t){return e.name<t.name?-1:1}),a=t.reduce(function(e,t){return e+t.amount},0);return r.a.createElement("div",{className:"finalize-summary"},r.a.createElement("h2",null,Ke(ze.finalize.summary)),r.a.createElement("div",{className:"extra"},r.a.createElement("span",null,Ke(ze.finalize.extra),": "),r.a.createElement("span",null,nt(-1*a,{absolute:!1})," ")),t.map(function(e,t){return r.a.createElement(In,Object.assign({key:t},e))}))},In=function(e){var t=e.name,a=e.amount;return r.a.createElement("div",{className:"extra"},r.a.createElement("span",null,t),r.a.createElement("span",null,nt(-1*a,{absolute:!1})))},Dn=a(38),xn=a.n(Dn),Cn=a(56),An=function(e){return new Promise(function(t){return setTimeout(t,e)})},Mn=function(e){var t=e.collection,a=e.dispatch,n=function(e){var t=e.id,n=e.amount,r=(e.budget_category_id,e.name),c=e.originalAmount,o=e.month,i=e.year,l=je({route:"budget-items-events-index"}),u=At({eventType:"budget-item-update",id:t,category:r,month:o,year:i,originalAmount:c/100,newAmount:n/100}),s=JSON.stringify({events:[{event_type:"rollover_item_adjust",budget_item_id:t,amount:n}]});Me(l,s,{event:u,onSuccess:function(e){return a(nn(e))}})},c=function(e){return e.baseItem.floatRemaining||""===e.baseItem.floatRemaining?e.nextItem.amount+(100*parseFloat(e.baseItem.floatRemaining)||0):e.nextItem.amount+e.baseItem.remaining},o=function(){var e=Object(Cn.a)(xn.a.mark(function e(){var r,o,i,l,u,s,m;return xn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=!0,o=!1,i=void 0,e.prev=3,l=t[Symbol.iterator]();case 5:if(r=(u=l.next()).done){e.next=15;break}return s=u.value,m=s.baseItem.id,s.nextItem&&(a(tn({id:m,status:"submitted"})),n({id:s.nextItem.id,amount:c(s),budget_category_id:s.baseItem.budget_category_id,name:s.baseItem.name,originalAmount:s.nextItem.amount,month:s.nextItem.month,year:s.nextItem.year})),e.next=11,An(500);case 11:a(tn({id:m,status:"reviewed"}));case 12:r=!0,e.next=5;break;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(3),o=!0,i=e.t0;case 21:e.prev=21,e.prev=22,r||null==l.return||l.return();case 24:if(e.prev=24,!o){e.next=27;break}throw i;case 27:return e.finish(24);case 28:return e.finish(21);case 29:case"end":return e.stop()}},e,this,[[3,17,21,29],[22,,24,28]])}));return function(){return e.apply(this,arguments)}}();return r.a.createElement("button",{onClick:o},Ke(ze.finalize.submitAccrualButtonText))},kn=Object(s.b)(function(e,t){var a=parseInt(t.match.params.month),n=parseInt(t.match.params.year),r=e.budget.finalize,c=r.baseMonth,o=c.isFetched,i=c.month,l=c.year,u=r.extra,s=r.next,m=s.collection;return{collection:e.budget.finalize.baseMonth.collection.filter(function(e){return e.accrual&&e.remaining<0}).sort(function(e,t){return e.name<=t.name?-1:1}).map(function(e){return{baseItem:e,nextItem:m.find(function(t){return t.budget_category_id===e.budget_category_id})}}),isFetched:o,extra:u,month:i||a,nextMonth:s.month,nextYear:s.year,year:l||n}})(function(e){var t=e.collection,a=e.dispatch,n=e.extra,c=e.isFetched,o=e.month,i=e.nextMonth,l=e.nextYear,u=e.year,s=t.filter(function(e){return"reviewed"!==e.baseItem.status});return c?s.length>0?r.a.createElement("div",null,r.a.createElement(on,{month:o,year:u}),r.a.createElement("div",{className:"finalize-wrapper"},r.a.createElement("div",{className:"finalize-workspace"},r.a.createElement("h4",null,Ke(ze.category.accruals)),r.a.createElement("div",{className:"finalize-accrual"},r.a.createElement("div",{className:"item-name"},Ke(ze.category.name)),r.a.createElement("div",{className:"item-input"},ze.finalize.remainingIn(ee({month:o,year:u,format:"numericMonthYear"}))),r.a.createElement("div",{className:"next-month-amount"},ze.finalize.budgetedFor(ee({month:i,year:l,format:"numericMonthYear"}))),r.a.createElement("div",{className:"next-month-amount"},Ke(ze.shared.total)),r.a.createElement("div",{className:"indicator"})),t.map(function(e){return r.a.createElement(On,Object.assign({key:e.baseItem.id},e,{dispatch:a,nextMonth:i,nextYear:l}))}),r.a.createElement("div",{className:"next-month-accrual-submit"},r.a.createElement(Mn,{collection:t,dispatch:a}))),r.a.createElement(Tn,{extra:n}))):r.a.createElement(ln.a,{to:"/budget/finalize/".concat(o,"/").concat(u,"/items")}):r.a.createElement(ln.a,{to:"/budget/finalize/".concat(o,"/").concat(u,"/start")})}),Fn=function(e){var t=e.dispatch,a=e.month,n=e.note,c=e.selectedFromAccountId,o=e.selectedToAccountId,i=e.totalExtra,l=e.year;if(null===c||null===o)return null;var u=ee({month:a,year:l,format:"numericMonthYear"}),s=function(){var e=je({route:"interval-show",month:a,year:l}),n={close_out_completed_at:new Date},r=At({eventType:"interval-closed",closeOutCompletedAt:n.close_out_completed_at,month:a,year:l});ke(e,JSON.stringify(n),{onSuccess:function(){return t(Qa)},event:r})};return r.a.createElement("button",{type:"submit",onClick:function(){!function(){var e=je({route:"transactions-index",accountId:c}),a=JSON.stringify({details_attributes:[{amount:i}],description:ze.finalize.depositMessage(u),notes:n}),r=At({eventType:"transaction-entry-create"});Me(e,a,{onSuccess:function(e){t($e(e))},event:r})}(),function(e){var a=je({route:"transactions-index",accountId:o}),n=JSON.stringify({details_attributes:[{amount:-1*i}],description:ze.finalize.depositMessage(u),budget_exclusion:!0}),r=At({eventType:"transaction-entry-create"});Me(a,n,{event:r,onSuccess:function(a){t($e(a)),e()}})}(s)},className:"deposit-extra"},Ke(ze.finalize.depositExtra)," ",r.a.createElement(tt,{className:"fas fa-donate"}))},Sn=function(e){var t=e.actionFn,a=e.dispatch,n=e.options,c=e.value,o=e.title;return r.a.createElement("div",{className:"account-select"},o,r.a.createElement(Yt.a,{isSearchable:!1,onChange:function(e){var n=t({id:e.value});a(n)},options:n,value:c}))},Rn=Object(s.b)(function(e,t){var a=parseInt(t.match.params.month),n=parseInt(t.match.params.year),r=e.accounts,c=e.budget.finalize,o=c.baseMonth.isFetched,i=c.baseMonth,l=i.month,u=i.year,s=c.next.month||(12===a?1:a+1),m=c.next.year||(12===a?n+1:n),d=c.extra,p=c.selectedFromAccountId,f=c.selectedToAccountId,b=d.reduce(function(e,t){return e+t.amount},0),g=r.collection.filter(function(e){return e.cash_flow}).map(function(e){return{label:e.name,value:e.id}}),E=g.find(function(e){return e.value===p}),h=r.collection.filter(function(e){return!e.cash_flow}).map(function(e){return{label:e.name,value:e.id}}),v=h.find(function(e){return e.value===f}),y=d.filter(function(e){return 0!==e.amount}).map(function(e){return"".concat(e.name," (").concat(nt(e.amount,{absoulte:!1}),")")}).join("; ");return{accountsFetched:r.accountsFetched,baseMonthFetched:o,baseMonthFinalized:c.baseMonth.is_closed_out,extra:d,fromOptions:g,fromValue:E,month:l||a,nextMonth:s,nextYear:m,note:y,selectedFromAccountId:p,selectedToAccountId:f,toOptions:h,totalExtra:b,toValue:v,year:u||n}})(function(e){var t=e.accountsFetched,a=e.isApiUnauthorized,n=e.baseMonthFetched,c=e.baseMonthFinalized,o=e.dispatch,i=e.extra,l=e.fromOptions,u=e.fromValue,s=e.month,m=e.nextMonth,d=e.nextYear,p=e.note,f=e.selectedFromAccountId,b=e.selectedToAccountId,g=e.toOptions,E=e.totalExtra,h=e.toValue,v=e.year;if(n){if(c)return r.a.createElement(Ra.a,{to:"/budget/".concat(m,"/").concat(d)});if(E>=0){var y=je({route:"interval-show",month:s,year:v}),O={close_out_completed_at:new Date},_=At({eventType:"interval-mark-complete",month:s,year:v,closeOutCompletedAt:O.close_out_completed_at});return ke(y,JSON.stringify(O),{event:_,onSuccess:function(){return o(Qa)}}),null}if(a||t)return r.a.createElement("div",null,r.a.createElement(on,{month:s,year:v}),r.a.createElement("div",{className:"finalize-wrapper"},r.a.createElement("div",{className:"finalize-workspace"},r.a.createElement("h4",null,Ke(ze.finalize.depositExtra)),r.a.createElement("div",{className:"finalize-extra"},r.a.createElement("div",{className:"title"},Ke("".concat(ze.shared.total," ").concat(ze.finalize.extra," ").concat(nt(E,{absolute:!0})))),r.a.createElement(Sn,{actionFn:rn,dispatch:o,options:l,title:ze.finalize.selectFromAccount,value:u}),r.a.createElement(Sn,{actionFn:cn,dispatch:o,options:g,title:ze.finalize.selectToAccount,value:h}),r.a.createElement("div",{className:"extra-submit"},r.a.createElement(Fn,{dispatch:o,month:s,note:p,selectedFromAccountId:f,selectedToAccountId:b,totalExtra:E,year:v})))),r.a.createElement(Tn,{extra:i})));var N=je({route:"accounts-index"});return Ce(N,function(e){return o(ge(e))}),null}return r.a.createElement(Ra.a,{to:"/budget/finalize/".concat(s,"/").concat(v,"/start")})}),Pn=function(e){var t=e.amount,a=e.errors,n=-1*(e.remaining-100*t);return a.length>0||0===n?null:r.a.createElement("div",{className:"total"},r.a.createElement("div",null,r.a.createElement("em",null,Ke(ze.finalize.appliedToExtra),":")),r.a.createElement("div",null,r.a.createElement("em",null,"(",nt(n,{absolute:!1}),")")))},Ln=function(e){var t=e.amount,a=e.baseItem,n=e.dispatch,c=a.id,o=a.name,i=a.remaining;if(Math.round(100*t)!==i)return null;return r.a.createElement("button",{className:"apply-to-extra",onClick:function(){n(an({id:c,name:o,amount:i})),n(tn({id:c,status:"reviewed"}))}},ze.finalize.applyToExtra," ",r.a.createElement(tt,{className:"fas fa-donate"}))},zn=function(e){var t=e.monthly,a=e.nextItem,n=e.nextMonthString;if(!a&&t)return null;var c=a?a.amount:0;return r.a.createElement("div",{className:"budgeted"},r.a.createElement("div",null,ze.finalize.budgetedFor(n),":"),r.a.createElement("div",{className:"amount"},nt(c,{absolute:!1})))},Un=function(e){var t=e.amount,a=e.baseItemId,n=e.budgetCategoryId,c=e.dispatch,o=e.errors,i=e.monthly,l=e.nextItem,u=e.nextMonth,s=e.nextYear,m=e.remaining;if(o.length>0)return null;var d=(l?l.amount:0)+100*t,p=function(){var e=tn({id:a,status:"reviewed"});c(e)},f=function(){var e=je({route:"budget-items-events-index"}),a=JSON.stringify({events:[{event_type:"rollover_item_adjust",budget_item_id:l.id,amount:at(t)}]}),n=At({eventType:"budget-item-update",id:l.id,category:l.name,month:l.month,year:l.year,originalAmount:l.originalAmount,newAmount:t});Me(e,a,{event:n,onSuccess:function(e){c(nn(e)),p()}})},b=function(){var e=je({route:"budget-items-events-index"}),t=JSON.stringify({events:[{event_type:"rollover_item_create",amount:d,budget_category_id:n,month:u,year:s}]});Me(e,t,{onSuccess:function(e){c(i?sn(e[0].item):mn(e[0].item)),c($a(e[0].item)),p()},event:function(e){return At({eventType:"budget-item-create"})(e[0])}})};return r.a.createElement("button",{className:"carry-over-submit",onClick:function(){l?f():100*t===m?p():b()},type:"submit"},Ke(ze.finalize.rollOver)," ",r.a.createElement(tt,{className:"fas fa-check"}))},Yn=function(e){var t=e.amount,a=e.errors,n=e.nextItem,c=e.nextMonthString;if(a.length>0)return null;var o=(n?n.amount:0)+100*(t||0);return r.a.createElement("div",{className:"total"},r.a.createElement("div",null,ze.finalize.updatedAmountFor(c),":"),r.a.createElement("div",null,nt(o,{absolute:!1})))},Bn=function(e){var t=e.dispatch,a=e.item,n=e.month,c=e.nextMonth,o=e.nextYear,i=e.year,l=a.baseItem,u=a.nextItems,s=l.id,m=l.expense,d=l.floatRemaining,f=l.monthly,b=l.name,g=l.remaining,E=l.status,h=ee({month:n,year:i,format:"numericMonthYear"}),v=ee({month:c,year:o,format:"numericMonthYear"}),y=void 0===d?(g/100).toFixed(2):d||0,O=function(){var e=[];return Math.abs(parseInt(100*y))>Math.abs(g)+1&&e.push(ze.finalize.exceedsOriginalAmount),m&&y>0&&e.push(ze.finalize.positiveExpenseErrorMessage),!m&&y<0&&e.push(ze.finalize.negativeRevenueErrorMessage),e},_=function(e){var a=an({id:s,name:b,amount:l.amount-e});t(a)},N=u.find(function(e){return e.selected});return r.a.createElement("div",{className:"finalize-workspace"},r.a.createElement("h4",null,Ke(ze.finalize.carryOver)),r.a.createElement("div",{className:"finalize-carry-over"},r.a.createElement("div",{className:"item-name"},b),r.a.createElement("div",{className:"remaining"},r.a.createElement("div",null,ze.finalize.carryOverFrom(h),":"),r.a.createElement("div",null,r.a.createElement("input",{className:O().length>0?"errors":"",name:"remaining",onChange:function(e){var a=Za(Object(p.a)({},l,{floatRemaining:e.target.value||0}));t(a),_(parseFloat(100*e.target.value))},type:"text",value:y||""}),r.a.createElement(vn,{errors:O()}))),r.a.createElement(zn,{monthly:!0,nextItem:N,nextMonthString:v}),r.a.createElement(Wn,{amount:y,errors:O(),nextItem:N,nextMonthString:v}),r.a.createElement(Pn,{amount:y,errors:O(),remaining:g}),r.a.createElement("div",{className:"submit-row"},r.a.createElement(Ln,{amount:y,baseItem:l,dispatch:t}),r.a.createElement(Un,{amount:y,budgetCategoryId:l.budget_category_id,baseItemId:s,dispatch:t,errors:O(),monthly:f,nextItem:N,nextMonth:c,nextYear:o})),r.a.createElement(Gn,{baseItemId:s,dispatch:t,nextItems:u,showNextItems:"showNextItems"===E})))},Wn=function(e){var t=e.amount,a=e.errors,n=e.nextItem,c=e.nextMonthString;return!n||a.length>0?null:r.a.createElement(Yn,{amount:t,errors:a,nextItem:n,nextMonthString:c})},Gn=function(e){var t=e.baseItemId,a=e.dispatch,n=e.nextItems,c=e.showNextItems,o=n.length;if(0===o)return null;var i=n.find(function(e){return e.selected});return c?r.a.createElement("div",{className:"existing-items"},n.map(function(e){return r.a.createElement(Hn,Object.assign({key:e.id},e,{dispatch:a,label:nt(e.amount,{absolute:!1}),selectedItem:i}))}),r.a.createElement("div",{className:"item"},r.a.createElement("button",{to:"#",onClick:function(){a(tn({id:t,status:"pending"})),a(en({id:null}))}},Ke(ze.finalize.createItem)))):r.a.createElement("div",{className:"existing-items"},r.a.createElement("div",{className:"item"},r.a.createElement("button",{to:"#",onClick:function(){var e=tn({id:t,status:"showNextItems"});a(e)}},Ke(ze.finalize.revealNextItems(o)))))},Hn=function(e){var t=e.id,a=e.dispatch,n=e.label,c=e.selectedItem,o=c&&c.id===t;return r.a.createElement("div",{className:"item"},r.a.createElement("span",null,n),r.a.createElement("span",null,r.a.createElement("input",{checked:o?"checked":"",name:"next-item",onChange:function(){var e=en({id:t});a(e)},value:t,type:"radio"})))},Kn=function(e){var t=e.dispatch,a=e.item,n=e.month,c=e.nextMonth,o=e.nextYear,i=e.year,l=a.baseItem,u=l.id,s=l.expense,m=l.floatRemaining,d=l.monthly,f=l.name,b=l.remaining,g=ee({month:n,year:i,format:"numericMonthYear"}),E=ee({month:c,year:o,format:"numericMonthYear"}),h=function(e){var a=an({id:u,name:f,amount:l.remaining-e});t(a)},v=void 0===m?(b/100).toFixed(2):m||0,y=function(){var e=[];return Math.abs(parseInt(100*v))>Math.abs(b)+1&&e.push(ze.finalize.exceedsOriginalAmount),s&&v>0&&e.push(ze.finalize.positiveExpenseErrorMessage),!s&&v<0&&e.push(ze.finalize.negativeRevenueErrorMessage),e};return r.a.createElement("div",{className:"finalize-workspace"},r.a.createElement("h4",null,Ke(ze.finalize.carryOver)),r.a.createElement("div",{className:"finalize-carry-over"},r.a.createElement("div",{className:"item-name"},f),r.a.createElement("div",{className:"remaining"},r.a.createElement("div",null,ze.finalize.carryOverFrom(g),":"),r.a.createElement("div",null,r.a.createElement("input",{className:y().length>0?"errors":"",name:"remaining",onChange:function(e){var a=Za(Object(p.a)({},l,{floatRemaining:e.target.value||0}));t(a),h(parseFloat(100*e.target.value))},type:"text",value:v||""}),r.a.createElement(vn,{errors:y()}))),r.a.createElement(zn,{nextItem:a.nextItems[0],nextMonthString:E}),r.a.createElement(Yn,{amount:v,errors:y(),nextItem:a.nextItems[0],nextMonthString:E}),r.a.createElement(Pn,{amount:v,errors:y(),remaining:b}),r.a.createElement("div",{className:"submit-row"},r.a.createElement(Ln,{amount:v,baseItem:l,dispatch:t}),r.a.createElement(Un,{amount:v,budgetCategoryId:l.budget_category_id,baseItemId:u,dispatch:t,errors:y(),monthly:d,nextItem:a.nextItems[0],nextMonth:c,nextYear:o}))))},qn=function(e){return e.item.baseItem.monthly?r.a.createElement(Bn,e):r.a.createElement(Kn,e)},Vn=Object(s.b)(function(e,t){var a=parseInt(t.match.params.month),n=parseInt(t.match.params.year),r=e.budget.finalize,c=r.baseMonth,o=c.isFetched,i=c.month,l=c.year,u=r.extra,s=r.next,m=s.collection;return{isFetched:o,item:e.budget.finalize.baseMonth.collection.filter(function(e){return!e.accrual&&"reviewed"!==e.status}).filter(function(e){return e.expense&&e.remaining<0||!e.expense&&e.remaining>0}).sort(function(e,t){return Math.abs(e.remaining)-Math.abs(t.remaining)}).map(function(e){return{baseItem:e,nextItems:m.filter(function(t){return t.budget_category_id===e.budget_category_id})}})[0],extra:u,month:i||a,nextMonth:s.month,nextYear:s.year,year:l||n}})(function(e){var t=e.dispatch,a=e.extra,n=e.isFetched,c=e.item,o=e.month,i=e.nextMonth,l=e.nextYear,u=e.year;return n?c?r.a.createElement("div",null,r.a.createElement(on,{month:o,year:u}),r.a.createElement("div",{className:"finalize-wrapper"},r.a.createElement(qn,{item:c,dispatch:t,month:o,nextMonth:i,nextYear:l,year:u}),r.a.createElement(Tn,{extra:a}))):r.a.createElement(ln.a,{to:"/budget/finalize/".concat(o,"/").concat(u,"/finish")}):r.a.createElement(ln.a,{to:"/budget/finalize/".concat(o,"/").concat(u,"/start")})}),Jn=Object(s.b)(function(e){return{month:e.budget.metadata.month,year:e.budget.metadata.year}})(function(e){var t=e.month,a=e.year;return r.a.createElement(ln.a,{to:"/budget/".concat(t,"/").concat(a)})}),Xn=function(e){return{type:"budget/categories/FETCHED",payload:e}},$n=function(e){return{type:"budget/categories/RESET",payload:{id:e.id,showForm:!1}}},Zn=function(e){return{type:"budget/categories/TOGGLE_MATURITY_INTERVAL_EDIT_FORM",payload:e}},Qn=function(e){return{type:"budget/categories/TOGGLE_NEW_FORM",payload:e}},er=function(e){return{type:"budget/categories/UPDATED",payload:e}},tr=function(e){return{type:"budget/categories/UPDATE_PROPS",payload:e}},ar=function(e){return{type:"budget/categories/UPDATE_NEW",payload:e}},nr=Object(s.b)(function(e){var t=e.budget.metadata,a=t.month,n=t.year,r=H({month:a,year:n});return{month:a,prev:K({month:a,year:n}),next:r,year:n}})(function(e){var t=e.month,a=e.year,n=e.prev,c=e.next;return r.a.createElement("div",{className:"budget-banner"},r.a.createElement("h2",null,ee({month:t,year:a,format:"monthYear"})),r.a.createElement("div",{className:"budget-links"},r.a.createElement(Ve.a,{to:"/budget/".concat(n.month,"/").concat(n.year)},r.a.createElement(tt,{className:"fas fa-angle-double-left"})," ",ee(Object(p.a)({},n,{format:"numericMonthYear"}))),r.a.createElement(Ve.a,{to:"/budget/".concat(c.month,"/").concat(c.year)},ee(Object(p.a)({},c,{format:"numericMonthYear"}))," ",r.a.createElement(tt,{className:"fas fa-angle-double-right"}))))}),rr=function(e){var t=e.month,a=e.year,n=e.isFuture,c=e.requiresSetUp,o=W({month:t,year:a,format:"monthYear"});return c&&n?r.a.createElement(yr,{linkCopy:ze.menu.setUpLinkText(o),path:"/budget/set-up/".concat(t,"/").concat(a,"/intro")}):null},cr=ze.category,or=ze.item,ir=ze.menu,lr=ir.finalizeLinkText,ur=ir.hide,sr=ir.order,mr=ir.show,dr=ir.title,pr=or.cleared,fr=or.items,br=cr.accruing,gr=cr.categories,Er=cr.monthly,hr=function(){return r.a.createElement("h3",null,"\u2022"," ",Ke(dr))},vr=function(e){var t=e.dispatch,a=e.isEndOfMonth,n=e.isFuture,c=e.month,o=e.requiresCloseOut,i=e.requiresSetUp,l=e.showAccruals,u=e.showCleared,s=e.sortOrder,m=e.year,d="byName"===s?"byAmount":"byName";return r.a.createElement("div",null,r.a.createElement(rr,{dispatch:t,month:c,year:m,isFuture:n,requiresSetUp:i}),r.a.createElement(Or,{isEndOfMonth:a,month:c,requiresCloseOut:o,year:m}),r.a.createElement(yr,{linkCopy:gr,path:"/budget/categories"}),r.a.createElement(yr,{linkCopy:Ye,path:"/budget/icons"}),r.a.createElement("hr",null),r.a.createElement(yr,{iconClassName:"fas fa-exchange-alt fa-rotate-90",linkCopy:"".concat(sr," ").concat(d.replace(/([A-Z])/g," $1")),onClick:function(e){e.preventDefault();var a={type:"budget/CHANGE_ITEM_SORT_ORDER",payload:{sortOrder:d}};t(a)}}),r.a.createElement(yr,{iconClassName:u?"far fa-eye-slash":"far fa-eye",linkCopy:"".concat(u?ur:mr," ").concat(pr," ").concat(Er," ").concat(fr),onClick:function(e){e.preventDefault();var a={type:"budget/TOGGLE_CLEARED_ITEMS",payload:{showCleared:!u}};t(a)},showCleared:u}),r.a.createElement(yr,{onClick:function(e){e.preventDefault();var a={type:"budget/TOGGLE_CLEARED_ITEMS",payload:{showAccruals:!l}};t(a)},iconClassName:l?"fas fa-book-open":"fas fa-book",linkCopy:"".concat(l?ur:mr," ").concat(br," ").concat(fr),showAccruals:l}))},yr=function(e){var t=e.iconClassName,a=e.linkCopy,n=e.onClick,c=e.path||"#";return r.a.createElement(Ve.a,{to:c,onClick:n},r.a.createElement("div",{className:"budget-action"},r.a.createElement("strong",null,"\u25e6"," ",r.a.createElement(tt,{className:t})," ",Ke(a))))},Or=function(e){var t=e.isEndOfMonth,a=e.month,n=e.requiresCloseOut,c=e.year,o=lr(ee({month:a,year:c,format:"monthYear"}));return t&&n?r.a.createElement(yr,{linkCopy:o,path:"/budget/finalize/".concat(a,"/").concat(c,"/start")}):null},_r=Object(s.b)(function(e,t){var a=Q(new Date(t.year,t.month,0));return Object(p.a)({isEndOfMonth:a},e.budget.menuOptions,t)})(function(e){return r.a.createElement("nav",{className:"budget-actions"},r.a.createElement(hr,null),r.a.createElement(vr,e))}),Nr=function(e){var t=e.title;return r.a.createElement("h4",{className:"group-heading"},"\u2022","  ",t)},wr=function(e){var t=e.collection,a=e.title;return t.length>0?r.a.createElement("div",{className:"budget-group"},r.a.createElement(Nr,{title:a}),t.map(function(e){return r.a.createElement(jr,Object.assign({key:e.id},e))})):null},jr=function(e){var t=e.amount,a=e.expense,n=e.difference,c=e.icon_class_name,o=e.name,i=e.spent,l=ze.item.budgeted,u=ze.shared,s=u.deposited,m=u.minus,d=u.plus,p=0===n?"":n>0?m:d;return r.a.createElement("div",{className:"budget-item-cleared"},r.a.createElement("div",{className:"cleared-item-name"},r.a.createElement("div",null,r.a.createElement(tt,{className:"fas fa-caret-down"})," ",r.a.createElement("strong",null,o)," ",r.a.createElement(tt,{className:c}))),r.a.createElement("div",{className:"cleared-item-wrapper"},r.a.createElement("em",null,Ke(l),":"),nt(t,{absolute:!0})),r.a.createElement("div",{className:"cleared-item-wrapper"},r.a.createElement("em",null,Ke(a?ze.shared.spent:s),":"),nt(i,{absolute:!0})),r.a.createElement("div",{className:"cleared-item-wrapper"},r.a.createElement("em",null,Ke(ze.shared.difference),":"),p,nt(n,{absolute:!0})))},Tr=Object(s.b)(function(e){var t=e.budget.monthly.collection,a=e.budget.menuOptions.showCleared,n=function(e,t){return Math.abs(t.amount)-Math.abs(e.amount)},r=function(e,t){return e.name<t.name?-1:e.name>t.name?1:n(e,t)},c=e.budget.menuOptions.sortOrder,o=function(){switch(c){case"byAmount":return n;case"byName":default:return r}},i=t.filter(function(e){return!e.expense&&e.isCleared}).sort(o());return{expenses:t.filter(function(e){return e.expense&&e.isCleared}).sort(o()),revenues:i,showCleared:a}})(function(e){var t=e.expenses,a=e.revenues;return e.showCleared?r.a.createElement("div",null,r.a.createElement("h3",null,Ke(ze.item.cleared)),r.a.createElement(wr,{collection:a,title:Ke(ze.category.revenues)}),r.a.createElement(wr,{collection:t,title:Ke(ze.category.expenses)})):null}),Ir=function(e){var t=e.deletable,a=e.deleteItem,n=e.updateItem;return t&&!n?r.a.createElement(Ve.a,{to:"#",className:"fas fa-trash-alt",onClick:a}):null},Dr=Object(s.b)(function(e,t){return t})(function(e){var t=e.id,a=e.amount,n=e.dispatch,c=e.errors,o=e.floatAmount,i=e.month,l=e.name,u=e.year,s=function(e){e.preventDefault();var r=dn({id:t,floatAmount:(a/100).toFixed(2),updateItem:!1});n(r)},m=function(e){e.preventDefault();var r=je({route:"budget-items-events-index"}),c=JSON.stringify({events:[{budget_item_id:t,amount:at(zt(o)),event_type:"item_adjust",month:i,year:u}]}),s=At({eventType:"budget-item-update",id:t,month:i,year:u,category:l,newAmount:zt(o),originalAmount:(a/100).toFixed(2)});Me(r,c,{onSuccess:function(e){var t={type:"budget/UPDATE_MONTHLY_ITEM",payload:Object(p.a)({},e[0].item,{floatAmount:null,updateItem:!1,errors:[]})};n(t)},onFailure:function(e){var a=dn({id:t,errors:{amount:e.errors[0]["adjust_item_form.0.amount"]}});n(a)},event:s})};return r.a.createElement("div",null,r.a.createElement("div",{className:"budget-item-amount"},r.a.createElement("input",{autcomplete:"false",autoFocus:!0,className:c.amount?"errors":"",name:"amount",onChange:function(e){e.preventDefault();var a=dn({id:t,floatAmount:e.target.value});n(a)},onKeyDown:function(e){13===e.which&&(e.target.value===(a/100).toFixed(2)?s(e):m(e))},value:o})," ",r.a.createElement(Ve.a,{to:"#",onClick:m,className:"fas fa-check"})," ",r.a.createElement(Ve.a,{to:"#",onClick:s,className:"fas fa-times"})),r.a.createElement(vn,{errors:c.amount||[]}))}),xr=Object(s.b)(function(e,t){return t})(function(e){var t=e.id,a=e.absolute,n=e.amount,c=e.budget_category_id,o=e.dispatch,i=e.errors,l=e.month,u=e.name,s=e.updateItem,m=e.year,d=e.floatAmount||(n/100).toFixed(2);return s?r.a.createElement(Dr,{id:t,amount:n,budget_category_id:c,errors:i,floatAmount:d,month:l,name:u,year:m}):r.a.createElement("div",{className:"update-amount"},r.a.createElement(Ve.a,{to:"#",onClick:function(e){e.preventDefault();var a=dn({id:t,updateItem:!0,errors:[]});o(a)}},nt(n,{absolute:a})))}),Cr=Object(s.b)(function(e,t){var a=e.budget.metadata,n=a.month,r=a.year;return Object(p.a)({month:n,year:r},t)})(function(e){return r.a.createElement("div",{className:"budget-item"},r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"caret"},r.a.createElement(tt,{className:"fas fa-caret-right"})),r.a.createElement("div",{className:"budget-item-description"},e.name," ",r.a.createElement(tt,{className:e.icon_class_name})),r.a.createElement("div",{className:"budget-item-amounts"},r.a.createElement(xr,Object.assign({absolute:!0},e,{remaining:e.amount}))),r.a.createElement("div",{className:"item-delete-button"},r.a.createElement(Ir,{deletable:e.deletable,deleteItem:function(t){t.preventDefault();var a=e.amount,n=e.budget_category_id,r=e.id,c=e.name,o=e.month,i=e.year,l=ee({month:o,year:i,format:"shortMonthYear"});if(window.confirm(ze.item.deleteConfirmationMessage(c,l))){var u=je({route:"budget-item-show",id:r,budgetCategoryId:n}),s=At({eventType:"budget-item-delete",id:r,category:c,amount:a,month:o,year:i});Ae(u,s,function(){return e.dispatch({type:"budget/REMOVE_MONTHLY_ITEM",payload:r})})}},updateItem:e.updateItem}))))}),Ar=function(e){var t=e.collection,a=e.title;return t.length>0?r.a.createElement("div",{className:"budget-group"},r.a.createElement(Nr,{title:a}),t.map(function(e){return r.a.createElement(Cr,Object.assign({key:e.id},e))})):null},Mr=Object(s.b)(function(e){var t=e.budget.categories.collection.filter(function(e){return e.monthly}),a=t.map(function(e){return{value:e.id,label:e.name}}).sort(function(e,t){return e.label.toLowerCase()<t.label.toLowerCase()?-1:1}),n=e.budget.monthly.newItem,r=a.find(function(e){return e.value===n.budget_category_id}),c=e.budget.metadata,o=c.month,i=c.year,l=n.errors.map(function(e){return e.amount});return{amount:n.amount,budget_category_id:n.budget_category_id,categories:t,errors:l,fetched:e.budget.categories.fetched,month:o,options:a,showForm:e.budget.monthly.showForm,value:r,year:i}})(function(e){var t=e.amount,a=e.budget_category_id,n=e.categories,c=e.dispatch,o=e.errors,i=e.month,l=e.options,u=e.showForm,s=e.value,m=e.year,d=function(e){e.preventDefault();var n=je({route:"budget-items-events-index"}),r=JSON.stringify({events:[{amount:at(zt(t)),budget_category_id:a,event_type:"item_create",month:i,year:m}]});Me(n,r,{event:function(e){return At({eventType:"budget-item-create"})(e[0])},onSuccess:function(e){c(sn(e[0].item)),c(En({showForm:!1})),c(pn({amount:"",budget_category_id:null}))},onFailure:function(e){var t=pn({errors:[{amount:e.errors[0]["create_item_form.0.amount"]}]});c(t)}})};return u?r.a.createElement("div",{className:"new-budget-item"},r.a.createElement("div",{className:"select-wrapper"},r.a.createElement(Yt.a,{value:s,placeholder:"Category",options:l,onChange:function(e){var t=n.find(function(t){return t.id===e.value}),a=pn({budget_category_id:e.value,amount:parseFloat(t.default_amount/100).toFixed(2)});c(a)},className:"budget-category-select-container",classNamePrefix:"budget-category-select"})),r.a.createElement("div",null,r.a.createElement("input",{name:"amount",className:o.length>0?"errors new-item-amount":"new-item-amount",placeholder:ze.item.amount,value:t,onChange:function(e){var t=pn({amount:e.target.value});c(t)},onKeyDown:function(e){13===e.which&&d(e)},size:"8"}),r.a.createElement(vn,{errors:o})),r.a.createElement("button",{className:"new-item-submit",type:"submit",name:"monthly-item-submit",onClick:d},Ke(ze.item.createButtonText))):null}),kr=Object(s.b)(function(e){return{showForm:e.budget.monthly.showForm}})(function(e){var t=ze.item.items,a=ze.category.monthly,n=e.showForm?"fa fa-times-circle":"fa fa-plus-circle",c="budget-group-header ".concat(e.showForm?"":"underlined");return r.a.createElement("div",{className:c},r.a.createElement("div",{className:"title"},r.a.createElement("h3",null,Ke("".concat(a," ").concat(t)))),r.a.createElement(Ve.a,{to:"#",onClick:e.showForm?function(t){t.preventDefault(),e.dispatch(En({showForm:!1})),e.dispatch(pn({amount:"",budget_category_id:null,errors:[]}))}:function(t){t.preventDefault(),e.dispatch(En({showForm:!0}))},className:n}),r.a.createElement(Mr,null))}),Fr=Object(s.b)(function(e){var t=e.budget.monthly.collection,a=e.budget.menuOptions.showAccruals,n=function(e){return!e.accrual||e.matureAccrual||a},r=function(e,t){return Math.abs(t.amount)-Math.abs(e.amount)},c=function(e,t){return e.name<t.name?-1:e.name>t.name?1:r(e,t)},o=e.budget.menuOptions.sortOrder,i=function(){switch(o){case"byAmount":return r;case"byName":default:return c}};return{revenues:t.filter(function(e){return!e.expense&&!e.isCleared}).filter(n).sort(i()),expenses:t.filter(function(e){return e.expense&&!e.isCleared}).filter(n).sort(i())}})(function(e){return r.a.createElement("div",{className:"monthly-items"},r.a.createElement(kr,null),r.a.createElement(Ar,{collection:e.revenues,title:Ke(ze.category.revenues)}),r.a.createElement(Ar,{collection:e.expenses,title:Ke(ze.category.expenses)}),r.a.createElement(Tr,null))}),Sr=function(e){var t=e.amount,a=e.showDetail,n=e.total_remaining;return a?r.a.createElement("span",null,nt(t)):r.a.createElement("span",null,nt(n))},Rr=function(e){var t=e.collapseDetail,a=e.expandDetail;return e.showDetail?r.a.createElement(Ve.a,{to:"#",className:"fas fa-caret-down",onClick:t}):r.a.createElement(Ve.a,{to:"#",className:"fas fa-caret-right",onClick:a})},Pr=function(e){var t=ze.shared,a=t.minus,n=t.plus,c=e.overUnderBudgetAmount,o=e.showDetail,i=e.spent,l=e.total_remaining,u=c>=0?n:a,s=i>=0?n:a;return o?r.a.createElement("div",null,r.a.createElement("div",null,u," ",nt(c,{absolute:!0})),r.a.createElement("div",{className:"detail-amount underscore"},s," ",nt(i,{absolute:!0})),r.a.createElement("div",null,nt(l,{absolute:!1}))):null},Lr=function(e){var t=e.descriptor,a=e.spentOrDeposited;return e.showDetail?r.a.createElement("div",null,r.a.createElement("div",null,t),r.a.createElement("div",{className:"spent-or-deposited"},a),r.a.createElement("div",{className:"budget-item-difference"},Ke(ze.shared.remaining))):null},zr=ze.item,Ur=zr.budgeted,Yr=zr.perDay,Br=zr.perWeek,Wr=ze.shared.remaining,Gr=function(e){return r.a.createElement("div",{className:"per-details"},r.a.createElement("div",{className:"detail-group"},r.a.createElement("div",{className:"title"},Ke(Ur)),r.a.createElement("div",{className:"per-detail"},r.a.createElement("div",{className:"description"},Ke(Yr),":"),r.a.createElement("div",{className:"amount"},nt(e.budgetedPerDay,{absolute:!0}))),r.a.createElement("div",{className:"per-detail"},r.a.createElement("div",{className:"description"},Ke(Br),":"),r.a.createElement("div",{className:"amount"},nt(e.budgetedPerWeek,{absolute:!0})))),r.a.createElement("div",{className:"detail-group"},r.a.createElement("div",{className:"title"},Ke(Wr)),r.a.createElement("div",{className:"per-detail"},r.a.createElement("div",{className:"description"},Ke(Yr),":"),r.a.createElement("div",{className:"amount"},nt(e.remainingPerDay,{absolute:!0}))),r.a.createElement("div",{className:"per-detail"},r.a.createElement("div",{className:"description"},Ke(Br),":"),r.a.createElement("div",{className:"amount"},nt(e.remainingPerWeek,{absolute:!0})))))},Hr=We.account,Kr=We.amount,qr=We.date,Vr=We.description,Jr=function(){return r.a.createElement("div",{className:"budget-item-transaction-row"},r.a.createElement("div",{className:"budget-transaction-cell"},Ke(qr)),r.a.createElement("div",{className:"budget-transaction-cell"},Ke(Hr)),r.a.createElement("div",{className:"budget-transaction-cell"},Ke(Vr)),r.a.createElement("div",{className:"budget-transaction-cell"},Ke(Kr)))},Xr=function(e){var t=We.pending,a=e.account_name,n=e.amount,c=e.clearance_date,o=e.description||e.budgetCategory;return r.a.createElement("div",{className:"budget-item-transaction-row"},r.a.createElement("div",{className:"budget-transaction-cell clearance-date"},r.a.createElement("span",{className:"long-date"},c?G(c):t),r.a.createElement("span",{className:"short-date"},c?G(c,{format:"m/d"}):t)),r.a.createElement("div",{className:"budget-transaction-cell"},a),r.a.createElement("div",{className:"budget-transaction-cell"},o),r.a.createElement("div",{className:"budget-transaction-cell amount"},nt(n)))},$r=function(e){var t=e.budgetCategory,a=e.collection;return a.length>0?r.a.createElement("div",{className:"budget-transactions"},r.a.createElement(Jr,null),a.map(function(e){return r.a.createElement(Xr,Object.assign({key:e.id},e,{budgetCategory:t}))})):null},Zr=Object(s.b)(function(e){var t=new Date,a=new Date(t.getTime()-6e4*t.getTimezoneOffset()).toISOString().slice(0,10),n=e.budget.discretionary.collection.sort(function(e,t){return e.clearance_date===t.clearance_date?0:null===e.clearance_date?t.clearance_date>a?-1:1:null===t.clearance_date?e.clearance_date>a?1:-1:e.clearance_date>t.clearance_date?1:-1}),r=401===e.api.status;return Object(p.a)({},e.budget.metadata,e.budget.discretionary,{isApiUnauthorized:r,collection:n})})(function(e){var t=e.amount,a=e.isApiUnauthorized,n=e.collection,c=e.days_remaining,o=e.dispatch,i=e.fetchedTransactions,l=e.month,u=e.showDetail,s=e.total_remaining,m=e.total_days,d=e.year;if(!u)return null;if(!a&&u&&!i){var p=je({route:"discretionary-transactions-index",query:{month:l,year:d}});Ce(p,function(e){return o({type:"budget/FETCHED_DISCRETIONARY_TRANSACTIONS",payload:e})})}var f=Math.floor(t/m),b=Math.floor(s/c);return r.a.createElement("div",{className:"detail-wrapper"},r.a.createElement("hr",null),r.a.createElement(Gr,{budgetedPerDay:f,budgetedPerWeek:7*f,remainingPerDay:b,remainingPerWeek:7*b}),r.a.createElement("hr",null),r.a.createElement($r,{budgetCategory:Ke(ze.discretionary.title),collection:n}))}),Qr=Object(s.b)(function(e){return e.budget.discretionary})(function(e){var t=ze.discretionary,a=t.aheadOfBudget,n=t.overBudget,c=t.title,o=ze.shared,i=o.deposited,l=o.spent,u=e.overUnderBudgetAmount>0?a:n,s=Ke(e.spent>=0?i:l);return r.a.createElement("div",{className:"budget-item"},r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"caret"},r.a.createElement(Rr,{showDetail:e.showDetail,expandDetail:function(t){t.preventDefault(),e.dispatch(gn({showDetail:!0}))},collapseDetail:function(t){t.preventDefault(),e.dispatch(gn({showDetail:!1}))}})),r.a.createElement("div",{className:"budget-item-description"},r.a.createElement("div",{className:"item-name"},Ke(c)," ",r.a.createElement(tt,{className:"fas fa-piggy-bank"})),r.a.createElement(Lr,{descriptor:u,showDetail:e.showDetail,spentOrDeposited:s})),r.a.createElement("div",{className:"budget-item-amounts"},r.a.createElement(Sr,{amount:e.amount,showDetail:e.showDetail,total_remaining:e.total_remaining}),r.a.createElement(Pr,e)),r.a.createElement("div",{className:"item-delete-button"})),r.a.createElement(Zr,e))}),ec=Object(s.b)(function(e){var t=e.budget.weekly.collection.map(function(e){return e.budget_category_id}),a=e.budget.categories.collection.filter(function(e){return!e.monthly&&!t.includes(e.id)}),n=a.map(function(e){return{value:e.id,label:e.name}}).sort(function(e,t){return e.label.toLowerCase()<t.label.toLowerCase()?-1:1}),r=e.budget.weekly.newItem,c=n.find(function(e){return e.value===r.budget_category_id}),o=e.budget.metadata,i=o.month,l=o.year,u=r.errors.map(function(e){return e.amount});return{amount:r.amount,categories:a,budget_category_id:r.budget_category_id,errors:u,fetched:e.budget.categories.fetched,month:i,options:n,showForm:e.budget.weekly.showForm,value:c,year:l}})(function(e){var t=e.amount,a=e.budget_category_id,n=e.categories,c=e.dispatch,o=e.errors,i=e.month,l=e.options,u=e.showForm,s=e.value,m=e.year,d=function(e){e.preventDefault();var n=je({route:"budget-items-events-index"}),r=JSON.stringify({events:[{amount:at(zt(t)),budget_category_id:a,event_type:"item_create",month:i,year:m}]});Me(n,r,{onSuccess:function(e){c(mn(e[0].item)),c(hn({showForm:!1})),c(fn({amount:"",budget_category_id:null}))},onFailure:function(e){var t=fn({errors:[{amount:e.errors[0]["create_item_form.0.amount"]}]});c(t)},event:function(e){return At({eventType:"budget-item-create"})(e[0])}})};return u?r.a.createElement("div",{className:"new-budget-item"},r.a.createElement("div",{className:"select-wrapper"},r.a.createElement(Yt.a,{value:s,placeholder:"Category",options:l,onChange:function(e){var t=n.find(function(t){return t.id===e.value}),a=fn({budget_category_id:e.value,amount:parseFloat(t.default_amount/100).toFixed(2)});c(a)},className:"budget-category-select-container",classNamePrefix:"budget-category-select"})),r.a.createElement("div",null,r.a.createElement("input",{name:"amount",className:o.length>0?"errors new-item-amount":"new-item-amount",placeholder:"amount",value:t,onChange:function(e){var t=fn({amount:e.target.value});c(t)},onKeyDown:function(e){13===e.which&&d(e)},size:"8"}),r.a.createElement(vn,{errors:o})),r.a.createElement("button",{className:"new-item-submit",type:"submit",name:"weekly-item-submit",onClick:d},Ke(ze.item.createButtonText))):null}),tc=Object(s.b)(function(e){return{showForm:e.budget.weekly.showForm}})(function(e){var t=e.showForm?"fa fa-times-circle":"fa fa-plus-circle",a="budget-group-header ".concat(e.showForm?"":"underlined");return r.a.createElement("div",{className:a},r.a.createElement("div",{className:"title"},r.a.createElement("h3",null,Ke("".concat(ze.category.weekly," ").concat(ze.item.items)))),r.a.createElement(Ve.a,{to:"#",onClick:e.showForm?function(t){t.preventDefault(),e.dispatch(hn({showForm:!1})),e.dispatch(fn({amount:"",budget_category_id:null,errors:[]}))}:function(t){t.preventDefault(),e.dispatch(hn({showForm:!0}))},className:t}),r.a.createElement(ec,null))}),ac=Object(s.b)(function(e,t){return Object(p.a)({month:e.budget.metadata.month,year:e.budget.metadata.year},t)})(function(e){var t=e.id,a=e.amount,n=e.dispatch,c=e.floatAmount,o=e.errors,i=e.month,l=e.name,u=e.spent,s=e.year,m=function(e){e.preventDefault();var r=a-u,c=bn({id:t,floatAmount:(a/100).toFixed(2),difference:r,updateItem:!1});n(c)},d=function(e){e.preventDefault();var r=je({route:"budget-items-events-index"}),o=JSON.stringify({events:[{budget_item_id:t,amount:at(zt(c)),event_type:"item_adjust",month:i,year:s}]}),u=At({eventType:"budget-item-update",id:t,month:i,year:s,category:l,newAmount:zt(c),originalAmount:(a/100).toFixed(2)});Me(r,o,{onSuccess:function(e){var t={type:"budget/UPDATE_WEEKLY_ITEM",payload:Object(p.a)({},e[0].item,{floatAmount:null,updateItem:!1,errors:{}})};n(t)},onFailure:function(e){var a=bn({id:t,errors:{amount:e.errors[0]["adjust_item_form.0.amount"]}});n(a)},event:u})};return r.a.createElement("div",null,r.a.createElement("div",{className:"budget-item-amount"},r.a.createElement("input",{autcomplete:"false",autoFocus:!0,className:o.amount?"errors":"",name:"amount",onKeyDown:function(e){13===e.which&&(e.target.value===(a/100).toFixed(2)?m(e):d(e))},onChange:function(e){e.preventDefault();var a=at(e.target.value)-u,r=bn({id:t,floatAmount:e.target.value,difference:a});n(r)},value:c})," ",r.a.createElement(Ve.a,{to:"#",onClick:d,className:"fas fa-check"})," ",r.a.createElement(Ve.a,{to:"#",onClick:m,className:"fas fa-times"})),r.a.createElement(vn,{errors:o.amount||[]}))}),nc=Object(s.b)(function(e,t){return t})(function(e){var t=e.id,a=e.absolute,n=e.amount,c=e.difference,o=e.errors,i=e.expense,l=e.overUnderBudget,u=e.showDetail,s=ze.shared,m=s.minus,d=s.plus,p=function(a){a.preventDefault(),e.dispatch(bn({id:t,updateItem:!0,showDetail:!0,errors:o||{}}))},f=l?i?m:d:"";return u?r.a.createElement("div",{className:"update-amount"},r.a.createElement(Ve.a,{to:"#",onClick:p},nt(n,{absolute:a}))):r.a.createElement("div",{className:"update-amount"},r.a.createElement(Ve.a,{to:"#",onClick:p},f," ",nt(c,{absolute:a})))}),rc=Object(s.b)(function(e,t){return t})(function(e){var t=e.id,a=e.absolute,n=e.amount,c=e.budget_category_id,o=e.difference,i=e.errors,l=e.expense,u=e.floatAmount,s=e.name,m=e.overUnderBudget,d=e.showDetail,p=e.spent;return e.updateItem?r.a.createElement(ac,{id:t,amount:n,budget_category_id:c,errors:i,floatAmount:u,name:s,spent:p}):r.a.createElement(nc,{id:t,absolute:a,amount:n,difference:o,expense:l,overUnderBudget:m,showDetail:d})}),cc=function(e){var t=e.difference,a=e.diffOperator,n=e.operator,c=e.showDetail,o=e.spent;return c?r.a.createElement("div",null,r.a.createElement("div",{className:"detail-amount underscore"},n," ",nt(o,{absolute:!0})),r.a.createElement("div",{className:"detail-amount"},a," ",nt(t,{absolute:!0}))):null},oc=ze.shared,ic=oc.minus,lc=oc.plus,uc=function(e){var t=e.amount,a=e.budgetedAmount,n=e.budget_item_event_type,c=e.remaining,o=[ze.eventLabels[n],""],i=a-t,l=t<0?ic:lc,u="".concat(nt(c-t)," (").concat(l," ").concat(nt(t,{absolute:!0}),") = ").concat(nt(c)),s="".concat(nt(i)," (").concat(l," ").concat(nt(t,{absolute:!0}),") = ").concat(nt(a));return r.a.createElement("div",{className:"budget-item-event"},r.a.createElement(mc,Object.assign({},e,{items:o})),r.a.createElement("div",{className:"budget-item-event-row bottom"},r.a.createElement("div",{className:"budget-item-cell small amount"},r.a.createElement(dc,{string:Ke(ze.shared.remaining)}),r.a.createElement(dc,{string:u})),r.a.createElement("div",{className:"budget-item-cell small amount"},r.a.createElement(dc,{string:Ke(ze.item.budgeted)}),r.a.createElement(dc,{string:s}))))},sc=function(e){var t=e.account_name,a=e.amount,n=e.budgetedAmount,c=e.remaining,o=c+a,i=[e.description||e.budgetCategory,t],l=a<=0?lc:ic;return r.a.createElement("div",{className:"budget-item-event"},r.a.createElement(mc,Object.assign({},e,{items:i})),r.a.createElement("div",{className:"budget-item-event-row bottom"},r.a.createElement("div",{className:"budget-item-cell small amount"},r.a.createElement(dc,{string:Ke(ze.item.budgeted)}),r.a.createElement("div",{className:"budget-item-atom"},nt(n))),r.a.createElement("div",{className:"budget-item-cell small amount"},r.a.createElement(dc,{string:Ke(ze.shared.remaining)}),r.a.createElement("div",{className:"budget-item-atom"},nt(o)," ","(",l," ",nt(a,{absolute:!0}),")"," ","="," ",nt(c)))))},mc=function(e){var t=e.amount,a=e.created_at,n=e.items;return r.a.createElement("div",{className:"budget-item-event-row top"},r.a.createElement("div",{className:"budget-item-event-row-left"},r.a.createElement("div",{className:"budget-item-cell created-at-date"},r.a.createElement("span",{className:"long-date"},G(a)),r.a.createElement("span",{className:"short-date"},G(a,{format:"m/d"}))),n.map(function(e,t){return r.a.createElement("div",{className:"budget-item-cell",key:t},e)})),r.a.createElement("div",{className:"budget-item-cell amount"},nt(t)))},dc=function(e){var t=e.string;return r.a.createElement("div",{className:"budget-item-atom"},t)},pc=function(e){return e.events.map(function(e){return e.isTransaction?r.a.createElement(sc,Object.assign({key:e.id},e)):r.a.createElement(uc,Object.assign({key:e.id},e))})},fc=Object(s.b)(function(e,t){var a=new Date,n=new Date(a.getTime()-6e4*a.getTimezoneOffset()).toISOString().slice(0,10),r=t.collection.sort(function(e,t){return e.clearance_date===t.clearance_date?0:null===e.clearance_date?t.clearance_date>n?-1:1:null===t.clearance_date?e.clearance_date>n?1:-1:e.clearance_date>t.clearance_date?1:-1}),c=t.events,o=0,i=0,l=[].concat(Object(d.a)(c),Object(d.a)(r)).map(function(e){return Object(p.a)({},e,{isTransaction:Object(e).hasOwnProperty("transaction_entry_id")})}).sort(function(e,t){return e.created_at>t.created_at?1:-1}).map(function(e){var t=e.amount;return o+=e.isTransaction?0:t,i+=e.isTransaction?-1*t:t,Object(p.a)({},e,{budgetedAmount:o,remaining:i})}),u=401===e.api.status;return Object(p.a)({},t,{isApiUnauthorized:u,collection:r,events:c,combinedEvents:l})})(function(e){var t=e.id,a=e.budget_category_id,n=e.budgetedPerDay,c=e.budgetedPerWeek,o=e.collection,i=e.combinedEvents,l=e.dispatch,u=e.events,s=e.isApiUnauthorized,m=e.remainingPerDay,d=e.remainingPerWeek,p=e.showDetail,f=e.transaction_count;if(!p)return null;if(!s&&o.length<f){var b=je({route:"budget-item-transactions-index",id:t,budgetCategoryId:a});return Ce(b,function(e){return l({type:"budget/FETCHED_WEEKLY_TRANSACTIONS",payload:{id:t,collection:e}})}),null}if(!s&&0===u.length){var g=je({route:"budget-item-events-index",id:t,budgetCategoryId:a});Ce(g,function(e){return l({type:"budget/FETCHED_WEEKLY_BUDGET_ITEM_EVENTS",payload:{id:t,events:e}})})}return r.a.createElement("div",{className:"detail-wrapper"},r.a.createElement("hr",null),r.a.createElement(Gr,{budgetedPerDay:n,budgetedPerWeek:c,remainingPerDay:m,remainingPerWeek:d}),r.a.createElement("hr",null),r.a.createElement(pc,{events:i}))}),bc=function(e){var t=e.descriptor;return e.showDetail?r.a.createElement("div",null,r.a.createElement("div",{className:"spent-or-deposited"},Ke(t)),r.a.createElement("div",{className:"budget-item-difference"},Ke(ze.shared.remaining))):null},gc=Object(s.b)(function(e,t){return t})(function(e){var t=ze.shared,a=t.deposited,n=t.minus,c=t.plus,o=e.id,i=e.amount,l=e.budget_category_id,u=e.daysRemaining,s=e.difference,m=e.dispatch,d=e.icon_class_name,p=e.expense,f=e.name,b=e.overUnderBudget,g=e.month,E=e.showDetail,h=e.spent,v=e.totalDays,y=e.transaction_count,O=e.updateItem,_=e.year,N=ze.item.deleteConfirmationMessage,w=function(t){t.preventDefault(),m(bn({id:e.id,showDetail:!0}))},j=h>0?a:ze.shared.spent,T=h>0&&e.expense?c:n,I=b?p?n:c:"",D=0===y,x=Math.floor(i/v),C=7*x,A=Math.floor(e.remaining/u),M=7*A;return r.a.createElement("div",{className:"budget-item"},r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"caret"},r.a.createElement(Rr,{showDetail:E,expandDetail:w,collapseDetail:function(t){t.preventDefault(),m(bn({id:e.id,showDetail:!1}))}})),r.a.createElement("div",{className:"budget-item-description"},r.a.createElement("div",{className:"item-name"},f," ",r.a.createElement(tt,{className:d})),r.a.createElement(bc,{descriptor:j,showDetail:E})),r.a.createElement("div",{className:"budget-item-amounts"},r.a.createElement(rc,Object.assign({expandDetail:w,absolute:!0},e)),r.a.createElement(cc,{difference:s,diffOperator:I,operator:T,showDetail:E,spent:h})),r.a.createElement("div",{className:"item-delete-button"},r.a.createElement(Ir,{deletable:D,deleteItem:function(e){e.preventDefault();var t=ee({month:g,year:_,format:"shortMonthYear"});if(window.confirm(N(f,t))){var a=je({route:"budget-item-show",id:o,budgetCategoryId:l}),n=At({eventType:"budget-item-delete",id:o,category:f,amount:i,month:g,year:_});Ae(a,n,function(){return m({type:"budget/REMOVE_WEEKLY_ITEM",payload:o})})}},updateItem:O}))),r.a.createElement(fc,Object.assign({},e,{budgetedPerDay:x,budgetedPerWeek:C,remainingPerDay:A,remainingPerWeek:M})))}),Ec=function(e){var t=e.collection,a=e.daysRemaining,n=e.title,c=e.totalDays;return t.length>0?r.a.createElement("div",{className:"budget-group"},r.a.createElement(Nr,{title:n}),t.map(function(e){return r.a.createElement(gc,Object.assign({key:e.id},e,{daysRemaining:a,totalDays:c}))})):null},hc=Object(s.b)(function(e){var t=e.budget.weekly.collection,a=e.budget.menuOptions.showAccruals,n=e.budget.metadata,r=n.days_remaining,c=n.total_days,o=function(e){return!e.accrual||e.matureAccrual||a},i=function(e,t){var a=e.amount-e.spent,n=t.amount-t.spent;return a===n?0:a>0&&n>0?n-a:a>0?1:n>0?-1:a-n},l=function(e,t){return e.name<t.name?-1:e.name>t.name?1:void i(e,t)},u=e.budget.menuOptions.sortOrder,s=function(){switch(u){case"byAmount":return i;case"byName":default:return l}};return{daysRemaining:r,expenses:t.filter(function(e){return e.expense}).filter(o).sort(s()),revenues:t.filter(function(e){return!e.expense}).filter(o).sort(s()),totalDays:c}})(function(e){return r.a.createElement("div",{className:"weekly-items"},r.a.createElement(tc,null),r.a.createElement("div",{className:"budget-group"},r.a.createElement(Nr,{title:Ke(ze.discretionary.title)}),r.a.createElement(Qr,null)),r.a.createElement(Ec,{collection:e.revenues,daysRemaining:e.daysRemaining,title:Ke(ze.category.revenues),totalDays:e.totalDays}),r.a.createElement(Ec,{collection:e.expenses,daysRemaining:e.daysRemaining,title:Ke(ze.category.expenses),totalDays:e.totalDays}))}),vc=Object(s.b)(function(e,t){var a=parseInt(t.match.params.month),n=parseInt(t.match.params.year),r=e.budget.metadata.month===a&&e.budget.metadata.year===n,c=new Date,o=n>c.getFullYear()||n===c.getFullYear()&&a>c.getMonth()+1,i=e.budget.categories.fetched,l=401===e.api.status;return Object(p.a)({},e.budget,{isApiUnauthorized:l,categoresWereFetched:i,isCurrent:r,isFuture:o,month:a,year:n})})(function(e){var t=e.isApiUnauthorized,a=e.categoresWereFetched,n=e.dispatch,c=e.isCurrent,o=e.isFuture,i=e.itemsFetched,l=e.metadata,u=e.month,s=e.year;if(!t&&(!i||!c)){var m=je({route:"budget-items-index",query:{month:u,year:s}});Ce(m,function(e){return n({type:"budget/ITEMS_FETCHED",payload:e})})}if(!t&&i&&!a){var d=je({route:"budget-categories-index"});Ce(d,function(e){return n(Xn(e))})}return r.a.createElement("div",{className:"budget"},r.a.createElement(nr,null),r.a.createElement(hc,null),r.a.createElement(Fr,null),r.a.createElement(_r,{month:u,year:s,isFuture:o,requiresCloseOut:!l.is_closed_out,requiresSetUp:!l.is_set_up}))}),yc=function(e){return{type:"budget/setup/ADD_ITEM",payload:e}},Oc=function(e){return{type:"budget/setup/EDIT_NEW",payload:e}},_c=function(e){return{type:"budget/setup/MARK_FOR_INCLUSION",payload:e}},Nc=function(e){return{type:"budget/setup/MARK_REVIEWED",payload:e}},wc=function(e){var t=e.amount;return r.a.createElement("div",{className:"setup-discretionary"},r.a.createElement("div",{className:"name"},r.a.createElement("strong",null,Ke(ze.shared.remaining),": ")),r.a.createElement("div",{className:"amount"},nt(t,{absolute:!1})))},jc=function(e){var t=e.amount,a=e.name;return r.a.createElement("div",{className:"new-month-item"},r.a.createElement("div",{className:"name"},a),r.a.createElement("div",{className:"amount"},nt(t,{absolute:!1})))},Tc=Object(s.b)(function(e){var t=function(e,t){return e.budget_category_id!==t.budget_cateogry_id?e.name<t.name?-1:1:e.amount===t.amount?e.id-t.id:Math.abs(e.amount)-Math.abs(t.amount)},a=e.budget.setup.newMonth,n=a.collection,r=a.month,c=a.year,o=n.reduce(function(e,t){return e+t.amount},0),i=n.sort(t).filter(function(e){return e.expense});return{collection:{revenues:n.sort(t).filter(function(e){return!e.expense}),expenses:i},discretionary:o,month:r,year:c}})(function(e){var t=e.collection,a=e.discretionary,n=e.month,c=e.year,o=W({month:n,year:c,format:"monthYear"}),i=t.expenses,l=t.revenues;return r.a.createElement("div",{className:"new-month-items"},r.a.createElement("h4",null,o," ",Ke(ze.item.items)),r.a.createElement(wc,{amount:a}),r.a.createElement("div",{className:"setup-title"},r.a.createElement("strong",null,Ke(ze.category.revenues))),l.map(function(e){return r.a.createElement(jc,Object.assign({key:e.id},e))}),r.a.createElement("div",{className:"setup-title"},r.a.createElement("strong",null,Ke(ze.category.expenses))),i.map(function(e){return r.a.createElement(jc,Object.assign({key:e.id},e))}))}),Ic=function(e){var t=e.collection,a=e.dispatch,n=e.month,c=e.year,o=ze.setup.accrualButtonText,i=function(e){var t=e.updatedProps?at(zt(e.updatedProps.amount)):e.defaultAmount,r=je({route:"budget-items-events-index"}),o=JSON.stringify({events:[{amount:t,budget_category_id:e.budget_category_id,event_type:"setup_item_create",month:n,year:c}]});Me(r,o,{onSuccess:function(e){return a(yc(e[0].item))},event:function(e){return At({eventType:"budget-item-create"})(e[0])}})},l=function(){var e=Object(Cn.a)(xn.a.mark(function e(){var n,r,c,o,l,u;return xn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=!0,r=!1,c=void 0,e.prev=3,o=t[Symbol.iterator]();case 5:if(n=(l=o.next()).done){e.next=15;break}return u=l.value,a({type:"budget/setup/MARK_SUBMITTED",payload:{id:u.id}}),e.next=10,An(400);case 10:u.markedForExclusion||i(u),a(Nc({id:u.id}));case 12:n=!0,e.next=5;break;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(3),r=!0,c=e.t0;case 21:e.prev=21,e.prev=22,n||null==o.return||o.return();case 24:if(e.prev=24,!r){e.next=27;break}throw c;case 27:return e.finish(24);case 28:return e.finish(21);case 29:case"end":return e.stop()}},e,this,[[3,17,21,29],[22,,24,28]])}));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"accrual-submit"},r.a.createElement("button",{type:"submit",onClick:l},Ke(o)))},Dc=function(e){var t=e.dispatch,a=Object(p.a)({},e.item,{amount:parseFloat(e.item.defaultAmount/100).toFixed(2)},e.item.updatedProps),n=a.id,c=a.amount,o=a.markedForExclusion,i=a.name,l=function(){return a.submitted&&!a.reviewed?"submitted":a.reviewed&&!o?"reviewed":o?"markedForExclusion":"markedForInclusion"};return r.a.createElement("div",{className:"accrual-item"},r.a.createElement("div",{className:"label"},i),r.a.createElement("div",{className:"input"},r.a.createElement("input",{type:"text",value:c,onChange:function(e){var a={type:"budget/setup/EDIT_ACCRUAL_AMOUNT",payload:{id:n,amount:e.target.value}};t(a)}})),r.a.createElement("div",{className:"buttons"},r.a.createElement("div",{className:"check"},r.a.createElement(xc,{handleClick:function(e){e.preventDefault();var a=_c({id:n,exclude:!1});t(a)},iconClass:function(){switch(l()){case"submitted":return"fas fa-compact-disc fa-spin";case"reviewed":return"fas fa-check-circle";default:return"far fa-check-circle"}}(),spanClass:function(){switch(l()){case"reviewed":return"created";case"markedForExclusion":return"";default:return"active"}}()})),r.a.createElement("div",{className:"ex"},r.a.createElement(xc,{handleClick:function(e){e.preventDefault();var a=_c({id:n,exclude:!0});t(a)},iconClass:"far fa-times-circle",spanClass:o?"active":""}))))},xc=function(e){var t=e.handleClick,a=e.iconClass,n=e.spanClass;return r.a.createElement("span",{className:n},r.a.createElement(Ve.a,{to:"#",onClick:t},r.a.createElement(tt,{className:a})))},Cc=Object(s.b)(function(e,t){var a=parseInt(t.match.params.month),n=parseInt(t.match.params.year),r=e.budget.setup.newMonth,c=r.month,o=r.year,i=e.budget.setup.baseMonth.isFetched,l=e.budget.categories.collection,u=function(e){return l.find(function(t){return t.id===e.budget_category_id})},s=e.budget.setup.baseMonth.collection.filter(function(e){return e.accrual}).map(function(e){return Object(p.a)({},e,{defaultAmount:u(e).default_amount})}).sort(function(e,t){return e.name<t.name?-1:1});return{baseMonth:e.budget.setup.baseMonth,collection:s,isFetched:i,paramMonth:a,paramYear:n,month:c,year:o}})(function(e){var t=ze.setup.accruingExpenses,a=e.baseMonth,n=e.collection,c=e.dispatch,o=e.isFetched,i=e.month,l=e.paramMonth,u=e.paramYear,s=e.year,m=n.filter(function(e){return!e.reviewed}).length,d=W({month:a.month,year:a.year,format:"monthYear"});return o?m>0?r.a.createElement("div",{className:"set-up-workspace"},r.a.createElement("div",{className:"previous-month-items"},r.a.createElement("h4",null,d),r.a.createElement("h5",null,Ke(t)),r.a.createElement("div",{className:"review-accruals"},n.map(function(e){return r.a.createElement(Dc,{key:e.id,dispatch:c,item:e})})),r.a.createElement(Ic,{collection:n,dispatch:c,month:i,year:s})),r.a.createElement(Tc,null)):r.a.createElement(Ra.a,{to:"/budget/set-up/".concat(i,"/").concat(s,"/expenses")}):r.a.createElement(Ra.a,{to:"/budget/set-up/".concat(l,"/").concat(u,"/intro")})}),Ac=function(e){var t=e.dayToDayItem,a=e.newMonthString,n=ze.setup,c=n.alreadyIncluded,o=n.howMuchAdditional,i=n.howMuchToInclude;return t?r.a.createElement("div",null,r.a.createElement("p",null,c(nt(t.amount,{absolute:!1}),t.name,a)),r.a.createElement("p",null,o)):r.a.createElement("div",null,r.a.createElement("p",null,i(a)))},Mc=function(e){var t=e.amount,a=e.checked,n=e.hidden,c=e.label,o=e.onClick;return n?null:r.a.createElement("div",{className:"option"},r.a.createElement("div",{className:"label"},r.a.createElement("input",{type:"radio",name:"review-option",onChange:o,checked:a}),c,":"),r.a.createElement("div",{className:"amount"},nt(t,{absolute:!1})))},kc=function(e){var t=e.amount,a=e.createItem,n=e.dayToDayItem,c=e.updateItem,o=ze.setup.include,i=n?c:a;return""===t?null:r.a.createElement("div",{className:"confirm-button"},r.a.createElement("button",{onClick:i},r.a.createElement(tt,{className:"far fa-check-circle"})," ",Ke(o)))},Fc=function(e){var t=e.amount,a=e.dayToDayItem,n=ze.shared.total;return a?r.a.createElement("div",{className:"option"},r.a.createElement("div",{className:"label"},r.a.createElement("em",null,Ke(n),": ")),r.a.createElement("div",{className:"amount"},nt(100*(parseFloat(t)||0)+a.amount,{absolute:!1}))):null},Sc=Object(s.b)(function(e,t){var a=t.item,n=e.budget.setup,r=n.baseMonth,c=n.newMonth,o=W({month:r.month,year:r.year,format:"monthYear"}),i=e.budget.setup.newMonth.newItem;return{category:e.budget.categories.collection.find(function(e){return e.id===a.budget_category_id}),dayToDayItem:a.monthly?null:c.collection.find(function(e){return e.budget_category_id===a.budget_category_id}),item:a,month:c.month,newItem:i,prevMonthString:o,year:c.year}})(function(e){var t=ze.setup,a=t.additional,n=t.amountToInclude,c=t.nOfTotal,o=e.category,i=e.count,l=e.dayToDayItem,u=e.dispatch,s=e.item,m=e.month,d=e.newItem,p=e.number,f=e.prevMonthString,b=e.year,g=W({month:m,year:b,format:"monthYear"}),E=d.amount,h=d.selectedOption;return r.a.createElement("div",{className:"review-item-current"},r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"top-line"},r.a.createElement("strong",null,s.name)),r.a.createElement("div",{className:"top-line"},c(p,i)," ",r.a.createElement("em",null,function(e){if(void 0===e)return"";var t=e.monthly?ze.category.monthly:ze.category.weekly,a=e.expense?ze.category.expense:ze.category.revenue;return"".concat(t," ").concat(a)}(s)))),r.a.createElement("div",{className:"review-item-form"},r.a.createElement(Ac,{dayToDayItem:l,newMonthString:g}),r.a.createElement(Mc,{amount:o.default_amount,label:Ke(ze.category.defaultAmount),onClick:function(){var e=Oc({amount:nt(o.default_amount,{toFloat:!0}),selectedOption:"defaultAmount"});u(e)},checked:"defaultAmount"===h?"checked":""}),r.a.createElement(Mc,{amount:s.amount,label:"".concat(Ke(ze.item.budgeted)," ").concat(ze.shared.in," ").concat(f),onClick:function(){var e=Oc({amount:nt(s.amount,{toFloat:!0}),selectedOption:"previousAmount"});u(e)},checked:"previousAmount"===h?"checked":""}),r.a.createElement(Mc,{amount:s.spent,hidden:0===s.spent,label:"".concat(Ke(s.expense?ze.shared.spent:ze.shared.deposited)," ").concat(ze.shared.in," ").concat(f),onClick:function(){var e=Oc({amount:nt(s.spent,{toFloat:!0}),selectedOption:"previousSpent"});u(e)},checked:"previousSpent"===h?"checked":""}),r.a.createElement("div",{className:"input"},r.a.createElement("div",{className:"label"},r.a.createElement("em",null,l?Ke(a):n,": ")),r.a.createElement("input",{onChange:function(e){var t=zt(e.target.value),a=Oc({amount:t,selectedOption:""});u(a)},value:E}),r.a.createElement(kc,{amount:E,createItem:function(){var e=je({route:"budget-items-events-index"}),t=JSON.stringify({events:[{amount:at(E),budget_category_id:o.id,event_type:"setup_item_create",month:m,year:b}]});Me(e,t,{event:function(e){return At({eventType:"budget-item-create"})(e[0])},onSuccess:function(e){u(yc(e[0].item)),u(Nc({id:s.id}))}})},dayToDayItem:l,updateItem:function(){var e=je({route:"budget-items-events-index"}),t=at(E)+l.amount,a=At({eventType:"budget-item-update",id:l.id,category:l.name,month:m,year:b,originalAmount:l.amount/100,newAmount:t/100}),n=JSON.stringify({events:[{event_type:"setup_item_adjust",amount:t,budget_item_id:l.id}]});Me(e,n,{onSuccess:function(e){u({type:"budget/setup/UPDATE_EXISTING",payload:e}),u(Nc({id:s.id}))},event:a})}})),r.a.createElement(Fc,{amount:E,dayToDayItem:l}),r.a.createElement("hr",null),r.a.createElement("div",{className:"extra-options"},r.a.createElement("button",{className:"requeue",onClick:function(){var e=Date.now(),t={type:"budget/setup/REQUEUE",payload:{id:s.id,requeuedAt:e}};u(t)}},Ke(ze.setup.requeue)," ",r.a.createElement(tt,{className:"fas fa-retweet"})),r.a.createElement("button",{className:"ignore",onClick:function(){var e=Nc({id:s.id});u(e)}},Ke(ze.setup.ignore)," ",r.a.createElement(tt,{className:"far fa-times-circle"})))))}),Rc=function(e){var t=e.count,a=e.item,n=e.newMonth,c=e.number,o=e.redirect;return a&&!n.set_up_completed_at?r.a.createElement(Sc,{count:t,item:a,number:c}):r.a.createElement(ln.a,{to:o})},Pc=function(e){var t=e.item;return r.a.createElement("div",{className:"review-item-queued"},r.a.createElement("div",{className:"label"},t.name),r.a.createElement("div",{className:"amount"},nt(t.amount,{absolute:!1})))},Lc=Object(s.b)(function(e,t){var a=t.filter,n=t.redirect,r=t.title,c=e.budget.setup.baseMonth.collection,o=function(e,t){return e.requeuedAt&&t.requeuedAt?e.requeuedAt>t.requeuedAt?1:-1:e.requeuedAt&&!t.requeuedAt?1:!e.requeuedAt&&t.requeuedAt?-1:e.expense===t.expense?Math.abs(e.amount)>=Math.abs(t.amount)?-1:1:e.expense?1:-1},i=c.filter(function(e){return!e.reviewed&&("revenue"===a?!e.expense:e.expense)}).sort(o),l=i.shift(),u=e.budget.setup.baseMonth,s=W({month:u.month,year:u.year,format:"monthYear"}),m=l?l.id:0,d=l?l.name:"",p=c.filter(function(e){return e.name===d}).length,f=c.filter(function(e){return e.name===d}).sort(o).map(function(e){return e.id}).indexOf(m);return{collection:i,count:p,filter:a,newMonth:e.budget.setup.newMonth,number:f+1,prevMonthString:s,redirect:n,reviewItem:l,title:r}})(function(e){var t=e.collection,a=e.count,n=e.dispatch,c=e.filter,o=e.newMonth,i=e.number,l=e.prevMonthString,u=e.redirect,s=e.reviewItem,m=e.title;return r.a.createElement("div",{className:"previous-month-items"},r.a.createElement("h4",null,l),r.a.createElement("h5",null,m),r.a.createElement(Rc,{count:a,dispatch:n,item:s,filter:c,newMonth:o,number:i,redirect:u}),t.map(function(e){return r.a.createElement(Pc,{key:e.id,item:e})}))}),zc=Object(s.b)(function(e,t){var a=parseInt(t.match.params.month),n=parseInt(t.match.params.year),r=e.budget.setup.baseMonth.isFetched;return Object(p.a)({paramMonth:a,paramYear:n,isFetched:r},e.budget.setup.newMonth)})(function(e){var t=e.paramMonth,a=e.paramYear,n=e.isFetched,c=e.month,o=e.year;return n?r.a.createElement("div",{className:"set-up-workspace"},r.a.createElement(Lc,{filter:"expenses",redirect:"/budget/set-up/".concat(c,"/").concat(o,"/finalize"),title:Ke("".concat(ze.category.expense," ").concat(ze.item.items))}),r.a.createElement(Tc,null)):r.a.createElement(ln.a,{to:"/budget/set-up/".concat(t,"/").concat(a,"/intro")})}),Uc=Object(s.b)(function(e){var t=e.budget.setup.newMonth;return{month:t.month,setUpCompletedAt:t.set_up_completed_at,year:t.year}})(function(e){var t=e.dispatch,a=e.month,n=e.setUpCompletedAt,c=e.year,o=ze.setup.markCompleteText;return n?r.a.createElement(Ra.a,{to:"/budget/".concat(a,"/").concat(c)}):r.a.createElement("div",{className:"set-up-workspace"},r.a.createElement("div",{className:"previous-month-items"},r.a.createElement("div",{className:"review-item-current"},r.a.createElement("div",{className:"review-item-form"},r.a.createElement("div",{className:"confirm-button"},r.a.createElement("button",{onClick:function(e){e.preventDefault();var n=je({route:"interval-show",month:a,year:c}),r={set_up_completed_at:new Date},o=At(Object(p.a)({eventType:"interval-mark-complete",month:a,year:c},r));ke(n,JSON.stringify(r),{onSuccess:function(e){return t({type:"budget/setup/UPDATE_METADATA",payload:e})},event:o})}},r.a.createElement("strong",null,Ke(o))," ",r.a.createElement(tt,{className:"far fa-check-square"})))))),r.a.createElement(Tc,null))}),Yc=Object(s.b)(function(e,t){var a=parseInt(t.match.params.month),n=parseInt(t.match.params.year),r=e.budget.setup.newMonth,c=401===e.api.status;return Object(p.a)({isApiUnauthorized:c,baseMonth:e.budget.setup.baseMonth,categoriesFetched:e.budget.categories.fetched,newMonth:r,targetMonth:a,targetYear:n},t)})(function(e){var t=e.isApiUnauthorized,a=e.baseMonth,n=e.categoriesFetched,c=e.dispatch,o=e.newMonth,i=e.targetMonth,l=e.targetYear,u=o.month,s=o.year;if(t)return null;if(!n){var m=je({route:"budget-categories-index"});return Ce(m,function(e){return c(Xn(e))}),null}if(n&&!o.isFetched){var d=je({route:"budget-items-index",query:{month:i,year:l}});return Ce(d,function(e){return c({type:"budget/NEW_MONTH_FETCHED",payload:e})}),null}if(n&&o.isFetched&&!a.isFetched){var p=je({route:"budget-items-index",query:{month:1===i?12:i-1,year:1===i?l-1:l}});return Ce(p,function(e){return c({type:"budget/BASE_MONTH_FETCHED",payload:e})}),null}return r.a.createElement(ln.a,{to:"/budget/set-up/".concat(u,"/").concat(s,"/revenues")})}),Bc=Object(s.b)(function(e,t){var a=parseInt(t.match.params.month),n=parseInt(t.match.params.year),r=e.budget.setup.baseMonth.isFetched,c=e.budget.setup.newMonth;return{paramMonth:a,paramYear:n,isFetched:r,month:c.month,year:c.year}})(function(e){var t=e.paramMonth,a=e.paramYear,n=e.isFetched,c=e.month,o=e.year;return n?r.a.createElement("div",{className:"set-up-workspace"},r.a.createElement(Lc,{filter:"revenue",redirect:"/budget/set-up/".concat(c,"/").concat(o,"/accruals"),title:Ke("".concat(ze.category.revenue," ").concat(ze.item.items))}),r.a.createElement(Tc,null)):r.a.createElement(ln.a,{to:"/budget/set-up/".concat(t,"/").concat(a,"/intro")})}),Wc=function(e){return{type:"icons/FETCHED",payload:e}},Gc=function(e){return{type:"icons/UPDATE",payload:e}},Hc=Object(s.b)(function(e){var t=e.budget.categories,a=t.filters,n=t.showFilters,r=a.filter(function(e){return""!==e.value});return{adjectiveFilter:a.find(function(e){return"adjective"===e.name}),adverbFilter:a.find(function(e){return"adverb"===e.name}),appliedFilters:r,searchFilter:a.find(function(e){return"search"===e.name}),showFilters:n}})(function(e){var t=ze.category,a=t.all,n=t.expenses,c=t.filters,o=t.frequency,i=t.monthly,l=t.revenues,u=t.searchLabelText,s=t.searchPlaceholder,m=t.type,d=t.weekly,p=e.adjectiveFilter,f=e.adverbFilter,b=e.appliedFilters,g=e.dispatch,E=e.searchFilter,h=0===b.length?"":"active",v=function(e,t){return g({type:"budget/categories/APPLY_FILTER",payload:{name:e,value:t}})},y=function(e){v("adjective",e.target.value)},O=function(e){v("adverb",e.target.value)};return r.a.createElement("div",{className:"budget-category-filters"},r.a.createElement("span",{className:h},r.a.createElement(tt,{className:"fas fa-filter"}))," ",r.a.createElement("div",{className:"title"},r.a.createElement("strong",null,Ke(c))),r.a.createElement("div",{className:"search"},r.a.createElement("div",{className:"label"},Ke(u)),r.a.createElement("div",{className:"search-bar"},r.a.createElement("input",{type:"text",onChange:function(e){v("search",e.target.value)},placeholder:s,value:E.value}))),r.a.createElement("div",{className:"adverb"},r.a.createElement("div",{className:"options"},r.a.createElement("div",{className:"title"},r.a.createElement("strong",null,Ke(o))),r.a.createElement("hr",null),r.a.createElement("div",{className:"option"},r.a.createElement("div",{className:"label"},Ke(a)),r.a.createElement("div",{className:"radio"},r.a.createElement("input",{type:"radio",onChange:O,value:"",checked:""===f.value?"checked":""}))),r.a.createElement("div",{className:"option"},r.a.createElement("div",{className:"label"},Ke(d)),r.a.createElement("div",{className:"radio"},r.a.createElement("input",{type:"radio",onChange:O,value:"day-to-day",checked:"day-to-day"===f.value?"checked":""}))),r.a.createElement("div",{className:"option"},r.a.createElement("div",{className:"label"},Ke(i)),r.a.createElement("div",{className:"radio"},r.a.createElement("input",{type:"radio",onChange:O,value:"monthly",checked:"monthly"===f.value?"checked":""}))))),r.a.createElement("div",{className:"adjective"},r.a.createElement("div",{className:"options"},r.a.createElement("div",{className:"title"},r.a.createElement("strong",null,Ke(m))),r.a.createElement("hr",null),r.a.createElement("div",{className:"option"},r.a.createElement("div",{className:"label"},Ke(a)),r.a.createElement("div",{className:"radio"},r.a.createElement("input",{type:"radio",onChange:y,value:"",checked:""===p.value?"checked":""}))),r.a.createElement("div",{className:"option"},r.a.createElement("div",{className:"label"},Ke(l)),r.a.createElement("div",{className:"radio"},r.a.createElement("input",{type:"radio",onChange:y,value:"revenue",checked:"revenue"===p.value?"checked":""}))),r.a.createElement("div",{className:"option"},r.a.createElement("div",{className:"label"},Ke(n)),r.a.createElement("div",{className:"radio"},r.a.createElement("input",{type:"radio",onChange:y,value:"expense",checked:"expense"===p.value?"checked":""}))))))}),Kc=function(){return r.a.createElement("div",{className:"budget-category-labels"},r.a.createElement("div",{className:"category-name"},r.a.createElement("h3",null,Ke(ze.category.name))),r.a.createElement("div",{className:"category-default-amount"},r.a.createElement("h3",null,Ke(ze.category.defaultAmount))),r.a.createElement("div",{className:"category-detail"},r.a.createElement("h3",null,Ke(ze.category.details))),r.a.createElement("div",{className:"category-accrual"},r.a.createElement("h3",null,Ke(ze.category.accrual))),r.a.createElement("div",{className:"category-icon"},r.a.createElement("h3",null,Ke(ze.category.icon))),r.a.createElement("div",{className:"category-option-buttons"},r.a.createElement("h3",null,Ke(ze.category.editSlashDelete))))},qc=Object(s.b)(function(e,t){return t})(function(e){var t=e.id,a=e.dispatch,n=e.cancelLabel;return t?r.a.createElement("div",{className:"category-button"},r.a.createElement("button",{type:"cancel",className:"cancel",onClick:function(e){e.preventDefault();var n=$n({id:t});a(n)}},n)):r.a.createElement("div",{className:"category-button"},r.a.createElement("button",{type:"cancel",className:"cancel",onClick:function(e){e.preventDefault();var t=Qn({showForm:!1});a(t)}},n))}),Vc=Object(s.b)(function(e,t){var a=e.icons.collection.sort(function(e,t){return e.name.toLowerCase()<t.name.toLowerCase()?-1:1}).map(function(e){return{value:e.id,label:e.name}}),n=[{value:null,label:""}].concat(Object(d.a)(a)),r=n.find(function(e){return e.value===t.iconId});return{options:n,onChange:t.onChange,value:r}})(function(e){var t=e.options,a=e.onChange,n=e.value;return r.a.createElement("div",{className:"budget-icon-select"},r.a.createElement(Yt.a,{options:t,isSearchable:!0,onChange:a,value:n}))}),Jc=function(e){return r.a.createElement("div",{className:"budget-category"},r.a.createElement(Xc,{className:"category-name",errors:e.errors.name||[],name:"name",onChange:e.onChange,placeholder:ze.category.name,value:e.name}),r.a.createElement(Xc,{className:"category-default-amount",errors:e.errors.default_amount||[],name:"default_amount",onChange:e.onChange,placeholder:ze.category.defaultAmount,value:e.default_amount}),r.a.createElement("div",{className:"category-options"},r.a.createElement($c,{checked:"true"===e.monthly?"checked":"",disabled:e.optionsDisabled,name:e.monthlyName,onChange:e.onChange,title:ze.category.monthly,value:!0}),r.a.createElement($c,{checked:"false"===e.monthly?"checked":"",disabled:e.optionsDisabled,name:e.monthlyName,onChange:e.onChange,title:Ke(ze.category.weekly),value:!1})),r.a.createElement("div",{className:"category-options"},r.a.createElement($c,{checked:"true"===e.expense?"checked":"",disabled:e.optionsDisabled,name:e.expenseName,onChange:e.onChange,title:ze.category.expense,value:!0}),r.a.createElement($c,{checked:"false"===e.expense?"checked":"",disabled:e.optionsDisabled,name:e.expenseName,onChange:e.onChange,title:ze.category.revenue,value:!1})),r.a.createElement("div",{className:"category-options"},r.a.createElement("div",{className:"option"},r.a.createElement("div",{className:"label"},Ke(ze.category.accrual)),r.a.createElement("input",{type:"checkbox",name:"accrual",value:"true"===e.accrual?"false":"true",onChange:e.onChange,checked:"true"===e.accrual?"checked":""}),r.a.createElement(vn,{errors:e.errors.accrual||[]}))),r.a.createElement(Vc,{onChange:e.onSelectChange,iconId:e.icon_id}),r.a.createElement("div",{className:"category-button"},r.a.createElement("button",{type:"submit",className:"submit",onClick:e.onSubmit},e.label)),r.a.createElement(qc,e))},Xc=function(e){var t=e.className,a=e.errors,n=e.name,c=e.onChange,o=e.placeholder,i=e.value;return r.a.createElement("div",{className:t},r.a.createElement("input",{className:a.length>0?"errors":"",name:n,onChange:c,placeholder:o,type:"text",value:i}),r.a.createElement(vn,{errors:a}))},$c=function(e){var t=e.checked,a=e.disabled,n=e.name,c=e.onChange,o=e.title,i=e.value;return r.a.createElement("div",{className:"option"},r.a.createElement("div",{className:"label"},Ke(o)),r.a.createElement("input",{type:"radio",checked:t,disabled:a,name:n,onChange:c,value:i}))},Zc=Object(s.b)(function(e){var t=e.budget.newCategory,a=t.errors.reduce(function(e,t){return Object.entries(t).map(function(t){var a=t[0],n=t[1],r=e[a]||[];return e[a]=[].concat(Object(d.a)(r),Object(d.a)(n)),e}),e},{});return{newCategory:Object(p.a)({},t,{errors:a}),showForm:e.budget.categories.showForm}})(function(e){var t=ze.category,a=t.addNew,n=t.cancelButtonText,c=t.createButtonText,o=e.dispatch,i=e.newCategory,l=e.showForm;return l?r.a.createElement(Jc,Object.assign({},i,{expenseName:"expense",cancelLabel:Ke(n),label:Ke(c),monthlyName:"monthly",onChange:function(e){var t=ar(Object(P.a)({},e.target.name,e.target.value));o(t)},onSelectChange:function(e){var t=ar({icon_id:e.value});o(t)},onSubmit:function(){var e=je({route:"budget-categories-index"}),t=JSON.stringify(Object(p.a)({},i,{default_amount:at(i.default_amount)})),a=At({eventType:"budget-category-create"});Me(e,t,{onSuccess:function(e){var t={type:"budget/categories/CREATED",payload:e};o(t),o({type:"budget/categories/RESET_NEW_FORM",payload:null})},onFailure:function(e){o({type:"budget/categories/ERRORS_ON_NEW",payload:e})},event:a})},optionsDisabled:!1})):r.a.createElement("div",{className:"budget-category-form"},r.a.createElement(Ve.a,{to:"#",onClick:function(e){e.preventDefault();var t=Qn({showForm:!l});o(t),o({type:"budget/categories/RESET_NEW_FORM",payload:null})}},r.a.createElement("div",{className:"add-new-category-button"},r.a.createElement(tt,{className:"fas fa-plus"})," ",Ke(a))))}),Qc=Object(s.b)(function(e,t){var a=t.category,n=a.errors.reduce(function(e,t){return Object.entries(t).map(function(t){var a=t[0],n=t[1],r=e[a]||[];return e[a]=[].concat(Object(d.a)(r),Object(d.a)(n)),e}),e},{});return Object(p.a)({},t,{category:Object(p.a)({},a,{errors:n})})})(function(e){var t=e.cancelLabel,a=e.category,n=e.dispatch,c=a.id,o=a.accrual,i=a.default_amount,l=a.expense,u=a.monthly,s=a.updatedProps,m=Object(p.a)({},a,{accrual:o.toString(),default_amount:(i/100).toFixed(2),expense:l.toString(),monthly:u.toString()},s);return r.a.createElement(Jc,Object.assign({key:c},m,{cancelLabel:t,expenseName:"expense[".concat(c,"]"),label:Ke(ze.category.updateButtonText),monthlyName:"monthly[".concat(c,"]"),onChange:function(e){var t=tr(Object(P.a)({id:c},e.target.name,e.target.value));n(t)},onSelectChange:function(e){var t=tr({id:c,icon_id:e.value});n(t)},onSubmit:function(){var e=je({route:"budget-category-show",id:c}),t=JSON.stringify(s?s.default_amount?Object(p.a)({},s,{default_amount:at(s.default_amount)}):s:{id:c}),r=At({eventType:"budget-category-update",id:c,changedProps:Ct(a,s)});ke(e,t,{onSuccess:function(e){return n(er(Object(p.a)({},e,{showForm:!1})))},onFailure:function(e){return n({type:"budget/categories/APPLY_ERRORS_ON_EDIT",payload:Object(p.a)({id:c},e)})},event:r})},optionsDisabled:!0,resetForm:function(e){e.preventDefault();var t=$n({id:c});n(t)}}))}),eo=function(e){var t=e.cancel,a=e.maturityInterval,n=e.options,c=e.onChange,o=e.onSubmit,i=e.value;return r.a.createElement("div",{className:"new-maturity-interval"},r.a.createElement("div",{className:"month-select"},r.a.createElement(Yt.a,{options:n,onChange:function(e){c({month:e.value})},value:i})),r.a.createElement("div",{className:"year-input"},r.a.createElement("input",{type:"number",value:a.year,onChange:function(e){c({year:e.target.value})},placeholder:"year"})),r.a.createElement("div",{className:"maturity-interval-submit"},r.a.createElement(Ve.a,{to:"#",className:"fas fa-check",onClick:o})),r.a.createElement("div",{className:"maturity-interval-submit"},r.a.createElement(Ve.a,{to:"#",className:"fas fa-times",onClick:t})))},to=function(e){var t=e.id,a=e.dispatch,n=e.newMaturityIntervalAttributes,c=e.showMaturityIntervalForm,o=ze.maturityInterval.options,i=n||{};return c?r.a.createElement(eo,{cancel:function(){var e=er({id:t,showMaturityIntervalForm:!1});a(e)},maturityInterval:i,onChange:function(e){!function(e){var r=er({id:t,newMaturityIntervalAttributes:Object(p.a)({},n,e)});a(r)}(e)},onSubmit:function(){var e=je({route:"budget-category-maturity-intervals-index",budgetCategoryId:t}),r=JSON.stringify(n),c=At({eventType:"budget-category-maturity-interval-create"});Me(e,r,{onSuccess:function(e){return a({type:"budget/categories/MATURITY_INTERVAL_CREATED",payload:{id:t,maturityInterval:e}})},event:c})},options:o}):null},ao=function(e){var t=e.id,a=e.category_id,n=e.dispatch,c=e.month,o=e.name,i=e.updatedProps,l=e.year,u=Object(p.a)({id:t,month:c,year:l},i),s=ze.maturityInterval.options,m=s.find(function(e){return e.value===u.month}),d=function(){var e=Zn({id:t,showForm:!1});n(e)};return r.a.createElement(eo,{cancel:d,maturityInterval:u,onChange:function(e){var a=function(e){return{type:"budget/categories/EDIT_MATURITY_INTERVAL",payload:e}}(Object(p.a)({id:t},e));n(a)},onSubmit:function(r){r.preventDefault();var c=At({eventType:"maturity-interval-update",id:t,name:o,changedProps:Ct(e,i)}),l=je({route:"budget-category-maturity-interval-show",id:t,budgetCategoryId:a}),s=JSON.stringify(u);ke(l,s,{onSuccess:function(e){n({type:"budget/categories/UPDATE_MATURITY_INTERVAL",payload:e}),d()},event:c})},options:s,value:m})},no=function(e){var t=e.id,a=e.category_id,n=e.dispatch,c=e.month,o=e.showForm,i=e.year;return o?r.a.createElement(ao,e):r.a.createElement("div",{className:"maturity-interval"},W({month:c,year:i,day:1,format:"longMonth"}),r.a.createElement("span",{className:"icon-links"}," ",r.a.createElement(Ve.a,{to:"#",className:"far fa-edit",onClick:function(){var e=Zn({id:t,showForm:!0});n(e)}})," ",r.a.createElement(Ve.a,{to:"#",className:"far fa-trash-alt",onClick:function(){var e=ze.maturityInterval.deleteConfirmMessage;if(window.confirm(e)){var r=je({route:"budget-category-maturity-interval-show",id:t,budgetCategoryId:a}),o={type:"budget/category/REMOVE_MATURITY_INTERVAL",payload:{id:t}},l=At({eventType:"budget-category-maturity-interval-delete",id:t,categoryId:a,month:c,year:i});Ae(r,l,function(){return n(o)})}}})))},ro=function(e){var t=e.collection,a=e.dispatch,n=e.name,c=e.year;return r.a.createElement("div",null,r.a.createElement("strong",null,c),r.a.createElement("div",null,t.map(function(e){return r.a.createElement(no,Object.assign({key:e.id,dispatch:a},e,{name:n}))})))},co=Object(s.b)(function(e,t){var a=e.budget.maturityIntervals.filter(function(e){return e.category_id===t.id}).sort(function(e,t){return e.year<t.year?-1:e.year>t.year?1:e.month<t.month?-1:e.month>t.month?1:0}),n=401===e.api.status;return Object(p.a)({isApiUnauthorized:n},t,{maturityIntervals:a})})(function(e){var t=e.id,a=e.accrual,n=e.isApiUnauthorized,c=e.dispatch,o=e.maturityIntervals,i=e.maturityIntervalsFetched,l=e.name,u=e.newMaturityIntervalAttributes,s=e.showMaturityIntervalForm,m=e.showMaturityIntervals;if(!n&&!i&&m){var d=je({route:"budget-category-maturity-intervals-index",budgetCategoryId:t});Ce(d,function(e){return c({type:"budget/categories/MATURITY_INTERVALS_FETCHED",payload:{id:t,collection:e}})})}var p,f;if(a&&!m)return r.a.createElement("div",{className:"category-maturity-intervals"},r.a.createElement(Ve.a,{to:"#",onClick:function(){var e=er({id:t,showMaturityIntervals:!0});c(e)}},r.a.createElement(tt,{className:"fas fa-info-circle"})));if(a){var b=(f="year",(p=o).map(function(e){return e[f]}).filter(function(e,t,a){return a.indexOf(e)===t}).reduce(function(e,t){var a;return e.push((a={},Object(P.a)(a,f,t),Object(P.a)(a,"collection",p.filter(function(e){return e[f]===t})),a)),e},[]));return r.a.createElement("div",{className:"category-maturity-intervals"},r.a.createElement("div",{className:"maturity-interval-label"},r.a.createElement(Ve.a,{to:"#",onClick:function(){var e=er({id:t,showMaturityIntervals:!1});c(e)}},r.a.createElement(tt,{className:"fas fa-info-circle"}))," ",Ke(ze.maturityInterval.title)," ",r.a.createElement(Ve.a,{to:"#",className:s?"fas fa-minus":"fas fa-plus",onClick:function(){var e=Z("object").year,a=er({id:t,newMaturityIntervalAttributes:{month:"",year:e},showMaturityIntervalForm:!s});c(a)}}),r.a.createElement(to,{id:t,dispatch:c,name:l,newMaturityIntervalAttributes:u,showMaturityIntervalForm:s})),b.map(function(e){return r.a.createElement(ro,Object.assign({key:e.year,dispatch:c,name:l},e))}))}return null}),oo=Object(s.b)(function(e,t){return t})(function(e){var t=ze.category,a=t.cancelButtonText,n=t.deleteConfirmMessage,c=t.revenue,o=t.weekly,i=e.category,l=e.dispatch,u=i.id,s=i.accrual,m=i.default_amount,d=i.errors,p=i.expense,f=i.icon_class_name,b=i.monthly,g=i.name;return i.showForm?r.a.createElement(Qc,{category:i,cancelLabel:a}):r.a.createElement("div",{className:"budget-category"},r.a.createElement("div",{className:"category-name"},g),r.a.createElement("div",{className:"category-default-amount"},nt(m,{absoulte:!1})),r.a.createElement("div",{className:"category-detail"},b?ze.category.monthly:o," ",p?ze.category.expense:c),r.a.createElement("div",{className:"category-icon"},s?ze.category.accrual:""),r.a.createElement("div",{className:"category-icon"},r.a.createElement(tt,{className:f})),r.a.createElement("div",{className:"category-edit"},r.a.createElement(Ve.a,{to:"#",onClick:function(e){e.preventDefault();var t={type:"budget/categories/UPDATE",payload:{id:u,errors:d||[],showForm:!0}};l(t)},className:"far fa-edit"})),r.a.createElement("div",{className:"category-delete"},r.a.createElement(Ve.a,{to:"#",onClick:function(e){if(e.preventDefault(),window.confirm(n(g))){var t=je({route:"budget-category-show",id:u}),a=At({eventType:"budget-category-delete",id:u,name:g});Ae(t,a,l({type:"budget/categories/DELETED",payload:u}))}},className:"far fa-trash-alt"})),r.a.createElement(co,Object.assign({dispatch:l},i)))}),io=Object(s.b)(function(e){var t=e.budget.categories,a=t.collection,n=t.fetched,r=t.filters,c=r.find(function(e){return"search"===e.name}).value.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),o=e.icons.fetched,i=a.filter(function(e){switch(r.find(function(e){return"adjective"===e.name}).value){case"expense":return e.expense;case"revenue":return!e.expense;default:return!0}}).filter(function(e){switch(r.find(function(e){return"adverb"===e.name}).value){case"day-to-day":return!e.monthly;case"monthly":return e.monthly;default:return!0}}).filter(function(e){if(""===c)return!0;var t=new RegExp(c,"i");return e.name.match(t)}).sort(function(e,t){if(""===c)return e.isNew&&!t.isNew?-1:!e.isNew&&t.isNew?1:e.name.toLowerCase()<t.name.toLowerCase()?-1:1;var a=new RegExp("^".concat(c,".*"),"i"),n=new RegExp("(^|\\s)".concat(c,".*"),"i");return e.isNew&&!t.isNew?-1:!e.isNew&&t.isNew?1:e.name.match(a)&&t.name.match(a)?e.name.toLowerCase()<t.name.toLowerCase()?-1:1:e.name.match(a)?-1:t.name.match(a)?1:e.name.match(n)&&t.name.match(n)?e.name.toLowerCase()<t.name.toLowerCase()?-1:1:e.name.match(n)?-1:t.name.match(n)?1:e.name.toLowerCase()<t.name.toLowerCase()?-1:1});return{isApiUnauthorized:401===e.api.status,collection:i,fetched:n,iconsFetched:o}})(function(e){var t=e.isApiUnauthorized,a=e.collection,n=e.dispatch,c=e.fetched;if(!t&&!c){var o=je({route:"budget-categories-index"});Ce(o,function(e){return n(Xn(e))})}if(c&&!e.iconsFetched&&!t){var i=je({route:"icons-index"});Ce(i,function(e){return n(Wc(e))})}return r.a.createElement("div",{className:"categories"},r.a.createElement("h2",null,Ke(ze.category.title)),r.a.createElement(Hc,null),r.a.createElement(Kc,null),r.a.createElement(Zc,null),a.map(function(e){return r.a.createElement(oo,{key:e.id,category:e})}))}),lo=Object(s.b)(function(e){return Object(p.a)({},e.api)})(function(e){var t=e.dispatch,a=e.error,n=e.keyFormInput,c=function(){t({type:"api/KEY_UPDATED",payload:{key:n}}),t(Ie({type:"api",status:401,errorMessage:a}))};return r.a.createElement("div",{className:"key-form"},r.a.createElement("i",{className:"fas fa-key fa-rotate-270"})," ",r.a.createElement("input",{name:"apiKey",value:n,onChange:function(e){t({type:"api/KEY_EDITED",payload:{key:e.target.value}})},onKeyDown:function(e){13===e.which&&c()},placeholder:Ge.apiKey})," ",r.a.createElement("span",{className:"font-green"},r.a.createElement(Ve.a,{to:"#",className:"fas fa-arrow-circle-right",onClick:function(){return c()}})))}),uo=function(e){var t=e.dispatch,a=e.errorCount,n=e.errors,c=e.keys;if(0===a)return null;var o=1===a?Ue.error:Ue.errors;return r.a.createElement("div",{className:"top-level-errors"},r.a.createElement("h4",null,r.a.createElement("span",{className:"message-heading"},Ke(o))),r.a.createElement("div",null,c.map(function(e,a){return r.a.createElement(so,{key:a,dispatch:t,errors:n[e],type:e})})))},so=function(e){var t=e.dispatch,a=e.errors,n=e.type,c=Object.keys(a);return 0===c.reduce(function(e,t){return e+a[t].length},0)?null:r.a.createElement("div",null,r.a.createElement("strong",{className:"underline"},"\u2022"," ",Ke(n)),c.map(function(e,c){return r.a.createElement(mo,{key:c,dispatch:t,errors:a[e],status:e,type:n})}))},mo=function(e){var t=e.errors,a=e.status;return t.map(function(t,n){return r.a.createElement("div",{className:"error-message",key:n},r.a.createElement(tt,{className:"fas fa-exclamation-circle font-red"})," ",a," ","\u25e6"," ",t," ","401"===a?r.a.createElement(lo,{error:t}):r.a.createElement(po,Object.assign({error:t},e)))})},po=function(e){var t=e.dispatch,a=e.error,n=e.status,c=e.type;return r.a.createElement(Ve.a,{to:"#",className:"fas fa-times",onClick:function(){var e=Ie({errorMessage:a,status:n,type:c});t(e)}})},fo=Object(s.b)(function(e){var t=e.messages.errors.reduce(function(e,t){var a=Object.keys(t.messages);return[].concat(Object(d.a)(e),Object(d.a)(a.map(function(e){return{status:e,messages:t.messages[e],type:t.type}})))},[]),a=Object(d.a)(new Set(Object(d.a)(t.map(function(e){return e.type})))).reduce(function(e,a){return e[a]=t.filter(function(e){return e.type===a}),e},{}),n=Object.keys(a);return{errors:n.reduce(function(e,t){var n=a[t],r=n.map(function(e){return e.status}).reduce(function(e,t){return e[t]=n.filter(function(e){return e.status===t}).reduce(function(e,t){return Object(d.a)(new Set([].concat(Object(d.a)(e),Object(d.a)(t.messages))))},[]),e},{});return e[t]=r,e},{}),errorCount:t.reduce(function(e,t){return e+t.messages.length},0),keys:n}})(function(e){return e.errorCount>0?r.a.createElement("div",{className:"top-level-messages"},r.a.createElement(uo,e)):null}),bo=function(e){var t=e.event;return r.a.createElement("div",{className:"event-message"},t)},go=Object(s.b)(function(e){return{events:e.messages.events,showEvents:e.messages.showEvents}})(function(e){var t=e.dispatch,a=e.events,n=e.showEvents,c=function(){return t({type:"messages/TOGGLE_EVENTS",payload:null})};return 0===a.length?r.a.createElement("div",{className:"top-level-events"}):n?r.a.createElement("div",{className:"top-level-events"},r.a.createElement("h3",null,r.a.createElement(Ve.a,{to:"#",onClick:c},r.a.createElement(tt,{className:"fas fas-book-open"})," ","Events")),r.a.createElement("div",{className:"events"},a.map(function(e,t){return r.a.createElement(bo,{key:t,event:e})}))):r.a.createElement("div",{className:"top-level-events"},r.a.createElement("h3",null,r.a.createElement(Ve.a,{to:"#",onClick:c},r.a.createElement(tt,{className:"fas fas-book"})," ","Events")))}),Eo=a(158),ho=function(){return r.a.createElement("header",null,r.a.createElement("h1",null,Pe.appName),r.a.createElement(Eo.a,{to:"/accounts"},r.a.createElement("div",{className:"tab"},r.a.createElement("h2",null,Pe.accounts))),r.a.createElement(Eo.a,{to:"/budget"},r.a.createElement("div",{className:"tab"},r.a.createElement("h2",null,Pe.budget))))},vo=Object(s.b)(function(e,t){return t})(function(e){var t=e.id,a=e.dispatch;return t?r.a.createElement("button",{type:"cancel",className:"cancel",onClick:function(){var e=Gc({id:t,updatedProps:null,showForm:!1});a(e)}},Ke(ze.icon.cancelButtonText)):null}),yo=Object(s.b)(function(e,t){return t})(function(e){var t=e.id;return r.a.createElement("button",{type:"reset",className:"reset",onClick:function(a){a.preventDefault(),t?e.dispatch({type:"icons/RESET",payload:{id:t}}):e.dispatch({type:"icons/RESET_NEW",payload:null})}},Ke(ze.icon.resetButtonText))}),Oo=Object(s.b)(function(e,t){var a=t.buttonText,n=t.icon,r=t.onChange,c=t.onSubmit;return Object(p.a)({buttonText:a},n,{onSubmit:c,onChange:r})})(function(e){var t=e.buttonText,a=e.class_name,n=e.id,c=e.name,o=e.onChange,i=e.onSubmit;return r.a.createElement("div",{className:"icon-form"},r.a.createElement("div",{className:"icon-form-row"},r.a.createElement("div",null,r.a.createElement("label",null,Ke(ze.icon.name))),r.a.createElement("div",null,r.a.createElement("input",{name:"name",onChange:o,value:c}))),r.a.createElement("div",{className:"icon-form-row"},r.a.createElement("div",null,r.a.createElement("label",null,Ke(ze.icon.className))),r.a.createElement("div",null,r.a.createElement("input",{name:"class_name",onChange:o,value:a}))),r.a.createElement("div",{className:"icon-form-row"},r.a.createElement("div",{className:"button"},r.a.createElement("button",{type:"submit",className:"submit",onClick:i},t)),r.a.createElement("div",{className:"button"},r.a.createElement(yo,{id:n})),r.a.createElement("div",{className:"button"},r.a.createElement(vo,{id:n}))),r.a.createElement("div",{className:"icon-form-row"},r.a.createElement("span",{className:"preview"},Ke(ze.icon.preview),":","  ",r.a.createElement(tt,{className:a}))))}),_o=Object(s.b)(function(e){return{newIcon:e.icons.newIcon}})(function(e){var t=e.dispatch;return r.a.createElement(Oo,{buttonText:Ke(ze.icon.createButtonText),icon:e.newIcon,onChange:function(t){var a={type:"icons/UPDATE_NEW",payload:Object(P.a)({},t.target.name,t.target.value)};e.dispatch(a)},onSubmit:function(){var a=je({route:"icons-index"}),n=JSON.stringify(e.newIcon),r=At({eventType:"icon-create"});Me(a,n,{event:r,onSuccess:function(e){return t({type:"icons/CREATED",payload:e})}})}})}),No=Object(s.b)(function(e,t){return t})(function(e){var t=e.dispatch,a=e.icon,n=a.id,c=a.updatedProps,o=Object(p.a)({},a,a.updatedProps);return r.a.createElement(Oo,Object.assign({},o,{buttonText:Ke(ze.icon.updateButtonText),onChange:function(e){var a={type:"icons/UPDATE_PROPS",payload:Object(P.a)({id:n},e.target.name,e.target.value)};t(a)},onSubmit:function(){var e=je({route:"icon-show",id:n}),r=JSON.stringify(c),o=At({eventType:"icon-update",id:n,changedProps:Ct(a,c)});ke(e,r,{onSuccess:function(e){t({type:"icons/UPDATED",payload:e}),t(Gc({id:n,showForm:!1}))},event:o})}}))}),wo=Object(s.b)(function(e,t){return t})(function(e){var t=e.dispatch,a=e.icon,n=a.id,c=a.class_name,o=a.name;return a.showForm?r.a.createElement("div",{className:"icon"},r.a.createElement(No,{icon:a})):r.a.createElement("div",{className:"icon"},r.a.createElement("div",{className:"icon-name"},r.a.createElement(tt,{className:c})," ",o),r.a.createElement("div",{className:"icon-actions"},r.a.createElement(Ve.a,{to:"#",className:"fas fa-edit",onClick:function(e){e.preventDefault();var a=Gc({id:n,showForm:!0});t(a)}})," ",r.a.createElement(Ve.a,{to:"#",onClick:function(e){e.preventDefault();var a=window.confirm(ze.icon.deleteConfirmationMessage(o)),r=At({eventType:"icon-delete",id:n,name:o});if(a){var c=je({route:"icon-show",id:n});Ae(c,r,function(){return t(function(e){return{type:"icons/DELETED",payload:e}}(n))})}},className:"fas fa-trash"})))}),jo=Object(s.b)(function(e){var t=e.icons.fetched,a=e.icons.collection.sort(function(e,t){return e.name.toLowerCase()<t.name.toLowerCase()?-1:1}),n=a.length,r=Math.ceil(n/2),c=a.slice(0,r),o=a.slice(r,2*r);return{isApiUnauthorized:401===e.api.status,firstColumn:c,secondColumn:o,collectionFetched:t,newIcon:e.icons.newIcon}})(function(e){var t=e.dispatch,a=e.isApiUnauthorized,n=e.collectionFetched,c=e.firstColumn,o=e.secondColumn;if(!a&&!n){var i=je({route:"icons-index"});Ce(i,function(e){return t(Wc(e))})}return r.a.createElement("div",{className:"icons"},r.a.createElement("div",{className:"new-icon-form"},r.a.createElement(_o,null)),r.a.createElement("div",{className:"column"},c.map(function(e){return r.a.createElement(wo,{key:e.id,icon:e})})),r.a.createElement("div",{className:"column"},o.map(function(e){return r.a.createElement(wo,{key:e.id,icon:e})})))}),To=function(e){return{type:"transfers/UPDATE_NEW",payload:e}},Io=function(e){return{type:"transfers/UPDATE_PAGE",payload:{currentPage:e}}},Do=Object(s.b)(function(e){var t=e.transfers.newTransfer,a=t.from_account_id,n=t.to_account_id,r=e.accounts.collection,c={value:null,label:""},o=r.filter(function(e){return e.id!==n}).map(function(e){return{value:e.id,label:e.name}}),i=r.filter(function(e){return e.id!==a}).map(function(e){return{value:e.id,label:e.name}}),l={from:[c].concat(Object(d.a)(o)),to:[c].concat(Object(d.a)(i))},u=l.from.find(function(e){return e.value===a}),s=l.to.find(function(e){return e.value===n});return{newTransfer:t,fromOptions:l.from,fromValue:u,toOptions:l.to,toValue:s,currentPage:e.transfers.metadata.currentPage}})(function(e){var t=e.currentPage,a=e.dispatch,n=e.fromOptions,c=e.fromValue,o=e.newTransfer,i=e.toOptions,l=e.toValue,u=o.amount,s=o.from_account_id,m=o.to_account_id;return 1===t?r.a.createElement("div",{className:"new-transfer-form"},r.a.createElement("div",{className:"transfer-account-select"},Ke("".concat(Be.from," ").concat(Le.account)),":",r.a.createElement(Yt.a,{options:n,onChange:function(e){var t=To({from_account_id:e.value});a(t)},value:c})),r.a.createElement("div",{className:"transfer-account-select"},Ke("".concat(Be.to," ").concat(Le.account)),":",r.a.createElement(Yt.a,{options:i,onChange:function(e){var t=To({to_account_id:e.value});a(t)},value:l})),r.a.createElement("input",{value:u,onChange:function(e){var t=To({amount:e.target.value});a(t)},placeholder:"amount"}),r.a.createElement("button",{type:"submit",onClick:function(){var e=je({route:"transfers-index"}),t={amount:Math.round(100*u),to_account_id:m,from_account_id:s},n=At({eventType:"transfer-create",amount:t.amount,fromAccount:c.label,toAccount:l.label});Me(e,JSON.stringify(t),{event:n,onSuccess:function(e){return a({type:"transfers/CREATED",payload:e})}})}},"Submit")):null}),xo=function(e){var t=e.currentPage,a=e.onClick;return e.totalPages>1&&t>1?r.a.createElement(Ve.a,{to:"#",onClick:a},r.a.createElement(tt,{className:"fas fa-angle-double-left"})," ",Ke(Be.first)):null},Co=function(e){var t=e.currentPage,a=e.onClick;return t>2?r.a.createElement(Ve.a,{to:"#",onClick:a},r.a.createElement(tt,{className:"fas fa-caret-left"})," ",Ke(Be.previous)):null},Ao=function(e){var t=e.currentPage,a=e.totalPages;return 1===t||a===t?null:r.a.createElement("span",null,Be.ellipsis)},Mo=function(e){var t=e.currentPage,a=e.onClick;return t<e.totalPages-1?r.a.createElement(Ve.a,{to:"#",onClick:a},Ke(Be.next)," ",r.a.createElement(tt,{className:"fas fa-caret-right"})):null},ko=function(e){var t=e.currentPage,a=e.onClick;return t<e.totalPages?r.a.createElement(Ve.a,{to:"#",onClick:a},Ke(Be.last)," ",r.a.createElement(tt,{className:"fas fa-angle-double-right"})):null},Fo=Object(s.b)(function(e){return{metadata:e.transfers.metadata}})(function(e){var t=e.dispatch,a=e.metadata,n=a.currentPage,c=a.limit,o=a.total,i=Math.ceil(o/c);return r.a.createElement("div",{className:"transfers-pagination"},r.a.createElement(xo,{currentPage:n,onClick:function(e){e.preventDefault();var a=Io(1);t(a)},totalPages:i})," ",r.a.createElement(Co,{currentPage:n,onClick:function(e){e.preventDefault();var a=Io(n-1);t(a)}}),r.a.createElement(Ao,{currentPage:n,totalPages:i}),r.a.createElement(Mo,{currentPage:n,onClick:function(e){e.preventDefault();var a=Io(n+1);t(a)},totalPages:i})," ",r.a.createElement(ko,{currentPage:n,onClick:function(e){e.preventDefault();var a=Io(i);t(a)},totalPages:i}))}),So=Object(s.b)(function(e,t){return{id:t.id}})(function(e){var t=e.amount,a=(e.apiKey,e.from_account_id),n=e.dispatch,c=e.id,o=e.to_account_id;return r.a.createElement("div",{className:"transfer-delete"},r.a.createElement(Ve.a,{to:"#",onClick:function(e){if(e.preventDefault(),window.confirm(Be.deleteConfirmationMessage)){var r=je({route:"transfer-show",id:c}),i=At({eventType:"transfer-delete",id:c,fromAccountId:a,toAccountId:o,amount:t});Ae(r,i,function(){n({type:"transfers/DELETED",payload:{id:c,amount:t,from_account_id:a,to_account_id:o}})})}},className:"fas fa-trash"}))}),Ro=function(e){var t=e.from_transaction,a=e.id,n=e.to_transaction,c=n.amount;return r.a.createElement("div",{className:"transfer"},r.a.createElement("div",{className:"clearance-date"},t.clearance_date?G(t.clearance_date):n.clearance_date?G(n.clearance_date):"pending"),r.a.createElement("div",{className:"from-account"},t.account_name),r.a.createElement("div",{className:"to-account"},n.account_name),r.a.createElement("div",{className:"amount"},nt(n.amount)),r.a.createElement(So,{id:a,amount:c,from_account_id:t.account_id,to_account_id:n.account_id}))},Po=Object(s.b)(function(e){var t=new Date,a=new Date(t.getTime()-6e4*t.getTimezoneOffset()).toISOString().slice(0,10),n=e.accounts.accountsFetched,r=e.transfers.collection.sort(function(e,t){return e.from_transaction.clearance_date===t.from_transaction.clearance_date?0:null===e.from_transaction.clearance_date?t.from_transaction.clearance_date>a?-1:1:null===t.from_transaction.clearance_date?e.from_transaction.clearance_date>a?1:-1:e.from_transaction.clearance_date>t.from_transaction.clearance_date?1:-1}),c=401===e.api.status;return Object(p.a)({},e.transfers,{accounts:e.accounts.collection,collection:r,accountsFetched:n,isApiUnauthorized:c})})(function(e){var t=e.accounts,a=e.accountsFetched,n=e.isApiUnauthorized,c=e.collection,o=e.dispatch,i=e.fetchedTransfers,l=e.metadata,u=l.currentPage,s=l.total,m=l.viewing;if(!n&&!a){var d=je({route:"accounts-index"});Ce(d,function(e){return o(ge(e))})}if(!n&&a&&!i){var p=je({route:"transfers-index",query:{page:u}});Ce(p,function(e){return o({type:"transfers/FETCHED",payload:e})})}return r.a.createElement("div",null,r.a.createElement("div",{className:"accounts"},r.a.createElement(La,{collection:t,selectedAccountId:0})),r.a.createElement("div",{className:"transfers"},r.a.createElement("h2",null,Ke(Be.title)),r.a.createElement("hr",null),Be.iOfN(m,s),r.a.createElement("div",{className:"transfer"},r.a.createElement("div",{className:"clearance-date"},Ke(We.clearanceDate)," ",r.a.createElement(tt,{className:"fas fa-calendar-alt"})),r.a.createElement("div",{className:"from-account"},Ke(Be.from)),r.a.createElement("div",{className:"to-account"},Ke(Be.to)),r.a.createElement("div",{className:"amount"},Ke(We.amount))),c.map(function(e){return r.a.createElement(Ro,Object.assign({key:e.id},e))}),r.a.createElement("hr",null),r.a.createElement(Do,null),r.a.createElement(Fo,null)))});a(149),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(function(){return r.a.createElement("div",{className:"App"},r.a.createElement(s.a,{store:be},r.a.createElement(i.a,null,r.a.createElement("div",null,r.a.createElement(ho,null),r.a.createElement(fo,null),r.a.createElement(l.a,null,r.a.createElement(u.a,{exact:!0,path:"/accounts",component:za}),r.a.createElement(u.a,{exact:!0,path:"/accounts/index",component:Xa}),r.a.createElement(u.a,{exact:!0,path:"/accounts/transfers",component:Po}),r.a.createElement(u.a,{path:"/accounts/:slug/:month?/:year?",component:za}),r.a.createElement(u.a,{path:"/accounts/:slug/",component:za}),r.a.createElement(u.a,{exact:!0,path:"/budget/categories",component:io}),r.a.createElement(u.a,{exact:!0,path:"/budget/icons",component:jo}),r.a.createElement(u.a,{exact:!0,path:"/budget/:month/:year",component:vc}),r.a.createElement(u.a,{path:"/budget/finalize/:month/:year/start",component:un}),r.a.createElement(u.a,{path:"/budget/finalize/:month/:year/accruals",component:kn}),r.a.createElement(u.a,{path:"/budget/finalize/:month/:year/finish",component:Rn}),r.a.createElement(u.a,{path:"/budget/finalize/:month/:year/items",component:Vn}),r.a.createElement(u.a,{path:"/budget/set-up/:month/:year/accruals",component:Cc}),r.a.createElement(u.a,{path:"/budget/set-up/:month/:year/expenses",component:zc}),r.a.createElement(u.a,{path:"/budget/set-up/:month/:year/finalize",component:Uc}),r.a.createElement(u.a,{path:"/budget/set-up/:month/:year/intro",component:Yc}),r.a.createElement(u.a,{path:"/budget/set-up/:month/:year/revenues",component:Bc}),r.a.createElement(u.a,{exact:!0,path:"/budget/:month?/:year?",component:Jn})),r.a.createElement(go,null)))))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},66:function(e,t,a){e.exports=a(151)},71:function(e,t,a){},73:function(e,t,a){},75:function(e,t,a){},77:function(e,t,a){},79:function(e,t,a){},81:function(e,t,a){},83:function(e,t,a){}},[[66,2,1]]]);
//# sourceMappingURL=main.75ed33f5.chunk.js.map